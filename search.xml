<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Python + Selenium Unittest学习小结</title>
      <link href="/2019/12/27/python-selenium-unittest/"/>
      <url>/2019/12/27/python-selenium-unittest/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-Unittest学习小结"><a href="#Python-Selenium-Unittest学习小结" class="headerlink" title="Python + Selenium Unittest学习小结"></a>Python + Selenium Unittest学习小结</h1><p>相关链接：<a href="https://www.jianshu.com/p/38948d0d73f5" target="_blank" rel="noopener">https://www.jianshu.com/p/38948d0d73f5</a><br><a href="https://blog.csdn.net/huilan_same/article/details/52806985" target="_blank" rel="noopener">https://blog.csdn.net/huilan_same/article/details/52806985</a></p><p>一、什么是单元测试</p><p>单元测试是用来对一个模块、一个函数或者一个类来进行正确性检验的测试工作。</p><p>比如对于函数abs()，我们可以编写的测试用例为：</p><p>（1）输入正数，比如1、1.2、0.99，期待返回值与输入相同</p><p>（2）输入复数，比如-1、-1.2、-0.99，期待返回值与输入相反</p><p>（3）输入0，期待返回0</p><p>（4）输入非数值类型，比如None、[]、{}、期待抛出TypeError</p><p>把上面这些测试用例放到一个测试模块里，就是一个完整的单元测试</p><p>二、unittest工作原理</p><p>unittest中最核心的四部分是：TestCase，TestSuite，TestRunner，TestFixture</p><p>（1）一个TestCase的实例就是一个测试用例。测试用例就是指一个完整的测试流程，包括测试前准备环境的搭建（setUp），执行测试代码（run），以及测试后环境的还原（tearDown）。元测试（unit test）的本质也就在这里，一个测试用例是一个完整的测试单元，通过运行这个测试单元，可以对某一个问题进行验证。</p><p>（2）而多个测试用例集合在一起，就是TestSuite，而且TestSuite也可以嵌套TestSuite。</p><p>（3）TestLoader是用来加载TestCase到TestSuite中的。</p><p>（4）TextTestRunner是来执行测试用例的，其中的run(test)会执行TestSuite/TestCase中的run(result)方法</p><p>（5）测试的结果会保存到TextTestResult实例中，包括运行了多少测试用例，成功了多少，失败了多少等信息。</p><p>综上，整个流程就是首先要写好TestCase，然后由TestLoader加载TestCase到TestSuite，然后由TextTestRunner来运行TestSuite，运行的结果保存在TextTestResult中，整个过程集成在unittest.main模块中。</p><p>三、下面举两个实例，来看看unittest如何测试一个简单的函数</p><p>（1）编写一个Dict类，这个类的行为和dict一致，但是可以通过属性来访问例如</p><blockquote><blockquote><blockquote><p>d = Dict(a=1, b=2)<br>d[‘a’]<br>1<br>d.a<br>1</p></blockquote></blockquote></blockquote><p>mydict.py代码如下：</p><p>class Dict(dict):<br>    def <strong>init</strong>(self, <strong>kw):<br>        super(Dict, self).<strong>init</strong>(</strong>kw)</p><pre><code>def __getattr__(self, key):    try:        return self[key]    except KeyError:        raise AttributeError(r"'Dict' object has no attribute '%s'" % key)def __setattr__(self, key, value):    self[key] = value</code></pre><p>用于测试的文件mydict_test.py代码如下：</p><p>import unittest<br>from mydict import Dict</p><p>class TestDict(unittest.TestCase):<br>    def test_init(self):<br>        d = Dict(a=1, b=’test’)<br>        self.assertEqual(d.a, 1)  # 判断d.a是否等于1<br>        self.assertEqual(d.b, ‘test’)  # 判断d.b是否等于test<br>        self.assertTrue(isinstance(d, dict))  # 判断d是否是dict类型</p><pre><code>def test_key(self):    d = Dict()    d['key'] = 'value'    self.assertEqual(d.key, 'value')def test_attr(self):    d = Dict()    d.key = 'value'    self.assertTrue('key' in d)    self.assertEqual(d['key'], 'value')def test_keyerror(self):    d = Dict()    with self.assertRaises(KeyError):  # 通过d['empty']访问不存在的key时，断言会抛出keyerror        value = d['empty']def test_attrerror(self):    d = Dict()    with self.assertRaises(AttributeError):  # 通过d.empty访问不存在的key时，我们期待抛出AttributeError        value = d.empty</code></pre><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    unittest.main()</p><p>直接把mydict_test.py当普通的Python脚本运行即可</p><p>输出：</p><h2 id="…"><a href="#…" class="headerlink" title="….."></a>…..</h2><p>Ran 5 tests in 0.000s</p><p>OK</p><p>（2）测一个简单的加减乘除接口</p><p>mathfunc.py文件代码如下：</p><p>def add(a, b):<br>    return a + b</p><p>def minus(a, b):<br>    return a - b</p><p>def multi(a, b):<br>    return a * b</p><p>def divide(a, b):<br>    return a / b</p><p>test_mathfunc.py文件代码如下：</p><p>import unittest<br>from mathfunc import *</p><p>class TestMathFunc(unittest.TestCase):</p><pre><code>def test_add(self):    self.assertEqual(3, add(1, 2))    self.assertNotEqual(3, add(2, 2))def test_minus(self):    self.assertEqual(1, minus(3, 2))def test_multi(self):    self.assertEqual(6, multi(3, 2))def test_divide(self):    self.assertEqual(2, divide(6, 3))    self.assertEqual(2.5, divide(5, 2))</code></pre><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    unittest.main()</p><p>输出：</p><h1 id="F"><a href="#F" class="headerlink" title=".F.."></a>.F..</h1><h2 id="FAIL-test-divide-main-TestDict"><a href="#FAIL-test-divide-main-TestDict" class="headerlink" title="FAIL: test_divide (main.TestDict)"></a>FAIL: test_divide (<strong>main</strong>.TestDict)</h2><p>Traceback (most recent call last):<br>  File “D:/pythonWorkspace/test_mathfunc.py”, line 20, in test_divide<br>    self.assertEqual(2.5, divide(5, 2))<br>AssertionError: 2.5 != 2</p><hr><p>Ran 4 tests in 0.000s</p><p>FAILED (failures=1)</p><p>可以看到一共运行了4个测试，失败了1个，并且给出了失败原因，2.5!=2，也就是说我们的divide方法是有问题的。</p><p>关于输出的几点说明：</p><p>1、在第一行给出了每一个用例执行的结果的标识，成功是.，失败是F，出错是E，跳过是S。从上面可以看出，测试的执行跟方法的顺序没有关系，divide方法写在了第4个，但是却在第2个执行。</p><p>2、每个测试方法均以test开头，否则不能被unittest识别</p><p>3、在uniitest.main()中加verbosity参数可以控制输出的错误报告的详细程度，默认是1，如果设为0， 则不输出每一用例的执行结果，即没有上面的结果中的第1行，如果设为2，则输出详细的执行结果，如下所示：</p><p>test_add (<strong>main</strong>.TestMathFunc) … ok<br>test_divide (<strong>main</strong>.TestMathFunc) … FAIL<br>test_minus (<strong>main</strong>.TestMathFunc) … ok<br>test_multi (<strong>main</strong>.TestMathFunc) … ok</p><p>======================================================================</p><h2 id="FAIL-test-divide-main-TestMathFunc"><a href="#FAIL-test-divide-main-TestMathFunc" class="headerlink" title="FAIL: test_divide (main.TestMathFunc)"></a>FAIL: test_divide (<strong>main</strong>.TestMathFunc)</h2><p>Traceback (most recent call last):<br>  File “D:/pythonWorkspace/test_mathfunc.py”, line 20, in test_divide<br>    self.assertEqual(2.5, divide(5, 2))<br>AssertionError: 2.5 != 2</p><hr><p>Ran 4 tests in 0.000s</p><p>FAILED (failures=1)</p><p>四、组织TestSuite</p><p>上面的测试用例在执行的时候没有按照顺序执行，如果想要让用例按照你设置的顺序执行就用到了TestSuite。我们添加到TestSuite中的case是会按照添加的顺序执行的。</p><p>现在我们只有一个测试文件，如果有多个测试文件，也可以用TestSuite组织起来。</p><p>继续上面第二加减乘除的例子，现在再新建一个文件，test_suite.py，代码如下：</p><h1 id="coding-utf-8"><a href="#coding-utf-8" class="headerlink" title="coding=utf-8"></a>coding=utf-8</h1><p>import unittest<br>from test_mathfunc import TestMathFunc</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    suite = unittest.TestSuite()</p><pre><code>tests = [TestMathFunc("test_add"), TestMathFunc("test_minus"), TestMathFunc("test_divide")]suite.addTests(tests)runner = unittest.TextTestRunner(verbosity=2)runner.run(suite)</code></pre><p>执行结果如下：</p><p>test_add (test_mathfunc.TestMathFunc) … ok<br>test_minus (test_mathfunc.TestMathFunc) … ok<br>test_divide (test_mathfunc.TestMathFunc) … FAIL</p><p>======================================================================</p><h2 id="FAIL-test-divide-test-mathfunc-TestMathFunc"><a href="#FAIL-test-divide-test-mathfunc-TestMathFunc" class="headerlink" title="FAIL: test_divide (test_mathfunc.TestMathFunc)"></a>FAIL: test_divide (test_mathfunc.TestMathFunc)</h2><p>Traceback (most recent call last):<br>  File “D:\pythonWorkspace\HTMLTest\test_mathfunc.py”, line 20, in test_divide<br>    self.assertEqual(2.5, divide(5, 2))<br>AssertionError: 2.5 != 2</p><hr><p>Ran 3 tests in 0.000s</p><p>FAILED (failures=1)</p><p>五、将结果输出到文件</p><p>现在我们的测试结果只能输出到控制台，现在我们想将结果输出到文件中以便后续可以查看。</p><p>将test_suite.py进行一点修改，代码如下：</p><h1 id="coding-utf-8-1"><a href="#coding-utf-8-1" class="headerlink" title="coding=utf-8"></a>coding=utf-8</h1><p>import unittest<br>from test_mathfunc import TestMathFunc</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    suite = unittest.TestSuite()</p><pre><code>tests = [TestMathFunc("test_add"), TestMathFunc("test_minus"), TestMathFunc("test_divide")]suite.addTests(tests)with open('UnittestTextReport.txt', 'a') as  f:    runner = unittest.TextTestRunner(stream=f, verbosity=2)    runner.run(suite)</code></pre><p>运行该文件，就会发现目录下生成了’UnittestTextReport.txt，所有的执行报告均输出到了此文件中。</p><p>六、test fixture的setUp和tearDown</p><p>当遇到要启动一个数据库这种情况时，只想在开始时连接上数据库，在结束时关闭连接。那么可以使用setUp和tearDown函数。</p><p>class TestDict(unittest.TestCase):</p><pre><code>def setUp(self):    print 'setUp...'def tearDown(self):    print 'tearDown...'</code></pre><p>这两个方法在每个测试方法执行前以及执行后执行一次，setUp用来为测试准备环境，tearDown用来清理环境，以备后续的测试。</p><p>如果想要在所有case执行之前准备一次环境，并在所有case执行结束之后再清理环境，我们可以用setUpClass()与tearDownClass()，代码格式如下：</p><p>class TestMathFunc(unittest.TestCase):<br>    @classmethod<br>    def setUpClass(cls):<br>        print “setUp”</p><pre><code>@classmethoddef tearDownClass(cls):    print "tearDown"</code></pre><p>七、跳过某个case</p><p>unittest提供了几种方法可以跳过case</p><p>（1）skip装饰器</p><p>代码如下</p><h1 id="coding-utf-8-2"><a href="#coding-utf-8-2" class="headerlink" title="coding=utf-8"></a>coding=utf-8</h1><p>import unittest<br>from mathfunc import *</p><p>class TestMathFunc(unittest.TestCase):</p><pre><code> .....@unittest.skip("i don't want to run this case.")def test_minus(self):    self.assertEqual(1, minus(3, 2))</code></pre><p>输出：</p><p>test_add (test_mathfunc.TestMathFunc) … ok<br>test_minus (test_mathfunc.TestMathFunc) … skipped “i don’t want to run this case.”<br>test_divide (test_mathfunc.TestMathFunc) … FAIL</p><p>======================================================================</p><h2 id="FAIL-test-divide-test-mathfunc-TestMathFunc-1"><a href="#FAIL-test-divide-test-mathfunc-TestMathFunc-1" class="headerlink" title="FAIL: test_divide (test_mathfunc.TestMathFunc)"></a>FAIL: test_divide (test_mathfunc.TestMathFunc)</h2><p>Traceback (most recent call last):<br>  File “D:\pythonWorkspace\HTMLTest\test_mathfunc.py”, line 28, in test_divide<br>    self.assertEqual(2.5, divide(5, 2))<br>AssertionError: 2.5 != 2</p><hr><p>Ran 3 tests in 0.000s</p><p>FAILED (failures=1, skipped=1)</p><p>skip装饰器一共有三个</p><p>unittest,skip(reason)：无条件跳过</p><p>unittest.skipIf(condition, reason)：当condition为True时跳过</p><p>unittest.skipUnless(condition, reason)：当condition为False时跳过</p><p>（2）TestCase.skipTest()方法</p><p>class TestMathFunc(unittest.TestCase):<br>…<br>def test_minus(self):<br>        self.skipTest(‘do not run this.’)<br>        self.assertEqual(1, minus(3, 2))</p><p>输出：</p><p>test_add (test_mathfunc.TestMathFunc) … ok<br>test_minus (test_mathfunc.TestMathFunc) … skipped ‘do not run this.’<br>test_divide (test_mathfunc.TestMathFunc) … FAIL</p><p>======================================================================</p><h2 id="FAIL-test-divide-test-mathfunc-TestMathFunc-2"><a href="#FAIL-test-divide-test-mathfunc-TestMathFunc-2" class="headerlink" title="FAIL: test_divide (test_mathfunc.TestMathFunc)"></a>FAIL: test_divide (test_mathfunc.TestMathFunc)</h2><p>Traceback (most recent call last):<br>  File “D:\pythonWorkspace\HTMLTest\test_mathfunc.py”, line 20, in test_divide<br>    self.assertEqual(2.5, divide(5, 2))<br>AssertionError: 2.5 != 2</p><hr><p>Ran 3 tests in 0.000s</p><p>FAILED (failures=1, skipped=1)</p><p>八、用HTMLTestRunner输出漂亮的HTML报告</p><p>txt格式的文本执行报告过于简陋，这里我们学习一下借助HTMLTestRunner生成HTML报告。首先需要下载HTMLTestRunner.py，并放到当前目录下，或者python目录下的Lib中，就可以导入运行了。</p><p>下载地址：<a href="http://tungwaiyip.info/software/HTMLTestRunner.html" target="_blank" rel="noopener">http://tungwaiyip.info/software/HTMLTestRunner.html</a></p><p>将test_suite.py代码修改如下：</p><h1 id="coding-utf-8-3"><a href="#coding-utf-8-3" class="headerlink" title="coding=utf-8"></a>coding=utf-8</h1><p>import unittest<br>from test_mathfunc import TestMathFunc<br>from HTMLTestRunner import HTMLTestRunner</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    suite = unittest.TestSuite()</p><pre><code>tests = [TestMathFunc("test_add"), TestMathFunc("test_minus"), TestMathFunc("test_divide")]suite.addTests(tests)with open('HTMLReport.html', 'w') as f:    runner = HTMLTestRunner(stream=f,                            title = 'MathFunc Test Report',                            description='generated by HTMLTestRunner.',                            verbosity=2                            )    runner.run(suite)</code></pre><p>执行后，控制台输出如下：</p><p>ok test_add (test_mathfunc.TestMathFunc)<br>F  test_divide (test_mathfunc.TestMathFunc)</p><p>Time Elapsed: 0:00:00.001000</p><p>生成的html：</p><p>九、总结</p><p>1、unittest是python自带的单元测试框架，我们可以用其来作为我们自动化测试框架的用例组织执行框架。</p><p>2、unittest的流程：写好TestCase，然后由TestLoader加载TestCase到TestSuite，然后由TextTestRunner来运行TestSuite，运行的结果保存在TextTestResult中，我们通过命令行或者unittest.main()执行时，main会调用TextTestRunner中的run来执行，或者我们可以直接通过TextTestRunner来执行用例。</p><p>3、一个class继承unittest.TestCase即是一个TestCase，其中以 test 开头的方法在load时被加载为一个真正的TestCase。</p><p>4、verbosity参数可以控制执行结果的输出，0 是简单报告、1 是一般报告、2 是详细报告。</p><p>5、可以通过addTest和addTests向suite中添加case或suite，可以用TestLoader的loadTestsFrom__()方法。</p><p>6、用 setUp()、tearDown()、setUpClass()以及 tearDownClass()可以在用例执行前布置环境，以及在用例执行后清理环境</p><p>7、我们可以通过skip，skipIf，skipUnless装饰器跳过某个case，或者用TestCase.skipTest方法。</p><p>8、参数中加stream，可以将报告输出到文件：可以用TextTestRunner输出txt报告，以及可以用HTMLTestRunner输出html报告。</p><p>————————————————<br>版权声明：本文为CSDN博主「小拳头」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/xiaoquantouer/article/details/75089200" target="_blank" rel="noopener">https://blog.csdn.net/xiaoquantouer/article/details/75089200</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> Unittest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonPython使用小技巧之数据文件的读取</title>
      <link href="/2019/12/19/automation-unittest-framework/"/>
      <url>/2019/12/19/automation-unittest-framework/</url>
      
        <content type="html"><![CDATA[<h1 id="Python使用小技巧之数据文件的读取"><a href="#Python使用小技巧之数据文件的读取" class="headerlink" title="Python使用小技巧之数据文件的读取"></a>Python使用小技巧之数据文件的读取</h1><p>虽然前面的文章中提到了参数化，但大多数测试更倾向于把测试数据放到数据文件中。所以这里介绍下常见的读取数据文件的方法。</p><p>这里继续之前用户登录的例子，将用户信息拆分到单独的数据文件中，在需要时进行读取，来进一步的参数化。</p><h2 id="01-TXT文件的读取"><a href="#01-TXT文件的读取" class="headerlink" title="01 TXT文件的读取"></a>01 TXT文件的读取</h2><p>txt文件是我们经常操作的文件类型，Python为我们提供了以下几种读取方法：</p><ul><li><code>read()</code>  读取整个文件</li><li><code>readline()</code>  读取一行数据</li><li><code>readlines()</code> 读取所有行的数据</li></ul><p>现在假设我们准备了一个用户信息的txt文件命名为user_info.txt，内容如下：</p><pre class=" language-txt"><code class="language-txt">::passwordusername:user_error:passwd_erroradmin:admin</code></pre><p>我们可以使用以下方式对其读取：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 读取文件</span><span class="token keyword">with</span><span class="token punctuation">(</span>open<span class="token punctuation">(</span><span class="token string">"./user_info.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> user_data<span class="token punctuation">:</span>    data <span class="token operator">=</span> user_data<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 格式化处理</span>users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> line <span class="token keyword">in</span> data<span class="token punctuation">:</span>  user <span class="token operator">=</span> line<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span>  users<span class="token punctuation">.</span>append<span class="token punctuation">(</span>user<span class="token punctuation">)</span></code></pre><p>注意：在上述代码中，我们使用<code>[:-1]</code>方式对拿到的每一行数据，进行切片操作，以忽略每行中最后一个字符，因为读取的每一行数据结尾都有一个换行符<code>\n</code>。split()方法则是通过指定的分割符对数据进行拆分。</p><p>这里我们可以打印出users的二维数据，如下</p><pre><code>[['', ''], ['', 'password'], ['username', ''], ['user_error', 'passwd_error'], ['admin', 'admin']]</code></pre><p>于是，我们用户登录的测试用例，就可以进一步的参数化。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用Mail类并接收driver驱动</span>mail <span class="token operator">=</span> Mail<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 登录账户为空</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 密码为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名或密码错误的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 管理员账户登录</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h2 id="02-CSV文件的读取"><a href="#02-CSV文件的读取" class="headerlink" title="02 CSV文件的读取"></a>02 CSV文件的读取</h2><p>CSV文件可用来存放固定字段的数据，这次我们把用户信息保存在CSV文件中，如下所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191217090524.png" alt=""></p><p>Python中对CSV文件的读取，可以借助<code>csv</code>模块，具体代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">import</span> codecs<span class="token keyword">from</span> itertools <span class="token keyword">import</span> islice<span class="token comment" spellcheck="true"># 读取本地CSV文件</span>data <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>codecs<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">"./user_info.csv"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"utf_8_sig"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 存放用户数据</span>users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 循环输出每行信息</span><span class="token keyword">for</span> line <span class="token keyword">in</span> islice<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">:</span>    users<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">)</span></code></pre><p>通过Python读取CSV文件比较简单，但有两类问题值得注意下。</p><ul><li><p>中文乱码问题<br>在数据文件中我们不可避免地会使用中文，上述代码中用到的<code>codecs</code>模块，是Python标准的模块编码/解码器。<br>首先通过<code>codecs</code>提供的open()方法，在打开时可以指定编码类型，如utf_8_sig，接下来导入csv模块，通过reader()方法读取文件，这样就可以避免中文乱码问题。</p></li><li><p>跳过CSV文件的表头进行读取<br>因为我们一般会在第一行测试字段名，所以在读取数据时需要跳过。Python的内建模块<code>itertools</code>提供了用于操作迭代对象的函数，即islice()函数，它可以返回一个迭代器，第一个参数用于指定迭代对象，第二个参数指定开始迭代的位置，第三个参数表示结束位。</p></li></ul><p>这里我们同样可以打印出users的二维数据，如下</p><pre><code>[['', '', '请输入账号'], ['', 'password', '请输入账号'], ['username', '', '请输入密码'], ['user_error', 'passwd_error', '账号或密码错误'], ['admin', 'admin', '管理员您好'], ['guest', 'guest', 'Guest您好']]</code></pre><h2 id="03-XML文件的读取"><a href="#03-XML文件的读取" class="headerlink" title="03 XML文件的读取"></a>03 XML文件的读取</h2><p>有时我们需要数据是不规则的。例如，我们需要用一个配置文件来配置当前自动化测试平台、浏览器、URL、登录的用户名密码等内容，这时就可以使用XML文件来存放这些测试数据。</p><p>以下这个xml文件的示例，是我们工作用到一个配置文件。</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appSettings</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--UI Test Data--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BaseUrl</span><span class="token punctuation">></span></span>https://10.10.32.105<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BaseUrl</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span> <span class="token attr-name">UserName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Jeffrey.Zhao<span class="token punctuation">"</span></span> <span class="token attr-name">UserPassword</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Zhao1234##<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span> <span class="token attr-name">UserName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span> <span class="token attr-name">UserPassword</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AdminURL</span><span class="token punctuation">></span></span>/admin.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AdminURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppURL</span><span class="token punctuation">></span></span>/desktop.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppURL</span><span class="token punctuation">></span></span>/#/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DOWNLOADPATH</span><span class="token punctuation">></span></span>C:\Automation\Qs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DOWNLOADPATH</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browsers</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>chrome<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>Firefox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>Edge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browsers</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- DB Server Setting--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_USER</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_USER</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_PWD</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_PWD</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ReplicaSetName</span><span class="token punctuation">></span></span>rs1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ReplicaSetName</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MongoDBStr</span><span class="token punctuation">></span></span>mongodb://admin:admin@10.10.32.106:27017<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MongoDBStr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_IP</span><span class="token punctuation">></span></span>10.10.32.106<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_IP</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_PORT</span><span class="token punctuation">></span></span>27017<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_PORT</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appSettings</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>通过这个文件，不难看出，数据主要存放在标签对之间。有时数据也会作为标签的属性存放。</p><p>接下来看看，如何读取它。</p><h3 id="3-1-获取标签对之间的数据"><a href="#3-1-获取标签对之间的数据" class="headerlink" title="3.1 获取标签对之间的数据"></a>3.1 获取标签对之间的数据</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token keyword">import</span> parse<span class="token comment" spellcheck="true"># 打开XML文件</span>dom <span class="token operator">=</span> parse<span class="token punctuation">(</span><span class="token string">'./config.xml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 得到文档元素对象</span>root <span class="token operator">=</span> dom<span class="token punctuation">.</span>documentElement<span class="token comment" spellcheck="true"># 获取(一组)标签</span>tag_name <span class="token operator">=</span> root<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'Browser'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span></code></pre><p>Python自带读取XML文件的模块，通过parse()方法可读取XML文件。documentElement()方法用于获取文档元素对象，getElementsByTagName()方法用于获取文件中的标签。我们不需要指定标签的层级关系，即获取的标签可以是层级的，之所以在定义XML文件时设置层级，仅仅是为了方便阅读。</p><p>获取标签数组中的某个元素。firstChild属性可返回被选节点的第一个子节点，data表示获取该节点的数据，它与WebDriver中的text语句的作用相似。</p><h3 id="3-2-获得标签的属性值"><a href="#3-2-获得标签的属性值" class="headerlink" title="3.2 获得标签的属性值"></a>3.2 获得标签的属性值</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token keyword">import</span> parse<span class="token comment" spellcheck="true"># 打开XML文件</span>dom <span class="token operator">=</span> parse<span class="token punctuation">(</span><span class="token string">'./config.xml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 得到文档元素对象</span>root <span class="token operator">=</span> dom<span class="token punctuation">.</span>documentElement<span class="token comment" spellcheck="true"># 获取(一组)标签</span>login_user <span class="token operator">=</span> root<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获得login标签的UserName属性值、UserPassword属性值</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user1_name:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user1_passwd:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserPassword"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user2_name:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user2_passwd:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserPassword"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>执行结果如下：</p><pre><code>user1_name: Jeffrey.Zhaouser1_passwd: Zhao1234##user2_name: adminuser2_passwd: admin</code></pre><p>这里主要使用了<code>getAttribute()</code>方法获取元素的属性值，它和WebDriver中的<code>get_attribute()</code>方法作用相似。</p><h2 id="04-JSON文件的读取"><a href="#04-JSON文件的读取" class="headerlink" title="04 JSON文件的读取"></a>04 JSON文件的读取</h2><p>JSON是一种轻量级的数据交换格式，清晰的层次结构使用JSON文件被广泛使用。</p><p>在Python中读取JSON文件同样很方便，在这里我们准备一个uesr_info.json文件。</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"password"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"user_error"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"passwd_error"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>接下来，我们进行json文件内容的读取。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'./user_info.json'</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>user_list <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>user_list<span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动化测试之数据文件的读取</title>
      <link href="/2019/12/17/automation-read-and-write-files/"/>
      <url>/2019/12/17/automation-read-and-write-files/</url>
      
        <content type="html"><![CDATA[<h1 id="自动化测试之数据文件的读取"><a href="#自动化测试之数据文件的读取" class="headerlink" title="自动化测试之数据文件的读取"></a>自动化测试之数据文件的读取</h1><p>虽然前面的文章中提到了参数化，但大多数测试更倾向于把测试数据放到数据文件中。所以这里介绍下常见的读取数据文件的方法。</p><p>这里继续之前用户登录的例子，将用户信息拆分到单独的数据文件中，在需要时进行读取，来进一步的参数化。</p><h2 id="01-TXT文件的读取"><a href="#01-TXT文件的读取" class="headerlink" title="01 TXT文件的读取"></a>01 TXT文件的读取</h2><p>txt文件是我们经常操作的文件类型，Python为我们提供了以下几种读取方法：</p><ul><li><code>read()</code>  读取整个文件</li><li><code>readline()</code>  读取一行数据</li><li><code>readlines()</code> 读取所有行的数据</li></ul><p>现在假设我们准备了一个用户信息的txt文件命名为user_info.txt，内容如下：</p><pre class=" language-txt"><code class="language-txt">::passwordusername:user_error:passwd_erroradmin:admin</code></pre><p>我们可以使用以下方式对其读取：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 读取文件</span><span class="token keyword">with</span><span class="token punctuation">(</span>open<span class="token punctuation">(</span><span class="token string">"./user_info.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> user_data<span class="token punctuation">:</span>    data <span class="token operator">=</span> user_data<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 格式化处理</span>users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> line <span class="token keyword">in</span> data<span class="token punctuation">:</span>  user <span class="token operator">=</span> line<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span>  users<span class="token punctuation">.</span>append<span class="token punctuation">(</span>user<span class="token punctuation">)</span></code></pre><p>注意：在上述代码中，我们使用<code>[:-1]</code>方式对拿到的每一行数据，进行切片操作，以忽略每行中最后一个字符，因为读取的每一行数据结尾都有一个换行符<code>\n</code>。split()方法则是通过指定的分割符对数据进行拆分。</p><p>这里我们可以打印出users的二维数据，如下</p><pre><code>[['', ''], ['', 'password'], ['username', ''], ['user_error', 'passwd_error'], ['admin', 'admin']]</code></pre><p>于是，我们用户登录的测试用例，就可以进一步的参数化。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用Mail类并接收driver驱动</span>mail <span class="token operator">=</span> Mail<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 登录账户为空</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 密码为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名或密码错误的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 管理员账户登录</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> users<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h2 id="02-CSV文件的读取"><a href="#02-CSV文件的读取" class="headerlink" title="02 CSV文件的读取"></a>02 CSV文件的读取</h2><p>CSV文件可用来存放固定字段的数据，这次我们把用户信息保存在CSV文件中，如下所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191217090524.png" alt=""></p><p>Python中对CSV文件的读取，可以借助<code>csv</code>模块，具体代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">import</span> codecs<span class="token keyword">from</span> itertools <span class="token keyword">import</span> islice<span class="token comment" spellcheck="true"># 读取本地CSV文件</span>data <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>codecs<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">"./user_info.csv"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"utf_8_sig"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 存放用户数据</span>users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 循环输出每行信息</span><span class="token keyword">for</span> line <span class="token keyword">in</span> islice<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">:</span>    users<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">)</span></code></pre><p>通过Python读取CSV文件比较简单，但有两类问题值得注意下。</p><ul><li><p>中文乱码问题<br>在数据文件中我们不可避免地会使用中文，上述代码中用到的<code>codecs</code>模块，是Python标准的模块编码/解码器。<br>首先通过<code>codecs</code>提供的open()方法，在打开时可以指定编码类型，如utf_8_sig，接下来导入csv模块，通过reader()方法读取文件，这样就可以避免中文乱码问题。</p></li><li><p>跳过CSV文件的表头进行读取<br>因为我们一般会在第一行测试字段名，所以在读取数据时需要跳过。Python的内建模块<code>itertools</code>提供了用于操作迭代对象的函数，即islice()函数，它可以返回一个迭代器，第一个参数用于指定迭代对象，第二个参数指定开始迭代的位置，第三个参数表示结束位。</p></li></ul><p>这里我们同样可以打印出users的二维数据，如下</p><pre><code>[['', '', '请输入账号'], ['', 'password', '请输入账号'], ['username', '', '请输入密码'], ['user_error', 'passwd_error', '账号或密码错误'], ['admin', 'admin', '管理员您好'], ['guest', 'guest', 'Guest您好']]</code></pre><h2 id="03-XML文件的读取"><a href="#03-XML文件的读取" class="headerlink" title="03 XML文件的读取"></a>03 XML文件的读取</h2><p>有时我们需要数据是不规则的。例如，我们需要用一个配置文件来配置当前自动化测试平台、浏览器、URL、登录的用户名密码等内容，这时就可以使用XML文件来存放这些测试数据。</p><p>以下这个xml文件的示例，是我们工作用到一个配置文件。</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appSettings</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--UI Test Data--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BaseUrl</span><span class="token punctuation">></span></span>https://10.10.32.105<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BaseUrl</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span> <span class="token attr-name">UserName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Jeffrey.Zhao<span class="token punctuation">"</span></span> <span class="token attr-name">UserPassword</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Zhao1234##<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span> <span class="token attr-name">UserName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span> <span class="token attr-name">UserPassword</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AdminURL</span><span class="token punctuation">></span></span>/admin.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AdminURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppURL</span><span class="token punctuation">></span></span>/desktop.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppURL</span><span class="token punctuation">></span></span>/#/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppURL</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DOWNLOADPATH</span><span class="token punctuation">></span></span>C:\Automation\Qs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DOWNLOADPATH</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browsers</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>chrome<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>Firefox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Browser</span><span class="token punctuation">></span></span>Edge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browser</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Browsers</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- DB Server Setting--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_USER</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_USER</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_PWD</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_PWD</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ReplicaSetName</span><span class="token punctuation">></span></span>rs1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ReplicaSetName</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MongoDBStr</span><span class="token punctuation">></span></span>mongodb://admin:admin@10.10.32.106:27017<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MongoDBStr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_IP</span><span class="token punctuation">></span></span>10.10.32.106<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_IP</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MONGODB_PORT</span><span class="token punctuation">></span></span>27017<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MONGODB_PORT</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appSettings</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>通过这个文件，不难看出，数据主要存放在标签对之间。有时数据也会作为标签的属性存放。</p><p>接下来看看，如何读取它。</p><h3 id="3-1-获取标签对之间的数据"><a href="#3-1-获取标签对之间的数据" class="headerlink" title="3.1 获取标签对之间的数据"></a>3.1 获取标签对之间的数据</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token keyword">import</span> parse<span class="token comment" spellcheck="true"># 打开XML文件</span>dom <span class="token operator">=</span> parse<span class="token punctuation">(</span><span class="token string">'./config.xml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 得到文档元素对象</span>root <span class="token operator">=</span> dom<span class="token punctuation">.</span>documentElement<span class="token comment" spellcheck="true"># 获取(一组)标签</span>tag_name <span class="token operator">=</span> root<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'Browser'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tag_name<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data<span class="token punctuation">)</span></code></pre><p>Python自带读取XML文件的模块，通过parse()方法可读取XML文件。documentElement()方法用于获取文档元素对象，getElementsByTagName()方法用于获取文件中的标签。我们不需要指定标签的层级关系，即获取的标签可以是层级的，之所以在定义XML文件时设置层级，仅仅是为了方便阅读。</p><p>获取标签数组中的某个元素。firstChild属性可返回被选节点的第一个子节点，data表示获取该节点的数据，它与WebDriver中的text语句的作用相似。</p><h3 id="3-2-获得标签的属性值"><a href="#3-2-获得标签的属性值" class="headerlink" title="3.2 获得标签的属性值"></a>3.2 获得标签的属性值</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token keyword">import</span> parse<span class="token comment" spellcheck="true"># 打开XML文件</span>dom <span class="token operator">=</span> parse<span class="token punctuation">(</span><span class="token string">'./config.xml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 得到文档元素对象</span>root <span class="token operator">=</span> dom<span class="token punctuation">.</span>documentElement<span class="token comment" spellcheck="true"># 获取(一组)标签</span>login_user <span class="token operator">=</span> root<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获得login标签的UserName属性值、UserPassword属性值</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user1_name:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user1_passwd:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserPassword"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user2_name:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"user2_passwd:"</span><span class="token punctuation">,</span> login_user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"UserPassword"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>执行结果如下：</p><pre><code>user1_name: Jeffrey.Zhaouser1_passwd: Zhao1234##user2_name: adminuser2_passwd: admin</code></pre><p>这里主要使用了<code>getAttribute()</code>方法获取元素的属性值，它和WebDriver中的<code>get_attribute()</code>方法作用相似。</p><h2 id="04-JSON文件的读取"><a href="#04-JSON文件的读取" class="headerlink" title="04 JSON文件的读取"></a>04 JSON文件的读取</h2><p>JSON是一种轻量级的数据交换格式，清晰的层次结构使用JSON文件被广泛使用。</p><p>在Python中读取JSON文件同样很方便，在这里我们准备一个uesr_info.json文件。</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"password"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"user_error"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"passwd_error"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token property">"password"</span><span class="token operator">:</span><span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>接下来，我们进行json文件内容的读取。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'./user_info.json'</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>user_list <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>user_list<span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动化测试之模块化参数化</title>
      <link href="/2019/12/16/automation-testing-mo-kuai-hua-ji-can-shu-hua/"/>
      <url>/2019/12/16/automation-testing-mo-kuai-hua-ji-can-shu-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="自动化测试之模块化参数化"><a href="#自动化测试之模块化参数化" class="headerlink" title="自动化测试之模块化参数化"></a>自动化测试之模块化参数化</h1><p>模块化与参数化一般需要配合使用，即在创建函数或类方法时为它们设置入参，从而使以根据不同的参数执行相应的操作。</p><p>这里通过一个邮箱登录的脚本来辅以说明。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.126.com"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 邮箱的登录操作</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>lbNormal <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"密码登录"</span><span class="token punctuation">)</span><span class="token keyword">if</span> lbNormal<span class="token punctuation">:</span>    lbNormal<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span>login_frame <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'iframe[id^="x-URS-iframe"]'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span>login_frame<span class="token punctuation">)</span>email_user <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span>email_user<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>email_user<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span>email_passwd <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>email_passwd<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>email_passwd<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_elements_by_id<span class="token punctuation">(</span><span class="token string">"dologin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Todo 在邮箱成功登录后可执行的一些操作</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 退出</span>browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"退出"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>假设要实现一个关于邮箱自动化测试的项目，可能每条测试用例都需要有登录操作和退出动作。大部分的测试都需要在登录之后进行，如收发邮件、查看、删除、检索邮件等等。在这里，我可以创建一个新的脚本<code>MailModule.py</code>来存放登录和退出动作。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Mail</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> driver    <span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""登录"""</span>        lbNormal <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"密码登录"</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> lbNormal<span class="token punctuation">:</span>            lbNormal<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">pass</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'iframe[id^="x-URS-iframe"]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"dologin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">logout</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""退出"""</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"退出"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>接下来，我们需要修改此前的mailtest.py脚本，测试调用Mail类中的<code>login()</code>和<code>logout()</code>方法。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> MailModule <span class="token keyword">import</span> Maildriver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.126.com"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 调用Mail类并接收driver驱动</span>mail <span class="token operator">=</span> Mail<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Todo 在邮箱成功登录后可执行的一些操作</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 退出</span>mail<span class="token punctuation">.</span>logout<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>在编写测试用例过程中，如果需要用到登录动作、退出动作时，那么只需调用Mail类中的login()方法、logout()方法即可，这将大大提高测试代码的可复用性。</p><p>这里切换为另一个场景，若我们需要测试登录呢？虽然测试的步骤是固定的，但测试的数据(邮箱用户)不同，这时我们就都需要把login()方法参数化。</p><p>我们可以将MailModule.py脚本进行如下修改：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># …………</span>    <span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""登录"""</span>        lbNormal <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"密码登录"</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> lbNormal<span class="token punctuation">:</span>            lbNormal<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">pass</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'iframe[id^="x-URS-iframe"]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>username<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>password<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"dologin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># …………</span></code></pre><p>由此以来，我们就提高了login()方法的可用性，它不在使用一个固定的账号登录，而是根据被调用者传过来的用户名和密码执行登录动作。</p><p>在实际测试中，我们可以根据不同的测试需要来调用login()方法。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用Mail类并接收driver驱动</span>mail <span class="token operator">=</span> Mail<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 登录账户为空</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 密码为空的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用户名或密码错误的情况下登录邮箱</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">"user_error"</span><span class="token punctuation">,</span> <span class="token string">"passwd_error"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 管理员账户登录</span>mail<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动化测试之自动化的测试模型</title>
      <link href="/2019/12/15/automation-testing-model/"/>
      <url>/2019/12/15/automation-testing-model/</url>
      
        <content type="html"><![CDATA[<h1 id="自动化测试之自动化的测试模型"><a href="#自动化测试之自动化的测试模型" class="headerlink" title="自动化测试之自动化的测试模型"></a>自动化测试之自动化的测试模型</h1><h2 id="01-基础概念"><a href="#01-基础概念" class="headerlink" title="01 基础概念"></a>01 基础概念</h2><ul><li><strong>库</strong></li></ul><p>库，<code>Library</code>，库是由代码集合成的一个产品，可借助程序员调用。面向对象的代码组织形式的库，称为类库；向面过程的代码组织形式的库，称为函数库。</p><p>从这个角度看，前面多篇文章中提到的WebDriver就属于库的范畴，因为它提供了一组操作Web页面的类与方法，即可以称它为Web自动化测试库。</p><ul><li><strong>框架</strong></li></ul><p>框架，<code>Framework</code>，框架是为解决一个或一类问题而开发的产品，用户一般只需要使用框架类或函数，即可实现全部功能。从这个解决看，unittest框架主要用于测试用例的组织和执行，以及测试结果的生成。因为它的主要任务就是帮助我们工作，所以通过称之为测试框架。</p><ul><li><strong>工具</strong></li></ul><p>工具，<code>Tools</code>，工具与框架所做的事情类似，只是工具提供了更高层次的封装，屏蔽了底层的代码，提供了单独的操作界面供用户使用。例如，UFT(QTP)、Hatalon就属于自动化测试工具。</p><h2 id="02-自动化测试模型"><a href="#02-自动化测试模型" class="headerlink" title="02 自动化测试模型"></a>02 自动化测试模型</h2><p>根据适用场景不同，自动化测试大致可分为线性测试、模块化与类库、数据驱动测试、关键字驱动测试。下面将依次介绍这些模型以及各自的特点。</p><p><strong>线性测试</strong></p><p>通过录制或编写对应用程序的操作步骤会产生相应的线性脚本，每个线性脚本相对独立，且不产生依赖与调用。这是早期自动化测试的一种形式，即单纯地模拟用户完整的操作场景。前面多篇幅介绍Selenium WedDriver中各种的小技巧例子，就属于线性测试。</p><p><strong>模块化与类库</strong></p><p>线性测试的缺点是不易维护，因此早期的自动化测试工程师们开始思考用新的自动化测试模型来代替线性测试。<br>借鉴编程语言中模块化的思想，反重复的操作单独封装成公共模块。在测试用例执行过程中，当需要用到模块封装时对其进行调用，这样就最大限度地消除了重复，从而提供测试用例的可维护性。</p><p><strong>数据驱动测试</strong></p><p>虽然模块化测试很好地解决了脚本的重复问题，但是，自动化测试脚本在开发过程中还是发现了诸多不便。例如，在测试不同用户登录时，虽然登录的步骤是一样的，但是登录用的数据是不同的。模块化测试并不能解决这类问题。于是，数据驱动测试的概念被提出。</p><blockquote><p>数据驱动：数据的改变驱动自动化测试的执行，最终引起测试结果的改变。</p></blockquote><p>简单理解就是把数据驱动所需要的测试数据参数化，我们可以用多种方式来存储和管理这些参数化的数据。</p><p><strong>关键字驱动测试</strong></p><p>关键字驱动测试又称为表驱动测试或基于动作字测试。这类框架会把自动化操作封装为“关键字”，避免测试人员直接触代码，多以“填表格”的形式降低脚本的编写难度。</p><p>Robot Framework是主流的关键字驱动测试框架之一，通过它自带的Robot Framework RIDE可以直接进行自动化测试用例的编写。</p><p>本文提到了的这些测试类型，并非后者淘汰前者的关系，在实际实施过程中，往往要结合具体情况配合使用。</p><p>注：本文内容源于虫师著的Selenium3自动化测试实战一书。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之滑动解锁操作的处理</title>
      <link href="/2019/12/13/python-selenium-webdriver-slide-to-unlock-operations/"/>
      <url>/2019/12/13/python-selenium-webdriver-slide-to-unlock-operations/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之滑动解锁操作的处理"><a href="#Python-Selenium-小技巧之滑动解锁操作的处理" class="headerlink" title="Python + Selenium 小技巧之滑动解锁操作的处理"></a>Python + Selenium 小技巧之滑动解锁操作的处理</h1><p>滑动解锁是当下比较流行的解锁方式。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191212202832.png" alt=""></p><p>当我们单击滑块地，实际改变的只是CSS样式，HTML代码段如下。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slide-to-unlock-progress<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">255</span>, <span class="token number">233</span>, <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">36</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slide-to-unlock-handle<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">255</span>, <span class="token number">255</span>, <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">38</span>px<span class="token punctuation">;</span> <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">38</span>px<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">37</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p><a href="https://www.helloweba.com/demo/2017/unlock/" target="_blank" rel="noopener">https://www.helloweba.com/demo/2017/unlock/</a></p><ul><li><code>slide-to-unlock-handle</code>表示滑块。在滑动过程中，滑块 的左边距会逐渐变大，因为它在向右移动。</li><li><code>slide-to-unlock-progress</code>表示滑过之后的背景色，背景色的区域会逐渐增加，同样因为滑块在向右移动。</li></ul><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ActionChains<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> UnexpectedAlertPresentExceptionbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.helloweba.com/demo/2017/unlock/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定位滑块</span>slider <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_class_name<span class="token punctuation">(</span><span class="token string">"slide-to-unlock-handle"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>action <span class="token operator">=</span> ActionChains<span class="token punctuation">(</span>browser<span class="token punctuation">)</span>action<span class="token punctuation">.</span>click_and_hold<span class="token punctuation">(</span>slider<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> index <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        action<span class="token punctuation">.</span>move_by_offset<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> UnexpectedAlertPresentException<span class="token punctuation">:</span>        <span class="token keyword">break</span>    action<span class="token punctuation">.</span>reset_actions<span class="token punctuation">(</span><span class="token punctuation">)</span>    sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 等待停顿时间</span><span class="token comment" spellcheck="true"># 打印警告框提示</span>success_text <span class="token operator">=</span> browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>alert<span class="token punctuation">.</span>text<span class="token keyword">print</span><span class="token punctuation">(</span>success_text<span class="token punctuation">)</span></code></pre><p>在这个脚本中，用到下面几个方法。</p><ul><li><code>click_and_hold()</code>  单击并按下鼠标左键。</li><li><code>move_by_offset()</code>  移动鼠标，第一个参数为x坐标距离，第二个参数为y坐标距离。</li><li><code>reset_actions()</code>  重置action。</li></ul><p>执行完成，滑动效果如下所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191213091120.png" alt=""></p><p>接下来，我们来看另一种应用形式，上下滑动选择日期：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191213091611.png" alt=""></p><p>在上一个例子中，我们采用了ActionChains类可以实现滑动操作，这里我们换一种思路，通过TouchActions类实现上下滑动，进行日期的选择。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ActionChains<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> UnexpectedAlertPresentExceptionbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.jq22.com/yanshi4976"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span><span class="token string">"iframe"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"appData"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定位要滑动的年、月、日</span>dwwos <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_class_name<span class="token punctuation">(</span><span class="token string">"dwwo"</span><span class="token punctuation">)</span>year <span class="token operator">=</span> dwwos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>month <span class="token operator">=</span> dwwos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>day <span class="token operator">=</span> dwwos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>action <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>TouchActions<span class="token punctuation">(</span>browser<span class="token punctuation">)</span>action<span class="token punctuation">.</span>scroll_from_element<span class="token punctuation">(</span>year<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>action<span class="token punctuation">.</span>scroll_from_element<span class="token punctuation">(</span>month<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>action<span class="token punctuation">.</span>scroll_from_element<span class="token punctuation">(</span>day<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>这里使用<code>TouchActions</code>类中的<code>scroll_from_element()</code>方法滑动元素，参数如下:</p><ul><li>on_element   滑动的元素。</li><li>xoffset  x坐标距离。</li><li>yoffset  y坐标距离。</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之JavaScript及H5视频的处理</title>
      <link href="/2019/12/12/python-selenium-webdriver-javascript-and-h5-video-operations/"/>
      <url>/2019/12/12/python-selenium-webdriver-javascript-and-h5-video-operations/</url>
      
        <content type="html"><![CDATA[<h2 id="01-JavaScript的调用"><a href="#01-JavaScript的调用" class="headerlink" title="01 JavaScript的调用"></a>01 JavaScript的调用</h2><p>有些页面操作不能依靠WebDriver提供的API来实现，如浏览器滚动条的拖动。这时就需要借助JavaScript脚本。WebDriver提供了<code>execute_script()</code>方法来执行JavaScript代码。</p><p>用于调整浏览器滚动条位置的JavaScript代码如下所示：</p><pre class=" language-JavaScript"><code class="language-JavaScript"><!-- window.scrollTo(左边距， 上边距); -->window.scrollTo(0, 450);</code></pre><p>JavaScript代码中用<code>window.scrollTo()</code>方法用于设置浏览器窗口滚动条的水平位置和垂直位置。第一个参数表示水平的左边距，第二个参数表示垂直的上边距。</p><p>配合webdriver使用的完整代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python selenium"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"su"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 通过JavaScript设置浏览器窗口的滚动条设置</span>js <span class="token operator">=</span> <span class="token string">"window.scrollTo(100, 450);"</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>执行后的效果如下：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191212112243.png" alt=""></p><p>当然，JavaScript的作用不仅仅体现在控制浏览器滚动条的操作上，例如它还可以在页面中textarea文本框中输入内容</p><p>文件框的HTML代码示例如下：</p><pre class=" language-html"><code class="language-html">&lt;textarea id="id" style="width: 98%" cols="50" rows="5" class= "textarea"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span></code></pre><p>这种情况下，虽然可以通过id定位到元素，但是不能通过send_keys()在文本框中输入文本信息。在这种情况下，可以借助JavaScript代码输入文本信息。</p><pre class=" language-python"><code class="language-python">text <span class="token operator">=</span> <span class="token string">"input text"</span>js <span class="token operator">=</span> <span class="token string">"document.getElementById('id').value='"</span> <span class="token operator">+</span> text <span class="token operator">+</span>  <span class="token string">"';"</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span></code></pre><p>这里的思路，首先定义要输入的内容text。然后将text与JavaScript代码通过“<strong>+</strong>”进行拼接，这样做的目的是为了方便自定义输入的内容。最后只需通过<code>execute_script()</code>执行JavaScript代码即可。</p><h2 id="02-HTML5视频的处理"><a href="#02-HTML5视频的处理" class="headerlink" title="02 HTML5视频的处理"></a>02 HTML5视频的处理</h2><p>H5，即HTML5的简称，H5技术最近几年非常火爆，主流的浏览器都支持H5，越来越多的网站及应用都在使用H5，最常见使用HTML5的元素有诸如canvas、video等。</p><p>大多数浏览器使用插件(如Flash)来播放视频，HTML5定义了一个新的元素<code>&lt;video&gt;</code>，指定了一个标准的方式嵌入视频片段。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191212202832.png" alt=""></p><p>WebDriver支持在指定的浏览器上测试HTML5，另外，还可以使用JavaScript测试这些功能，这样就可以在任意浏览器上测试H5了。接下来通过一个例子来了解如何自动化测试<code>&lt;video&gt;</code>，<code>&lt;video&gt;</code>提供了JavaScript接口和多种方法及属性。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://videojs.com/"</span><span class="token punctuation">)</span>video <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"preview-player_html5_api"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 返回播放文件地址</span>url <span class="token operator">=</span> browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">"return arguments[0].currentSrc;"</span><span class="token punctuation">,</span> video<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 播放视频</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Start Video'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">"arguments[0].play()"</span><span class="token punctuation">,</span> video<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 播放15s</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 暂停视频</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Pause video"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">"arguments[0].pause()"</span><span class="token punctuation">,</span> video<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><code>arguments</code>是JavaScript的内置对象，它包含了函数调用的参数数组，<code>[0]</code>表示取对象的第1个值。</p><p><code>cuurentSrcr</code>返回当前音频或视频的URL。如果未设置音视频，则返回空字符串。</p><p><code>load()</code>、<code>play()</code>、<code>pause()</code>这三个方法分别用于音视频的加载、播放和暂停。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之操作Cookies</title>
      <link href="/2019/12/12/python-selenium-webdriver-cookies-operations/"/>
      <url>/2019/12/12/python-selenium-webdriver-cookies-operations/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之操作Cookies"><a href="#Python-Selenium-小技巧之操作Cookies" class="headerlink" title="Python + Selenium 小技巧之操作Cookies"></a>Python + Selenium 小技巧之操作Cookies</h1><p>有时我们需要验证浏览器中的Cookie是否正确，因为基于真实的Cookie是无法通过白盒测试或集成测试的。WebDriver为我们提供了操作Cookie的相关方法，可以读取、添加和删除Cookie。</p><p>WebDriver操作Cookie的方法如下：</p><ul><li><code>get_cookies()</code>  获得所有Cookie</li><li><code>get_cookie(name)</code>  返回字典中key为“name”的Cookie</li><li><code>add_cookie(cookie_dict)</code>  添加Cookie</li><li><code>delete_cookie(name, optionsString)</code>  删除名为optionsString的Cookie</li><li><code>delete_all_cookies()</code>  删除所有的Cookie</li></ul><p>接下来，我们通过<code>get_cookies()</code>获取当前浏览器百度页面的所有Cookie</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取所有的Cookie信息，并打印</span>cookie <span class="token operator">=</span> browser<span class="token punctuation">.</span>get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span></code></pre><p>得到的结果如下：</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'H_PS_PSSID'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '1448_21110_30211_18560_30124_26350'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'expiry'<span class="token operator">:</span> <span class="token number">1607653995.91547</span><span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'BAIDUID'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '3769E6BCDF30C9F3301992018E6CF8F0<span class="token operator">:</span>FG=<span class="token number">1</span>'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'expiry'<span class="token operator">:</span> <span class="token number">3723601642.915432</span><span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'BIDUPSID'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '3769E6BCDF30C9F32CE3C13DA19D3420'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'delPer'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '<span class="token number">0</span>'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'expiry'<span class="token operator">:</span> <span class="token number">3723601642.91546</span><span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'PSTM'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '<span class="token number">1576117996</span>'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> '.baidu.com'<span class="token punctuation">,</span> 'expiry'<span class="token operator">:</span> <span class="token number">1576204396.24507</span><span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'BDORZ'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> 'B490B5EBF6F3CD402E515D22BCDA1598'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> 'www.baidu.com'<span class="token punctuation">,</span> 'expiry'<span class="token operator">:</span> <span class="token number">1576981996</span><span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'BD_UPN'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '<span class="token number">12314753</span>'<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>'domain'<span class="token operator">:</span> 'www.baidu.com'<span class="token punctuation">,</span> 'httpOnly'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'name'<span class="token operator">:</span> 'BD_HOME'<span class="token punctuation">,</span> 'path'<span class="token operator">:</span> '/'<span class="token punctuation">,</span> 'secure'<span class="token operator">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> 'value'<span class="token operator">:</span> '<span class="token number">0</span>'<span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>不难看出，这些Cookie中的数据都是以字典形式存放的。在了解Cookie中数据的存放形式后，即可按照这种形式向浏览器中添加Cookie。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 添加Cookie信息</span>browser<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'key-aaaaaaa'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'value-bbbbbbb'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 遍历指定的Cookies</span><span class="token keyword">for</span> cookie <span class="token keyword">in</span> browser<span class="token punctuation">.</span>get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'{cookie["name"]} -> {cookie["value"]}'</span><span class="token punctuation">)</span></code></pre><p>运行脚本，执行结果如下：</p><pre><code>key-aaaaaaa -&gt; value-bbbbbbbH_PS_PSSID -&gt; 1434_21111_30210BAIDUID -&gt; 916438478DB2357AD10E38EC17689E33:FG=1BIDUPSID -&gt; 916438478DB2357AD8389F72D5814F65delPer -&gt; 0PSTM -&gt; 1576118446BDORZ -&gt; B490B5EBF6F3CD402E515D22BCDA1598BD_UPN -&gt; 12314753BD_HOME -&gt; 0</code></pre><p>从执行结果来看，这里第一条Cookie正是我们通过<code>add_cookie(cookie_dict)</code>方法添加的。通过遍历得到所有的Cookie，从而找到字典中key为“name”“vlaue”的Cookie值。</p><p>当然了，能添加，就能删除，用到的方法是<code>delete_cookie(name, )</code>、<code>delete_all_cookies()</code>。前者通过指定name来删除一个特定的Cookie，后者则是直接删掉所有的Cookie。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之上传下载文件</title>
      <link href="/2019/12/11/python-selenium-webdriver-upload-download-files/"/>
      <url>/2019/12/11/python-selenium-webdriver-upload-download-files/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之上传下载文件"><a href="#Python-Selenium-小技巧之上传下载文件" class="headerlink" title="Python + Selenium 小技巧之上传下载文件"></a>Python + Selenium 小技巧之上传下载文件</h1><h2 id="01-文件的上传"><a href="#01-文件的上传" class="headerlink" title="01 文件的上传"></a>01 文件的上传</h2><p>上传文件的操作，也是很为常用的Web功能之一，但WebDriverAPI并没有为我们提供专门用于上传文件的方法。所以我们要另寻途径来实现它。</p><p>在Web页面中，文件上传操作一般需要单击“上传”按钮，然后在打开的本地Windows窗口中选择本地文件进行上传。因为WebDriver无法操作Windows控件，所以对于首先要解决的是如何识别Windows控件这个问题上。</p><p>在Web页面中，一般通过以下两种方式实现文件上传。</p><ul><li>普通上传，将本地文件路径 作为一个值放在input标签中，通过form表单，将这个值提交给服务器。</li><li>插件上传，一般是指基于Flash、JavaScript或Ajax等技术实现的上传功能。</li></ul><p>对于通过input标签实现的上传功能，可以将其看作一个输入框，即通过<code>send_keys()</code>本地文件路径的方式实现文件上传。</p><pre class=" language-html"><code class="language-html"></code></pre><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverfile_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span><span class="token string">'./files/'</span><span class="token punctuation">)</span>browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>upload_page <span class="token operator">=</span> <span class="token string">'files:///'</span> <span class="token operator">+</span> file_path <span class="token operator">+</span> <span class="token string">'upfile.html'</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>upload_page<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定位上传按钮，添加本地文件</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>file_path <span class="token operator">+</span> <span class="token string">'uploadtest.txt'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ……</span></code></pre><p>通过这种方法来上传文件，可以避免操作Windows控件。</p><p>而对于插件上传，我们可以借助AutoIt来实现。稍后在更新文章时会详细说明。</p><h2 id="02-下载文件"><a href="#02-下载文件" class="headerlink" title="02 下载文件"></a>02 下载文件</h2><p>WebDriver允许我们设置默认的文件下载路径，也就是说，文件会自动且存放到设置的目录中，不同的浏览器设置方式不同。</p><h3 id="2-1-Firefox浏览器中下载文件"><a href="#2-1-Firefox浏览器中下载文件" class="headerlink" title="2.1 Firefox浏览器中下载文件"></a>2.1 Firefox浏览器中下载文件</h3><p>我们先来看看Firefox浏览器中下载文件的实现：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverfp <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>FirefoxProfile<span class="token punctuation">(</span><span class="token punctuation">)</span>fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.folderList"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.dir"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.helperApps.neverAsk.saveToDisk"</span><span class="token punctuation">,</span> <span class="token string">"binary/octet-stream"</span><span class="token punctuation">)</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span>firefox_profile<span class="token operator">=</span>fp<span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://pypi.org/project/selenium/#files"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">"selenium-3.141.0.tar.gz"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><ul><li>browser.download.folderList  用于指定文件下载后的存放目录。设置为0，表示文件会下载到浏览器设置的默认路径；设置为2，表示文件会下载到自定义的路径。</li><li>browser.download.dir  用于设置自定义存放路径。本例中通过<code>os.getcwd()</code>方法获取当前文件的所在位置，即下载文件保存的目录。</li><li>browser.helperApps.neverAsk.saveToDisk  指定要的类型，即<code>Content-type</code>值，”binary/octet-stream”用于表示二进制文件。</li></ul><p>更多关于HTTP Content-type对照表，参见：<a href="http://tool.oschina.net/commons" target="_blank" rel="noopener">http://tool.oschina.net/commons</a></p><p>当然，也可以通过在Firefox浏览器地址栏输入“about:config”进行参数的设置。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191211091208.png" alt=""></p><p>在调用WebDriver的Firefox类时，将所有设置选项作为firefox_profile参数Firefox浏览器。浏览器在会根据这些文件下载到当前脚本目录下。</p><h3 id="2-2-Chrome浏览器中下载文件"><a href="#2-2-Chrome浏览器中下载文件" class="headerlink" title="2.2 Chrome浏览器中下载文件"></a>2.2 Chrome浏览器中下载文件</h3><p>在Chrome浏览器中下载文件的思路也是类似的，可以在打开浏览器之前，预设一些自定义参数。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriveroptions <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>prefs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'profile.default_content_settings.popups'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'dowload.default_directory'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">'prefs'</span><span class="token punctuation">,</span> prefs<span class="token punctuation">)</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>chrome_options<span class="token operator">=</span>options<span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://pypi.org/project/selenium/#files"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">"selenium-3.141.0.tar.gz"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><ul><li>profile.default_content_settings.popups  设置为0，表示禁止下载窗口。</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之弹出框及下拉框的处理</title>
      <link href="/2019/12/10/python-selenium-webdriver-pop-up-and-select-box/"/>
      <url>/2019/12/10/python-selenium-webdriver-pop-up-and-select-box/</url>
      
        <content type="html"><![CDATA[<h2 id="01-弹出框的处理"><a href="#01-弹出框的处理" class="headerlink" title="01 弹出框的处理"></a>01 弹出框的处理</h2><p>在WebDriver中处理JavaScript生成的<code>alert</code>、<code>confirm</code>和<code>prompt</code>十分简单。具体的做法是，首先使<code>switch_to.alert()</code>方法定位，然后使用text、accept、dismiss、send_keys等进行操作。</p><ul><li><code>txt</code>  返回alert、confirm、prompt中的文字信息。</li><li><code>accept()</code>  接受现有警告框。</li><li><code>dismiss()</code>  解散现有警告框。</li><li><code>send_keys()</code>  在警告框中输入文本（如果被允许的话）。</li></ul><p>这里以百度的搜索设置中的弹出框为例，进行演示说明：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 打开百度的搜索设置</span>link <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'设置'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'搜索设置'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 保存设置的信息 </span>browser<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'prefpanelgo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取警告框</span>alert <span class="token operator">=</span> browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>alert<span class="token comment" spellcheck="true"># 获取警告框的提示信息</span>alert_text <span class="token operator">=</span> alert<span class="token punctuation">.</span>text<span class="token keyword">print</span><span class="token punctuation">(</span>alert_text<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 接受警告框</span>alert<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="02-下拉框的处理"><a href="#02-下拉框的处理" class="headerlink" title="02 下拉框的处理"></a>02 下拉框的处理</h2><p>下拉框是Web页面常见功能之一，WebDriver提供了Select类来处理下拉框相关的操作。</p><ul><li><code>Select</code>类  用于定位<code>&lt;select&gt;</code>标签。</li><li><code>select_by_value()</code>  通过value值定位下拉选项。</li><li><code>select_by_visible_text()</code>  通过text值定位下拉选项。</li><li><code>select_by_index()</code>  根据下拉选项的索引进行选择。注意是从<strong>0</strong>开始的。</li></ul><p>这里仍以百度的搜索设置项为例，来演示说明：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>select <span class="token keyword">import</span> Selectbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 打开百度的搜索设置</span>link <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'设置'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'搜索设置'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 搜索结果显示条数 </span>sel <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//select[@id='nr']"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># value = "20"</span>Select<span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">.</span>select_by_value<span class="token punctuation">(</span><span class="token string">'20'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># &lt;option>每页显示50条&lt;/option></span>Select<span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">.</span>select_by_visible_text<span class="token punctuation">(</span><span class="token string">"每页显示50条"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 根据下拉选项的进行选择</span>Select<span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之验证信息及多表单切换</title>
      <link href="/2019/12/09/python-selenium-webdriver-huo-qu-yan-zheng-xin-xi-ji-duo-biao-dan-qie-huan/"/>
      <url>/2019/12/09/python-selenium-webdriver-huo-qu-yan-zheng-xin-xi-ji-duo-biao-dan-qie-huan/</url>
      
        <content type="html"><![CDATA[<h2 id="01-验证信息的获取"><a href="#01-验证信息的获取" class="headerlink" title="01 验证信息的获取"></a>01 验证信息的获取</h2><p>在进行Web自动化测试中，用得最多的验证信息是几种类型：title、curent_url和text。</p><ul><li><code>title</code> 用于获取当前页面的标题。</li><li><code>current_url</code> 用于获取当前页面的URL。</li><li><code>text</code> 用于获取当前页面的文本信息。</li></ul><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Before Search ==================='</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 打印当前页面title</span>title <span class="token operator">=</span> browser<span class="token punctuation">.</span>title<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'title: {title}'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 打印当前页面的URL</span>now_url <span class="token operator">=</span> browser<span class="token punctuation">.</span>current_url<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'URL: {now_url}'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python selenium"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"su"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'After Search ==================='</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 再次打印当前页面title</span>title <span class="token operator">=</span> browser<span class="token punctuation">.</span>title<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'title: {title}'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 再次打印当前页面的URL</span>now_url <span class="token operator">=</span> browser<span class="token punctuation">.</span>current_url<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'URL: {now_url}'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取搜索结果条数</span>num <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'nums'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Search result: {num}'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>执行结果如下：</p><pre><code>Before Search ===================title: 百度一下，你就知道URL: https://www.baidu.com/After Search ===================title: python selenium_百度搜索URL: https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=python%20selenium&amp;rsv_pq=bcc765ea0018f61a&amp;rsv_t=df41%2BQdaDrx2EI%2Fp7ccwMKMOaZVTwk7MEoCYVuDeKS90g5HucTlClQYVh%2Bk&amp;rqlang=cn&amp;rsv_enter=0&amp;rsv_dl=tb&amp;rsv_sug3=15&amp;rsv_sug1=1&amp;rsv_sug7=100&amp;inputT=227&amp;rsv_sug4=227Search result: 搜索工具百度为您找到相关结果约7,230,000个</code></pre><p>上述这些信息，看似无任何作用，但是两次搜索结果的差异，可以作为自动化的断言来使用。</p><h2 id="02-多表单切换"><a href="#02-多表单切换" class="headerlink" title="02 多表单切换"></a>02 多表单切换</h2><p>在Web应用中经常会遇到frame/iframe表单嵌套页面的应用，WebDriver只能在一个页面上对元素进行识别和定位，无法直接定位frame/iframe表单内嵌页面上的元素，这时就需要通过<code>switch_to_frame()</code>方法将当前定位的主体切换为frame/iframe表单的内嵌页面。</p><p>这里以网易邮箱登录为例，登录框的结构如下所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191209200445.png" alt=""></p><p>我们现在通过<code>switch_to_frame()</code>方法来切换表单。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.126.com/'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>login_frame <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'iframe[id^="x-URS-iframe"]'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span>login_frame<span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"dologin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>switch_to_default_content<span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><code>switch_to_frame()</code>默认可以直接对表单的id属性或name属性传参，因而可以的对象。在这个例子中，表单的id属性后半部分的数字(1575892449002.7014)是随机变化的，在CSS定位方法中，可以通过<code>^=</code>匹配id属性为以<code>x-URS-iframe</code>开头的元素。最后，通过<code>switch_to_default_content()</code>回到最外层的页面。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium WebDriver API之键鼠操作</title>
      <link href="/2019/12/06/python-selenium-webdriver-mouse-keyboard-operations/"/>
      <url>/2019/12/06/python-selenium-webdriver-mouse-keyboard-operations/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-WebDriver-API之键鼠操作"><a href="#Python-Selenium-WebDriver-API之键鼠操作" class="headerlink" title="Python + Selenium WebDriver API之键鼠操作"></a>Python + Selenium WebDriver API之键鼠操作</h1><h2 id="01-鼠标操作"><a href="#01-鼠标操作" class="headerlink" title="01 鼠标操作"></a>01 鼠标操作</h2><p>在浏览器操作中，绝大部分时间都是借助鼠标来完成的，在Selenium WebDriver中，与鼠标操作相关的方法，都是在<code>ActionChains</code>类中封装的。</p><p><code>ActionChains</code>类为我们提供的鼠标操作，常用的方法有：</p><ul><li><code>perform()</code> 执行 ActionChains 类中存储的所有行为</li><li><code>context_click()</code> 右击</li><li><code>double_click()</code> 双击</li><li><code>drag_and_drop()</code> 拖动</li><li><code>move_to_element()</code> 鼠标悬停</li></ul><p>鼠标悬停的实例：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ActionChainsbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定位到要悬停的元素</span>above <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"设置"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 对定位到的元素执行鼠标悬停操作</span>ActionChains<span class="token punctuation">(</span>browser<span class="token punctuation">)</span><span class="token punctuation">.</span>move_to_element<span class="token punctuation">(</span>above<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span> </code></pre><p>在这里首先要导入 ActionChains 类，接下来调用 ActionChains 类，再把浏览器驱动 browser 作为参数传入，然后使用 move_to_element() 方法模拟鼠标移动到指定元素上，最后使用 perform() 方法提交所有 ActionChains 类中存储的行为。</p><h2 id="02-键盘操作"><a href="#02-键盘操作" class="headerlink" title="02 键盘操作"></a>02 键盘操作</h2><p>使用浏览器过程中，还是会用到键盘来进行一些操作的，比如在输入框中填入一些内容。</p><p>在此前，我们已经在使用的<code>send_keys()</code>方法就是用来模拟键盘输入的，我们只是用来输入一些文本内容。</p><p>当然我们还可以用它来输入键盘中的按键，如回车键、退格键、F5之类的功能键，甚至组合起来使用的快捷键。</p><p>这里需要注意的是，若打算模拟键盘中各种按键及组合键的用法，需要导入<code>Keys</code>类。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys</code></pre><p>实例：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keysbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python seleniumm"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>BACK_SPACE<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>SPACE<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"教程"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"su"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>接口测试学习笔记之02 REST &amp; RESTfull API</title>
      <link href="/2019/12/05/python-interface-testing-rest-restfullapi/"/>
      <url>/2019/12/05/python-interface-testing-rest-restfullapi/</url>
      
        <content type="html"><![CDATA[<h1 id="接口测试学习笔记之02-REST-amp-RESTfull-API"><a href="#接口测试学习笔记之02-REST-amp-RESTfull-API" class="headerlink" title="接口测试学习笔记之02 REST &amp; RESTfull API"></a>接口测试学习笔记之02 REST &amp; RESTfull API</h1><p><strong>REST</strong>, <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer，直译为表现层状态转化，又称具象状态传输</p><blockquote><p><strong>REST</strong> 是Roy Thomas Fielding博士于2000年在他的博士论文中提出来的一种万维网软件架构风格，目的是便于不同软件/程序在网络（例如互联网）中互相传递信息。表现层状态转换是根基于超文本传输协议(HTTP)之上而确定的一组约束和属性，是一种设计提供万维网络服务的软件构建风格。符合或兼容于这种架构风格（简称为<code>REST</code>或<code>RESTful</code>）的网络服务，允许客户端发出以统一资源标识符访问和操作网络资源的请求，而与预先定义好的无状态操作集一致化。因此表现层状态转换提供了在互联网络的计算系统之间，彼此资源可交互使用的协作性质(interoperability)。相对于其它种类的网络服务，例如 SOAP服务则是以本身所定义的操作集，来访问网络上的资源。</p></blockquote><p>要理解什么是<code>REST</code>，我们需要理解下面几个概念：</p><p>REST – <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer，之所以晦涩难懂，是因为前面的主语被省掉了，全称应是 Resource Representational State Transfer，即：资源在网络中以某种表现形式进行状态转移。</p><ul><li><strong>Resources</strong>, 资源<br>什么是资源呢？资源，即数据，就是我们平常上网访问的一张图片、一个文档、一个视频等。这些资源我们通过URI来定位，也就是一个URI（Uniform Resource Identifier，统一资源标志符）表示一个资源。</li><li><strong>Representation</strong>, 表现层<br>资源是一个具体的实体信息，可以有多种的展现方式。而把实体展现出来就是表现层，例如一个txt文本信息，他可以输出成html、json、xml等格式，一个图片也可以jpg、png等方式展现，这个就是表现层的意思。URI确定一个资源，但是如何确定它的具体表现形式呢？应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对”表现层”的描述。</li><li><strong>State Transfer</strong>, 状态转化<br>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，肯定涉及到数据和状态的变化。<br>而HTTP协议是无状态的，那么这些状态肯定保存在服务器端，所以如果客户端想要通知服务器端改变数据和状态的变化，肯定要通过某种方式来通知它。客户端能通知服务器端的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：<code>GET</code>、<code>POST</code>、<code>PUT</code>、<code>DELETE</code>。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源，如下图所示。</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191202084443.png" alt=""></p><p>综合上述概念，我们可以得出：</p><ol><li>需要注意的是，<code>REST</code>是<strong>设计风格</strong>而<strong>不是标准</strong>。<code>REST</code>通常基于使用HTTP，URI，和XML以及HTML这些现有的广泛流行的协议和标准。</li><li><code>REST</code>描述的是在网络中client和server的一种交互形式；</li><li>一句话来说，<code>REST</code>是<strong>URL定位资源，用HTTP动词（GET, POST, DELETE, PUT）描述操作</strong></li><li><code>REST</code>本身不实用，实用的是如何设计<code>RESTful API</code>（符合<code>REST</code>设计风格的网络接口）；</li><li>在由Server提供的<code>RESTful API</code>中，URL中资源的指定通常只使用名词，原则上不使用动词。</li></ol><p>在了解了<code>REST</code>相关概念之后，考虑一下为什么要用<code>RESTful</code>结构呢？</p><p>大家都知道”古代”网页是前端后端融在一起的，比如之前的PHP，JSP等。在之前的桌面时代问题不大，但是近年来移动互联网的发展，各种类型的Client层出不穷，RESTful可以通过一套统一的接口为 Web，iOS和Android提供服务。另外对于广大平台来说，比如Facebook platform，微博开放平台，微信公共平台等，它们不需要有显式的前端，只需要一套提供服务的接口，于是RESTful更是它们最好的选择。在RESTful架构下：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191205092400.png" alt=""></p><p>此外需要注意的是，<code>REST</code>架构风格有六条重要的约束：</p><ul><li>客户端-服务器（Client-Server）<br>通信只能由客户端单方面发起，表现为请求-响应的形式。</li><li>无状态（Stateless）<br>通信的会话状态（Session State）应该全部由客户端负责维护。</li><li>缓存（Cache）<br>响应内容可以在通信链的某处被缓存，以改善网络效率。</li><li>统一接口（Uniform Interface）<br>通信链的组件之间通过统一的接口相互通信，以提高交互的可见性。</li><li>分层系统（Layered System）<br>通过限制组件的行为（即每个组件只能“看到”与其交互的紧邻层），将架构分解为若干等级的层。</li><li>按需代码（Code-On-Demand，可选）<br>支持通过下载并执行一些代码（例如Java Applet、Flash或JavaScript），对客户端的功能进行扩展。</li></ul><p>相关参考链接：</p><p><a href="https://restfulapi.net/" target="_blank" rel="noopener">https://restfulapi.net/</a></p><p><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Representational_state_transfer</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> HTTP接口测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> 接口测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium WebDriver API之页面操作常用方法</title>
      <link href="/2019/12/04/python-selenium-webdriverapi-common-menthods/"/>
      <url>/2019/12/04/python-selenium-webdriverapi-common-menthods/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-WebDriver-API之页面操作常用方法"><a href="#Python-Selenium-WebDriver-API之页面操作常用方法" class="headerlink" title="Python + Selenium WebDriver API之页面操作常用方法"></a>Python + Selenium WebDriver API之页面操作常用方法</h1><p>在浏览器操作中，我们不是定位出元素之后就结束了，通常还需要执行一些后续操作，如输入文字 、单击打开新页面等等，在WebDriverAPI也为我们提供了执行这些操作对应的方法。下面就来看看WebDriver中一些常用的方法。</p><ul><li><code>click()</code> 单击元素。</li><li><code>send_keys(vlaue)</code> 模拟按键输入。</li><li><code>clear()</code> 清除文本。</li><li><code>submit()</code> 提交表单。</li><li><code>size</code> 返回元素的尺寸。</li><li><code>text</code> 获取元素的文本。</li><li><code>get_attribute(name)</code> 获得属性值。</li><li><code>is_displayed()</code> 设置该元素是否用户可见。</li></ul><p>接下来，我们逐一举例说明：</p><p>— 1 —</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 模拟按键输入</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"su"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 单击元素</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 清除文本</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"Golang"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 模拟按键输入</span>browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"su"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#单击元素</span></code></pre><p>— 2 —<br>有些输入框没提供OK之类的提交按钮，但仍需要对输入的内容进行提交，这时就得使用submit()方法了，相当于使用了键盘上的回车键。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>baidu <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span>baidu<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">)</span>baidu<span class="token punctuation">.</span>submit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 相当于直接按回车，来对输入的内容进行提交</span></code></pre><p>— 3 —</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>size <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'baidu InputSearch Size is {size}'</span><span class="token punctuation">)</span>text <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"cp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'baidu ICP Info is {text}'</span><span class="token punctuation">)</span>attribute <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>attribute<span class="token punctuation">)</span>result <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_displayed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre><p>说明一下，is_displayed() 方法用于设置该元素是否用户可见。若可见，则返回True，否则返回False。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人在职场漂，如何不自保</title>
      <link href="/2019/12/03/insights-on-the-recent-layoffs/"/>
      <url>/2019/12/03/insights-on-the-recent-layoffs/</url>
      
        <content type="html"><![CDATA[<h1 id="人在职场漂，如何不自保"><a href="#人在职场漂，如何不自保" class="headerlink" title="人在职场漂，如何不自保"></a>人在职场漂，如何不自保</h1><p>最近暴力裁员事件以及华为二五幺事件搞得沸沸扬扬，这里我们不讨论谁是谁非，单纯的探讨下，在面临裁员时，我们从这些事件中能学到些什么呢？</p><p><strong>声明：文章以下内容来自网络，这里借鉴来仅是供个人学习使用，版权归原作者所有。</strong></p><p><strong>事件回顾</strong></p><p>网易暴力裁员：<br>《<a href="https://mp.weixin.qq.com/s/FW7uR5t6UMMxgkCcAvk-MA" target="_blank" rel="noopener">网易裁员，让保安把身患绝症的我赶出公司。我在网易亲身经历的噩梦！</a>》<br>《<a href="https://mp.weixin.qq.com/s/f9GKQ6vfiiisHH6GAh7WEw" target="_blank" rel="noopener">刚刚，网易道歉了</a>》</p><p>华为二五幺事件：<br>《<a href="https://mp.weixin.qq.com/s/nCAdmryG3Z-_2o3IjN71ag" target="_blank" rel="noopener">一文读懂李洪元被捕251天：先后涉及三项罪名 录音成关键证据</a>》</p><p>到底谁对谁错，孰是孰非？我们作为观众实在是知之甚少，所以不敢妄下定论。<br>但是，作为一名合格的吃瓜群众，我们还是应该从这件事中有所获得，才算没有白白花时间“追剧”。<br>从这部剧中，我们应该学到的也许不是公关技巧，而是被很多人忽略的《劳动合同法》的基本知识。<br>企业生生死死，员工来来去去，很多员工，以及创业公司自己，都严重缺乏劳动法律法规的知识，尤其在离职问题上。<br>那么，在这个问题上，劳资双方（听上去是不是很不习惯？就是指员工，和公司）到底存在哪些边界呢？</p><h2 id="劳动合同-期限"><a href="#劳动合同-期限" class="headerlink" title="劳动合同 期限"></a>劳动合同 期限</h2><p>站在员工角度看，劳动合同的期限，到底是签长一些好，比如5年，10年，还是签短一些好，比如3年，或者是1年？反过来，站在公司角度看呢？  </p><p>总得来说，从员工的角度看，劳动合同的期限，签得越长越好。5年，10年，甚至终身，也就是“无固定期限劳动合同”，因为不管在多长期限的劳动合同里，员工想要离开一家公司的代价，都是一样的，那就是：提前30天提出书面离职申请。</p><p>在影视剧里，员工战战巍巍地提出离职申请，老板把申请撕得粉碎，然后说我不批准，然后员工乖乖回去干活，这种场景，在现实中是不存在的。员工只要提前30天提出书面离职申请，不需要公司批准就可以离职，公司还必须结清所有工资、奖金、报销款等费用。当然，一般来说，员工会考虑到大局，不会在重大项目期间提出辞职，也会因为临时找不到人，会同意晚些走。但是，总得来说，如果双方对于离职时间没有特别的约定，员工想离职，在任何时候都是主动的。</p><p>所以，既然合同期不论长短，我都一样主动，那么如果有的选择，我当然签越长越好的劳动合同。</p><h2 id="试用期"><a href="#试用期" class="headerlink" title="试用期"></a>试用期</h2><p>那么对于公司呢？签更长期的合同，虽然能传递给员工“我想和你走得更长更远”的信号。<br>但是从法律上，并不能换来员工同样的承诺，反而，签的时间越长，越会给自己带来万一面试时判断失误，很难辞退员工的困境。<br>面试再谨慎、再严格，对员工是否适合这份工作的判断，都有可能是误判的。那怎么办呢？<br>对公司来说，有二次验证自己判断的工具，就是试用期。<br>首先，在试用期内，如果员工不符合公司录用条件，公司是可以无偿辞退员工的。<br>2008年开始实施的新《劳动合同法》，对于试用期长短，有非常明确的规定：<br>如果企业跟员工签订的劳动合同不满1年，试用期不能超过1个月；合同期不满3年，试用期不能超过2个月；合同期超过3年，试用期不能超过6个月。<br>越长期的劳动合同，公司面试误判的风险越大，所以理应有更长的试用期，来验证判断。<br>而如果公司就不想承诺和员工长期走下去，比如只签不到1年的合同，那么试用期就只有1个月。</p><h2 id="劳动合同-到期"><a href="#劳动合同-到期" class="headerlink" title="劳动合同 到期"></a>劳动合同 到期</h2><p>那么，不管是签了1年，还是3年的劳动合同，是不是合同到期后，双方就自动解除合同了呢？只要公司不主动提出续签，员工就只有回家重新找工作了呢？<br>并不是。这是很多人对劳动合同的一个大误解。<br>其实，《劳动合同法》有明确规定，即使合同到期，如果公司决定不再和你续签了，也需要支付“N”个月工资的补偿金给你。<br>首先，我们来理解一下“N”的含义。“N”是你在公司的工作年限。<br>比如，你在公司工作了3年，合约到期，公司不想和你续签了。公司要赔偿你3个月的工资。<br>你续签了一个3年合同，一共工作了6年，这时候公司不再和你续签了，公司要赔偿你6个月的工资。<br>但是要记住：你的月均工资再高，计算时不能超过当地平均月工资的3倍。<br>也就是说，其实，在合同期内公司想解雇你，还是公司想以合同到期为由，不再和你续签，都是要赔偿的。</p><h2 id="无固定期限劳动合同"><a href="#无固定期限劳动合同" class="headerlink" title="无固定期限劳动合同"></a>无固定期限劳动合同</h2><p>啊？合同到期也要赔偿？<br>这时，公司可能会想，那还要“合同期限”做什么呢？那我签1年，签3年，签5年，签10年，甚至签无固定期限劳动合同，还有什么差别啊？<br>这里提到了一个概念，叫做“<strong><em>无固定期限劳动合同</em></strong>”。<br>这是什么意思呢？<br>无固定期限的劳动合同，就是我们签劳动合同的时候不签年份，大家一直这么工作下去。<br>签署无固定期限劳动合同，可以传递给员工一个信号，就是公司打算和你一直走下去，以换取员工的善意。<br>比如，我1999年加入微软时，我们的合同就是无固定期限劳动合同。<br>那么，合同期内辞退要赔偿，合同到期不续签也要赔偿，那我要不要也学微软，和员工签无固定期限劳动合同，反正都一样，至少表达一个善意呢？<br>其实，合同期内辞退，和合同到期不续签，还是有巨大的差别的。<br>合同到期不续签，你只要赔钱，就能和员工结束劳动关系；而在合同期内你想辞退员工，那可不是你想赔钱，就能辞退的。<br>按照2008年的新《劳动合同法》，在合同期限内，企业合法辞退员工的理由只有两个：<br>第一，员工犯了错误。比如违法，打架，违反公司制度，或者窃取公司商业机密。这种情况可以无偿辞退。<br>第二，员工不合格，不能胜任这份工作。这种情况可以有偿辞退。<br>也就是说，和合同期内，不是你把钱往桌上一拍，说“给我滚”，就能辞退员工的。<br>你还要证明员工犯了错误，或者员工不合格。<br>在实际操作中，证明员工不合格是非常困难的。<br>首先要有明确的证据，然后还要安排培训或者换岗，培训换岗后仍不合格，才能辞退，而且你依然要支付补偿金。<br>如果员工不承认不合格，不接受补偿金，申请劳动仲裁，在绝大多数的仲裁案例中，监管部门都会判定员工获胜。<br>现实中有很多这样的案例，即使企业愿意赔足了钱请员工离开，但是只要员工坚持自己是合格的，监管部门也常常会裁定，恢复劳动关系，让劳动者回原岗位工作，双方就这样一直耗着。<br>这就尴尬了，你要是遇到一两个很小心不犯原则错误的，但是水平很差的员工，他可能会为了一口气一直和你耗着，每天来上班，提醒你什么是面试不谨慎的代价。<br>估计很多创业者看到这里已经吓死了，那我还是1年1年签吧，至少合同到期时，只要赔钱就能请走。<br>那你就想简单了。<br>《劳动法》要求，如果劳资双方是第3次签署劳动合同，也就是续签的第2次，必须是无固定期限劳动合同；如果员工在本企业工作10年以上，也自动转为无固定期限劳动合同。<br>比如第1次签1年，第2次续签1年，第3次（也就是第3年）必须签无固定期限；第1次签3年，第2次签3年，第3次（也就是第7年）必须签无固定期限。<br>我第1次签15年呢？那第2次就要签无固定期限，因为第2次签劳动合同时，满足了“工作满10年”这个条件。</p><h2 id="八仙过海，各显神通的HR"><a href="#八仙过海，各显神通的HR" class="headerlink" title="八仙过海，各显神通的HR"></a>八仙过海，各显神通的HR</h2><p>讲到这里，你可能才真的明白了很多公司和员工狗血剧情背后的逻辑。<br>我们说公司生生死死，员工来来去去。如果员工一旦请进来，就可能给钱也解雇不了，那还怎么发展公司啊？<br>于是，很多公司绞尽脑汁，各显其能，利用自己相对于员工的专业知识，让自己想辞退员工时，保持至少能说裁就裁的主动权。<br>公司为了获得“<strong><em>解雇主动权</em></strong>”，最常用的做法是：说服员工主动离职。<br>说服员工主动离职的方式有很多，比如HR会讲，如果是公司辞退你，以后怎么找工作呀？我在你的离职证明上怎么写呀？这会影响你未来的职业生涯的。<br>你确实不符合公司的要求，如果你主动离职的，公司还可以给你写推荐信。<br>但是，如果你坚持不离职，同行业的HR就会知道你很难搞，再也没人敢用你了。<br>这一招几乎屡试不爽，在绝大多数在乎职业发展，觉得耗下去得不偿失的人身上都管用。一旦你妥协主动离职，企业是不用支付赔偿金的。<br>但是，如果有人不同意呢？<br>如果员工坚持不辞职，“证明员工不合格”这条路又是基本走不通的，那么有些企业就会故意使用一些招术，让员工处于违规的边缘。<br>这时，有少数公司的HR，就体现出他们“恶”的一面了。<br>有些公司的HR，故意在公司的员工守则里，设计了一些员工明显会违规的规定。<br>比如，咨询公司、互联网公司等行业加班严重，但是公司的员工守则里明确规定，早上9点上班。迟到3次算旷工，旷工2次算是严重违纪，公司有权解雇你。<br>在实际执行时，这些公司并不真的会计较迟到这件事，员工也以为这一条只是写写的，没人会真的在意，毕竟自己常常加班到晚上十一、二点，早上晚到是可以理解的。<br>但是，一旦到了公司要辞退你的时候，这一条，就可以被作为铁证拿出来，证明你严重违纪，公司可以毫无补偿地辞退你。<br>这样的做法，已经非常恶劣了。<br>为了让决定辞退的员工，能尽快在离职协议上签字，HR还常常采取“压力策略”。<br>当公司决定辞退员工时，公司HR会和员工直属经理一起，找员工谈话。<br>直属经理会拿出他认为员工不合格的证据，HR会拿出他严重违纪的证据，给员工巨大的压力，要求他立刻在主动辞职文件上签字，然后在保安的陪同下，立刻收拾个人物品，离开公司。<br>在很多公司看来，这是虽然无情，但最干净利落的辞退员工的方法。<br>如果员工不答应，HR会警告员工，离开这个会议室，公司将以严重违纪为由，公开辞退他，并公开告知大家。<br>如果现在签字，公司可以给你30天工资，让你继续找工作时，还有一份收入。<br>在这样巨大的压力下，很多员工都会主动辞职。</p><h2 id="最后的话"><a href="#最后的话" class="headerlink" title="最后的话"></a>最后的话</h2><p>好了，今天我们就讲到这里。<br>公司在高速发展时，总是你好我好，但是一旦遇到问题，几乎必然会有矛盾出现。<br>我们今天不来判断这个具体事件中，谁对谁错。我只想借这个机会，帮助所有人都能更深刻地理解《劳动合同法》，理解真的遇到问题时，彼此的权力和边界到底在哪里。<br>但是在最后，我还是要祝愿，所有的公司和员工都不要走到那一步。<br>只有共同成长，共同获益，才是最好的结果。</p><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="关于女职工“三期保护”"><a href="#关于女职工“三期保护”" class="headerlink" title="关于女职工“三期保护”"></a>关于女职工“三期保护”</h3><p>“三期”员工是裁员中比较复杂的问题。《女职工劳动保护规定》第四条规定，不得在女职工怀孕期、产期、哺乳期降低其基本工资，或者解除劳动合同。</p><p>《劳动合同法》第四十二条规定：“劳动者有下列情形之一的，用人单位不得依照本法第四十条、第四十一条的规定解除劳动合同：……（四）女职工在孕期、 产期、哺乳期的……”。</p><p>这是为了维护女职工的合法权益，对女职工特殊时期劳动保护所作出的普遍性规定。但如果女职工在“三期”内有严重违纪行为，用人单位可以解除劳动合同。</p><h3 id="关于签订无固定期限劳动合同"><a href="#关于签订无固定期限劳动合同" class="headerlink" title="关于签订无固定期限劳动合同"></a>关于签订无固定期限劳动合同</h3><p>《劳动合同法》规定，用人单位与劳动者协商一致，可以订立无固定期限劳动合同。其中就包括劳动者在用人单位持续工作满十年，劳动者提出或者同意续订、订立劳动合同的，除劳动者提出订立固定期限劳动合同外，应当订立无固定期限劳动合同。</p><p>据报道，华为内部有一项“奋斗者协议”，即工作满8年的员工被要求离职一次，会给个人N+1的补偿，然后再重新入职，并更换工号。</p><p>对此，有律师对深网表示，劳动合同法规定的是，连续两次劳动合同，或在公司工作年限满十年，应当签署无固定期限劳动合同，因此对于这个奋斗者协议，劳动者有权利要求将后来签订的有固定期限劳动合同关系视为无固定期限劳动合同。</p><h3 id="关于员工撤回离职申请"><a href="#关于员工撤回离职申请" class="headerlink" title="关于员工撤回离职申请"></a>关于员工撤回离职申请</h3><p>员工在发出辞职申请后，能否撤回呢？</p><p>上述律师对深网解释，如果员工提出离职，在没有办完离职手续或达成离职协议之前，是可以撤回的。</p><p>但撤回的效力，可能分为多种情况：</p><ol><li>公司可以不同意撤回，这样公司有权利基于员工单方面辞职申请终止劳动关系；</li><li>公司同意撤回，劳动关系继续；</li><li>公司没说同意不同意，但继续给员工发工资上社保的，应当视为同意撤回。</li></ol><h3 id="关于绩效评定“背锅走人”和留存证据"><a href="#关于绩效评定“背锅走人”和留存证据" class="headerlink" title="关于绩效评定“背锅走人”和留存证据"></a>关于绩效评定“背锅走人”和留存证据</h3><p>互联网公司一般都会有一定比例的末位淘汰制度，重要参考指标是绩效评定，同时也会影响到年终奖发放。</p><p>当员工收到并不符合事实的绩效评定时，可以发起申诉流程，并尽量留存和公司内部人员沟通的记录（包括录音、文字和考勤记录、内网信息等），避免因绩效“背锅”被裁员。</p><p>据燃财经报道中HR的自述提到，某个业绩指标或考勤，平时可以模棱两可、无关紧要，一旦要确定裁员，某些指标就会变得重要，HR可以在绩效上做文章。</p><p>关于留存证据，最近极昼工作室曝光的一则案例是，华为员工李洪元有13年工龄，离职时与企业协商解雇赔偿金33万余元，企业在转账30万余元后控告李洪元敲诈勒索。最终在羁押251天之后，深圳龙岗检察院以证据不足为由决定不起诉，并对李洪元进行国家赔偿。</p><p>极昼工作室报道称，李洪元的代理律师、广东意本律师事务所律师谢连喜谢认为，李洪元的行为尚不构成敲诈勒索罪。按照法律规定，敲诈勒索罪的界定包括两个要件，行为人要以非法占有为目的，并且要使用威胁或者要挟的手段，逼迫他人交付财物。据李洪元讲述，不起诉的直接证据是一段两个多小时的录音。他与华为人力资源部门协商离职赔偿，其中未谈及任何以“举报业务造假”来要挟获取赔偿。</p><h3 id="关于裁员补偿"><a href="#关于裁员补偿" class="headerlink" title="关于裁员补偿"></a>关于裁员补偿</h3><p>关于裁员补偿，我们经常听到的是“N+1”。</p><p>根据《劳动合同法》，其中N是指经济补偿金支付方法，即用人单位经济性裁员，选本地区工作年限、每年支付一个月工资（计算方式是最后12个月的平均工资），满六个月不满一年按一年支付；不满六个月的，按半年支付。</p><p>+1则是指，用人单位没有提前30天书面通知时，额外支付一个月工资代替通知义务，为接触劳动关系时上个月的应发工资。</p><p>另外，当用人单位与劳动者解除劳动关系，没有任何合法理由，也没有支付经济补偿或没有履行合法程序，应支付赔偿金2N。</p><p>比如，滴滴曾在今年2月宣布按照全员15%的比例进行裁员，规模达2000人，并给出了N+1补偿方案，这是符合法律规定的。还有一些公司以不同方式逼迫员工主动离职，通过躲避赔偿来降低裁员成本。</p><p>有HR人士提到，在其经历过的裁员中，有员工能力问题，也有公司业务问题导致融资不到位的情况。但员工能力问题的比较少，占比10%。在其经历过的所有裁员中，70%能拿到N+1的补偿，没有按照法律规定走裁员流程的比例有30%。</p><h3 id="关于经济性裁员中对特殊人群的保护"><a href="#关于经济性裁员中对特殊人群的保护" class="headerlink" title="关于经济性裁员中对特殊人群的保护"></a>关于经济性裁员中对特殊人群的保护</h3><p>对于经济性可以裁减的人员，法律虽然已做出明确规定，但是出于对特殊人群的保护，根据《劳动合同法》规定，以下人员是不得裁减的：</p><ol><li>从事接触职业病危害作业的劳动者未进行离岗前职业健康检查，或者疑似职业病病人在诊断或者医学观察期间的;</li><li>在本单位患职业病或者因工负伤并被确认丧失或者部分丧失劳动能力的;</li><li>患病或者非因工负伤，在规定的医疗期内的;</li><li>女职工在孕期、产期、哺乳期的;</li><li>在本单位连续工作满十五年，且距法定退休年龄不足五年的;</li><li>法律、行政法规规定的其他情形。</li></ol><h3 id="关于员工患病后的医疗期"><a href="#关于员工患病后的医疗期" class="headerlink" title="关于员工患病后的医疗期"></a>关于员工患病后的医疗期</h3><p>我们再结合具体案例谈一下上述条文中关于员工患病后医疗期的部分。</p><p>吴声威律师在关于网易前员工事件的解读中指出，生病区分工作原因导致的疾病和非工作原因导致疾病，如果是因工致残和职业病，公司是肯定不得开除员工的；如果是因工患病未残和非工作原因导致疾病，公司开除员工是有条件的。</p><p>员工生病期间，公司在医疗期内通常是不得开除员工的。超过医疗期后，员工不能胜任工作且无法从事另行安排的工作的情况下，公司依据《劳动合同法》第四十条的规定，可以提前一个月通知劳动者解除劳动合同，支付N的经济补偿金，这或许就是该员工在文章中提到的，网易公司回复的N+1的由来。</p><p>至于医疗期的限定，根据《企业职工患病或非因工负伤医疗期规定》，总工作年限10年以下，在本单位工作年限5年以上，医疗期为六个月。也就是说，网易前员工应当有六个月的医疗期，在这六个月的合理治疗期间内，公司是不得开除员工的。</p><p>另一个相关案例是在《<a href="https://mp.weixin.qq.com/s/JkEMK09eO0iLYHYVyJ7zOg" target="_blank" rel="noopener">27岁的我，在病房里被名创优品辞退</a>》一文中提到，一位专攻劳动争议的律师认为，根据《关于贯彻通知》，职工所患疾病病情严重，随时可能出现生命危险，应属特殊疾病，其不受实际工作年限的限制，因此职工应当享受的医疗期系24个月而非3个月，名创优品解除劳动合同关系的行为是违法行为。其次，即使在名创优品所说的医疗期系3个月已届满的情况下，名创优品也存在程序不合法，其无法证明职工属于不能从事原工作也不能从事由用人单位另行安排的工作的情形，亦属于违法解除。</p><p>当然，我们都不希望遇到此类纠纷，但当变化来临时，作为弱势方的劳动者需要谨慎对待任何一份文件的签署和作出的决定，留心收集相关证据，必要时通过法律武器捍卫自己的正当权益。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 碎碎念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 碎碎念 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium WebDriver API之浏览器相关操作</title>
      <link href="/2019/12/03/python-selenium-browsers-control/"/>
      <url>/2019/12/03/python-selenium-browsers-control/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-WebDriver-API之浏览器相关操作"><a href="#Python-Selenium-WebDriver-API之浏览器相关操作" class="headerlink" title="Python + Selenium WebDriver API之浏览器相关操作"></a>Python + Selenium WebDriver API之浏览器相关操作</h1><h2 id="01-浏览器窗口大小的控制"><a href="#01-浏览器窗口大小的控制" class="headerlink" title="01 浏览器窗口大小的控制"></a>01 浏览器窗口大小的控制</h2><p>关于浏览器的窗口的调整，无非两种，指定的窗口大小和浏览器的最大化状态。使用到的方法分别是<code>set_window_size(x, y)</code>、<code>maximize_window()</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 设置浏览器为最大化状态</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 设置浏览器窗口为指定宽高像素值</span></code></pre><h2 id="02-控制浏览器前进、后退"><a href="#02-控制浏览器前进、后退" class="headerlink" title="02 控制浏览器前进、后退"></a>02 控制浏览器前进、后退</h2><p>浏览器一般都会给我们提供后退、前进按钮，以方便查看之前的页面，或在回退后再退到当前浏览的页面。</p><p>浏览器页面的后退，用到的方法是<code>back()</code>，前进用的方法是<code>forward()</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>first_page <span class="token operator">=</span> <span class="token string">'https://www.126.com/'</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'now access {first_page}'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>first_page<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>second_page <span class="token operator">=</span> <span class="token string">'https://www.12306.cn/'</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'now access {second_page}'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>second_page<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'back to {first_page}'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 执行浏览器页面的后退动作</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'forward to {second_page}'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 执行浏览器页面的前进动作</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="03-浏览器刷新"><a href="#03-浏览器刷新" class="headerlink" title="03 浏览器刷新"></a>03 浏览器刷新</h2><p>若我们想模拟浏览器页面的刷新(<strong>F5</strong>)，可以直接通过webdriver的<code>refresh()</code>方法实现。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>refresh<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 刷新当前页面</span></code></pre><h2 id="04-窗口截图"><a href="#04-窗口截图" class="headerlink" title="04 窗口截图"></a>04 窗口截图</h2><p>由于自动化测试用例是由程序执行的，有时候打印的错误信息不够直观。若在脚本执行出错时能够对当前窗口进行截图保存，那么通过截图就可以非常直观地看到脚本出错的原因。WebDriver提供了用于窗口截图的方法<code>save_screenshot()</code>，可以截取当前窗口。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 截取当前窗口，指定截图图片的保存位置</span>browser<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'./baidu_img.png'</span><span class="token punctuation">)</span></code></pre><p>这里在保存图片时，后缀名建议使用<code>png</code>格式。</p><h2 id="05-关闭浏览器"><a href="#05-关闭浏览器" class="headerlink" title="05 关闭浏览器"></a>05 关闭浏览器</h2><p>关闭浏览器，我们上面已经用到了<code>quit()</code>方法，其利用就是退出相关的驱动程序和关闭所有窗口。除此之外，WebDriver还提供了<code>close()</code>方法，用来关闭当前窗口，所以<code>close()</code>方法通常用于打开了多个窗口的场景中。</p><p>在长期执行自动化测试环境中，肯定存在一些因异常导致测试中断的场景，这些场景中不仅浏览器的窗口没有关掉，连其进程都会存留在系统中，一段时间后肯定会堆积大量的无用进程占据资源。</p><p>这时，我们就需要手动来清除WebDriver的进程，如下这条命令可以遍历出系统中所有存在ChromeDriver的进程，然后逐一杀除。</p><pre class=" language-bat"><code class="language-bat">taskkill /f /t /im chromedriver.exe</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>接口测试学习笔记之01接口概念</title>
      <link href="/2019/11/30/python-interface-testing-some-concepts/"/>
      <url>/2019/11/30/python-interface-testing-some-concepts/</url>
      
        <content type="html"><![CDATA[<h1 id="接口测试学习笔记之01接口概念"><a href="#接口测试学习笔记之01接口概念" class="headerlink" title="接口测试学习笔记之01接口概念"></a>接口测试学习笔记之01接口概念</h1><p>在测试领域，一直存在有很多测试的概念，诸如单元测试、集成测试、功能测试、性能测试、安全测试等等……而接口测试就是众多测试概念中比较重要的一个。</p><p>接口，两个不同系统（或子程序）交接并通过它彼此作用的部分。</p><p>在计算机中，接口是计算机系统中两个独立的部件进行信息交换的共享边界。而接口测试，英文为Interface Testing，是针对系统间或者系统的组件间的接口的一种测试，意在测试特定接口在给定输入下的行为与预期行为之间的符合性。</p><p>要对接口进行测试，首先要了解接口的协议和接口的定义。</p><p>接口协议（Inteface Protocol）指的是需要通过接口进行信息交换的通信需要遵从的通信方式和要求。</p><p>协议是个很复杂的概念，这里不展开阐述了，随着互联网的发展，因系统之间、系统的组件之间集成的需要，出现了很多类型的接口通信协议，其中最常用的是HTTP协议，于是基于HTTP协议的接口测试也逐渐成为接口测试的主要应用场景。</p><p>接口定义，是对接口的功能、调用的前提条件、调用的方法，以及接口返回内容的描述，是接口测试案例编写的基础。</p><p>我们针对HTTP接口的定义，提出了接口描述的八个问题：</p><ul><li>接口请求的地址？</li><li>接口的功能描述是什么？</li><li>请求接口是GET还是POST？</li><li>接口需要在登录的前提下才是生效的吗？</li><li>接口有上送数据吗？具体的数据是什么？</li><li>接口返回的状态码是多少？</li><li>接口返回报文体的格式和编码是什么？</li><li>接口返回的内容是什么？</li></ul><p>当我们可以准确回答上述八个问题后，则说明我们已经即将使用的接口有了深入的认识，可以进行使用或用于执行一些测试。</p><p>相关扩展</p><ul><li>Ajax接口与Web动静分离</li></ul><p>现在越来越多的产品抛弃C/S架构，转向B/S架构</p><p>Ajax是 Asynchronous JavaScript and XML（异步的JavaScript和XML）的简称</p><ul><li>REST API</li></ul><p>REST, Representational State Transfer，又称具象状态传输，是一种万维网软件架构风格，它是一种设计风格而不是标准。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> HTTP接口测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> 接口测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之元素定位</title>
      <link href="/2019/11/27/python-selenium-find-elements/"/>
      <url>/2019/11/27/python-selenium-find-elements/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之元素定位"><a href="#Python-Selenium-小技巧之元素定位" class="headerlink" title="Python + Selenium 小技巧之元素定位"></a>Python + Selenium 小技巧之元素定位</h1><p>&lt;待完善&gt;</p><p>在介绍元素定位之前，我们先来看看HTML的结构。以bilibili网站为例，来做说明。</p><p>我们通过浏览器自带的开发者工具 <strong><f12></f12></strong>，得到如下信息：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191127193812.png" alt=""></p><ul><li>HTML结构都是由标签对组成的<br>如：meta、html等都是标签名</li><li>标签有各种属性<br>如：type、name等都是属性名</li><li>标签对之间可以有文本数据<br>如：<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>哔哩哔哩 (゜-゜)つロ 干杯~-bilibili<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></code></pre></li><li>标签有层级关系</li></ul><p>Selenium中的WebDriver，为我们提供了8种元素定位的方式，对应于Python中的方法如下：</p><table><thead><tr><th align="left">定位方式</th><th align="left">Python中与之对应的方法</th></tr></thead><tbody><tr><td align="left"><code>id</code>定位</td><td align="left"><code>find_element_by_id()</code></td></tr><tr><td align="left"><code>name</code>定位</td><td align="left"><code>find_element_by_name()</code></td></tr><tr><td align="left"><code>class name</code>定位</td><td align="left"><code>find_element_by_class_name()</code></td></tr><tr><td align="left"><code>tag name</code>定位</td><td align="left"><code>find_element_by_tag_name()</code></td></tr><tr><td align="left"><code>link text</code>定位</td><td align="left"><code>find_element_by_link_text()</code></td></tr><tr><td align="left"><code>partial link</code>定位</td><td align="left"><code>find_element_by_partial_link_text()</code></td></tr><tr><td align="left"><code>XPath</code>定位</td><td align="left"><code>find_element_by_xpath()</code></td></tr><tr><td align="left"><code>CSS Selector</code>定位</td><td align="left"><code>find_element_by_css_selector()</code></td></tr></tbody></table><h2 id="八种定位方式及实践"><a href="#八种定位方式及实践" class="headerlink" title="八种定位方式及实践"></a>八种定位方式及实践</h2><h3 id="01-id-定位"><a href="#01-id-定位" class="headerlink" title="01 id 定位"></a>01 id 定位</h3><p>元素的id，就是身份证一样，在一个HTML页面中是唯一的，这将是最简单的定位方式。</p><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128080714.png" alt=""></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>cc <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>cc<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>但是这里有一点要注意，虽然ID是唯一，但有时候它是动态变化的，如下就是一个动态 id 的例子。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191201133547.png" alt=""></p><p>这里的id值就是随机的，那么我们就得换一种定位方式了。</p><h3 id="02-name-定位"><a href="#02-name-定位" class="headerlink" title="02 name 定位"></a>02 name 定位</h3><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128081612.png" alt=""></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>cc <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'wd'</span><span class="token punctuation">)</span>cc<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'hello python'</span><span class="token punctuation">)</span></code></pre><h3 id="03-class-name-定位"><a href="#03-class-name-定位" class="headerlink" title="03 class name 定位"></a>03 class name 定位</h3><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128081612.png" alt=""></p><pre class=" language-python"><code class="language-python">browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>cc <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'s_ipt'</span><span class="token punctuation">)</span>cc<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'hello python'</span><span class="token punctuation">)</span></code></pre><h3 id="04-tag-name-定位"><a href="#04-tag-name-定位" class="headerlink" title="04 tag name 定位"></a>04 tag name 定位</h3><p>HTML通过tag来定义不同页面的元素。例如<input>通常是用来定义输入框的，<a>标签用来定义超链接的。</a></p><p>我们还是以百度为例，利用tag定位百度搜索框</p><pre class=" language-python"><code class="language-python">browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>find_element_by_tag_name<span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span></code></pre><p>这里有一点值得注意的是，一个页面中同一标签名的元素，可能会有很多，我们在定位时很难定位到符合我们需要的元素。</p><h3 id="05-link-text-定位"><a href="#05-link-text-定位" class="headerlink" title="05 link text 定位"></a>05 link text 定位</h3><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128084543.png" alt=""></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>cc <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'新闻'</span><span class="token punctuation">)</span>cc<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="06-partial-link-定位"><a href="#06-partial-link-定位" class="headerlink" title="06 partial link 定位"></a>06 partial link 定位</h3><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128084543.png" alt=""></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>cc <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">'闻'</span><span class="token punctuation">)</span>cc<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="07-XPath-定位"><a href="#07-XPath-定位" class="headerlink" title="07 XPath 定位"></a>07 XPath 定位</h3><p>在XML文档中，XPath是一种定位元素的语言。因为HTML可以看作XML的一种实现，所以WebDriver提供了这种在Web应用中定位元素的方法。</p><h4 id="7-1-绝对路径定位"><a href="#7-1-绝对路径定位" class="headerlink" title="7.1 绝对路径定位"></a>7.1 绝对路径定位</h4><p>示例：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128091213.png" alt=""></p><p>如果你使用的是Chrome，可以按上图这个方法，把该元素的XPath信息拷贝出来。</p><p>第二处参考：<a href="https://www.kancloud.cn/guanfuchang/python_selenium/710818" target="_blank" rel="noopener">https://www.kancloud.cn/guanfuchang/python_selenium/710818</a></p><h4 id="7-2-利用元素属性定位"><a href="#7-2-利用元素属性定位" class="headerlink" title="7.2 利用元素属性定位"></a>7.2 利用元素属性定位</h4><h4 id="7-3-层级与属性结合"><a href="#7-3-层级与属性结合" class="headerlink" title="7.3 层级与属性结合"></a>7.3 层级与属性结合</h4><h4 id="7-4-使用逻辑运算符"><a href="#7-4-使用逻辑运算符" class="headerlink" title="7.4 使用逻辑运算符"></a>7.4 使用逻辑运算符</h4><h4 id="7-5-使用-contains-方法"><a href="#7-5-使用-contains-方法" class="headerlink" title="7.5 使用 contains 方法"></a>7.5 使用 contains 方法</h4><h4 id="7-6-使用-text-方法"><a href="#7-6-使用-text-方法" class="headerlink" title="7.6 使用 text() 方法"></a>7.6 使用 text() 方法</h4><h3 id="08-CSS-Selector-定位"><a href="#08-CSS-Selector-定位" class="headerlink" title="08 CSS Selector 定位"></a>08 CSS Selector 定位</h3><p>CSS是一种语言，用来描述HTML和XML文档的呈现样式。CSS使用选择器为页面元素绑定属性。</p><h4 id="8-1-通过-class-定位"><a href="#8-1-通过-class-定位" class="headerlink" title="8.1 通过 class 定位"></a>8.1 通过 class 定位</h4><h4 id="8-2-通过-id-定位"><a href="#8-2-通过-id-定位" class="headerlink" title="8.2 通过 id 定位"></a>8.2 通过 id 定位</h4><h4 id="8-3-通过标签名定位"><a href="#8-3-通过标签名定位" class="headerlink" title="8.3 通过标签名定位"></a>8.3 通过标签名定位</h4><h4 id="8-4-通过标签层级关系定位"><a href="#8-4-通过标签层级关系定位" class="headerlink" title="8.4 通过标签层级关系定位"></a>8.4 通过标签层级关系定位</h4><h4 id="8-5-通过属性定位"><a href="#8-5-通过属性定位" class="headerlink" title="8.5 通过属性定位"></a>8.5 通过属性定位</h4><h4 id="8-6-组合定位"><a href="#8-6-组合定位" class="headerlink" title="8.6 组合定位"></a>8.6 组合定位</h4><h3 id="更多定位用法"><a href="#更多定位用法" class="headerlink" title="更多定位用法"></a>更多定位用法</h3><p>在元素定位之后，可以在开发者工具中的Elements页面，进行搜索，用相同的条件查询，以确保是唯一的。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191128080941.png" alt=""></p><h2 id="利用-By-定位元素"><a href="#利用-By-定位元素" class="headerlink" title="利用 By 定位元素"></a>利用 By 定位元素</h2><p>针对上述的八种定义方法，WebDriver为我们提供了另一套写法，统一调用<code>find_element()</code>方法，这需要借助<code>By</code>来声明定位并传入与之对应的参数：</p><pre class=" language-python"><code class="language-python">find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CLASS_NAME<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PARTIAL_LINK_TEXT<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span> <span class="token punctuation">)</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token punctuation">)</span></code></pre><p>当然了，在使用这种调用方式之前，需要导入<code>By</code>：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By</code></pre><p>以百度搜索输入框为例，具体说明各个定位方式的用法：</p><p>（通过chrome浏览器查看元素或者搜狐浏览器的firebug查看，即可看到html源码）</p><p>注意点：第三行的元素是灰色的，该元素是不可定位到的，下方会说明。</p><p>复制代码<br>1 <span class="bg s_ipt_wr quickdelete-wrap"><br>2 <span class="soutu-btn"></span><br>3 <input id="kw" class="s_ipt" autocomplete="off" maxlength="255" value="" name="wd"><br>4 <a id="quickdelete" class="quickdelete" href="javascript:;" title="清空" style="top: 0px; right: 0px; display: none;" target="_blank" rel="noopener"></a><br>5 </span><br>6 <span class="bg s_btn_wr"><br>7 <input id="su" class="bg s_btn" type="submit" value="百度一下"><br>8 </span><br>复制代码</p><p>2.通过class_name定位元素</p><p>点击返回目录</p><p>classname有可能重复哦。 </p><p>使用：find_element_by_class_name(“class_name_vaule”)</p><p>实例：find_element_by_class_name(“s_ipt”)</p><p>3.通过tag_name定位元素</p><p>点击返回目录</p><p>标签名字最容易重复，不过，当定位一组数据时，可使用。</p><p>使用：find_element_by_tag_name(“tag_name_vaule”)</p><p>实例：find_element_by_tag_name(“input”)</p><p>注意点：当定位一组元素时：可勾选一组复选框。如下：</p><p>find_element_by_tag_name(“input”)</p><p>复制代码</p><h3>checkbox</h3><div class="well"><form class="form-horizontal"><div class="control-group"><label class="control-label" for="c1">checkbox1</label><div class="controls"><input type="checkbox" id="c1"> </div> </div><div class="control-group"><label class="control-label" for="c2">checkbox2</label><div class="controls"><input type="checkbox" id="c2"> </div> </div><div class="control-group"><label class="control-label" for="c3">checkbox3</label><div class="controls"><input type="checkbox" id="c3"> </div> </div> </form> </div> <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script><script>!function(e){var r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function t(){for(var c=0;c<r.length;c++)t=r[c],void 0,0<=(n=t.getBoundingClientRect()).top&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=r[c];t=o,n=function(){r=r.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}t(),e.addEventListener("scroll",function(){!function(t,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)}(t,e)})}(this);</script>复制代码<p>4.通过name定位元素</p><p>点击返回目录</p><p>name有可能会重复哦。 </p><p>使用：find_element_by_name(“name_vaule”)</p><p>实例：find_element_by_name(“wd”)</p><p>5.通过link文字精确定位元素</p><p>点击返回目录</p><p><a onclick="return false;" class="lb" name="tj_login" href="https://passport.baidu.com/v2/?login&amp;tpl=mn&amp;u=http%3A%2F%2Fwww.baidu.com%2F" target="_blank" rel="noopener">登录</a><br>使用：find_element_by_link_text(“text_vaule”)</p><p>实例：find_element_by_link_text(“登录”)</p><p>6.通过link文字模糊定位元素</p><p>点击返回目录</p><p>使用：find_element_by_partial_link_text(“部分text_vaule”)</p><p>实例：find_element_by_partial_link_text(“登”)</p><p>7.通过CSS定位元素</p><p>点击返回目录</p><p>可查看我的另外一篇博文：w3school之CSS学习笔记 学习css知识，更加有助于定位。</p><p>CSS（Cascading Style Sheets）是一种语言，它用来描述HTML和XML文档的表现。CSS可以较为灵活的选择控件的任意属性，一般情况下会比XPath快。且语法也比较简洁。</p><p>不过CSS对于初学者而言比较复杂。</p><p>使用：find_element_by_css_selector(“CSS”)</p><p>实例：</p><p>7.1通过id属性定位元素</p><p>#号表示通过id属性来定位元素</p><p>find_element_by_css_selector(“#kw”)</p><p>7.2通过class属性定位元素</p><p>.号表示通过class属性来定位元素</p><p>find_element_by_css_selector(“.s_ipt”)</p><p>7.3通过标签名定位元素</p><p>find_element_by_css_selector(“input”)</p><p>7.4通过属性定位元素（挺常用的）</p><p>find_element_by_css_selector(“[name=’wd’]”)</p><p>find_element_by_css_selector(“[maxlength=’255’]”)</p><p>属性值包含某个值</p><p>属性值包含wd：适用于由空格分隔的属性值。</p><p>find_element_by_css_selector(“[name~=’wd’]”)</p><p>7.5父子定位元素</p><p>查找有父亲元素的标签名为span，它的所有标签名叫input的子元素</p><p>find_element_by_css_selector(“span&gt;input”) </p><p>7.6组合定位元素</p><p>标签名#id属性值：指的是该input标签下id属性为kw的元素</p><p>find_element_by_css_selector(“input#kw”)</p><p>标签名.class属性值：指的是该input标签下class属性为s_ipt的元素</p><p>find_element_by_css_selector(“input.s_ipt”)</p><p>标签名[属性=’属性值‘]：指的是该input标签下name属性为wd的元素</p><p>find_element_by_css_selector(“input[name=’wd’]”)</p><p>父元素标签名&gt;标签名.class属性值：指的是span下的input标签下class属性为s_ipt的元素</p><p>find_element_by_css_selector(“span&gt;input.s_ipt”)</p><p>多个属性组合定位元素（挺常用的）</p><p>指的是input标签下id属性为kw且name属性为wd的元素</p><p>find_element_by_css_selector(“input.s_ipt[name=’wd’]”)</p><p>指的是input标签下name属性为wd且maxlength为255的元素</p><p>find_element_by_css_selector(“input[name=’wd’][maxlength=’255’]”)</p><p>比较复杂的CSS定位可查看</p><p><a href="http://www.360doc.com/content/13/1105/10/11675837_326750173.shtml" target="_blank" rel="noopener">http://www.360doc.com/content/13/1105/10/11675837_326750173.shtml</a></p><p><a href="http://www.360doc.com/content/13/1105/10/11675837_326750240.shtml" target="_blank" rel="noopener">http://www.360doc.com/content/13/1105/10/11675837_326750240.shtml</a></p><p>比较懒惰的方法：</p><p>使用搜狐浏览器的firebug工具，复制CSS路径，不过这种方式对层级要求高，到时候自己再修改下。</p><p>8.通过XPath定位元素</p><p>点击返回目录</p><p>XPath是一种XML文档中定位元素的语言。该定位方式也是比较常用的定位方式。</p><p>使用：find_element_by_xpath(“XPath”)</p><p>实例：</p><p>8.1通过属性定位元素</p><p>find_element_by_xpath(“//标签名[@属性=’属性值’]”)</p><p>id属性：</p><p>find_element_by_xpath(“//input[@id=’kw’]”)</p><p>class属性：</p><p>find_element_by_xpath(“//input[@class=’s_ipt’]”)</p><p>name属性：</p><p>find_element_by_xpath(“//input[@name=’wd’]”)</p><p>maxlength属性：</p><p>find_element_by_xpath(“//input[@maxlength=’255’]”)</p><p>8.2通过标签名定位元素</p><p>指所有input标签元素</p><p>find_element_by_xpath(“//input”)</p><p>8.3父子定位元素</p><p>查找有父亲元素的标签名为span，它的所有标签名叫input的子元素</p><p>find_element_by_xpath(“//span/input”) </p><p>8.4根据元素内容定位元素（非常实用）</p><p>find_element_by_xpath(“//p[contains(text(),’京公网’)]”) </p><p id="jgwab"><i class="c-icon-jgwablogo"></i>京公网安备11000002000001号</p>注：contains的另一种用法<p>//input[contains(@class,’s’)]</p><p>说明class属性包含s的元素。</p><p>8.5组合定位元素</p><p>//父元素标签名/标签名的属性值：指的是span下的input标签下class属性为s_ipt的元素</p><p>find_element_by_xpath(“//span/input[@class=’s_ipt’]”)</p><p>多个属性组合定位（挺常用的）</p><p>指的是input标签下id属性为kw且name属性为wd的元素</p><p>find_element_by_xpath(“//input[@class=’s_ipt’ and @name=’wd’]”)</p><p>指的是p标签下内容包含“京公网”且id属性为jgwab的元素</p><p>find_element_by_xpath(“//p[contains(text(),’京公网’) and @id=’jgwab’]”)  </p><p>比较懒惰的方法：</p><p>使用搜狐浏览器的firebug工具，复制XPath路径，不过这种方式对层级要求高，到时候自己再修改下。</p><p>9.通过By定位元素</p><p>点击返回目录</p><p>使用：find_element(定位的类型，具体定位方式)</p><p>定位的类型包括By.ID,By.NAME,By.CLASS_NAME,By.TAG_NAME,By.LINK_TEXT,By.PARTIAL_LINK_TEXT,By.XPATH,By.CSS_SELECTOR</p><p>具体定位方式参考上方1-8的说明。</p><p>实例：find_element(By.ID,’kw’)</p><p>注意：使用By定位方式，需先导入By类。</p><p>from selenium.webdriver.common.by import By</p><p>10.具体实例说明</p><p>点击返回目录</p><p>下方例子是登陆126邮件，然后发送邮件。</p><p>复制代码<br> 1 # coding=utf-8<br> 2 ‘’’<br> 3 Created on 2016-7-27<br> 4 @author: Jennifer<br> 5 Project:发送邮件<br> 6 ‘’’<br> 7 from selenium import webdriver<br> 8 import time<br> 9<br>10 from test_5_2_public import Login  #由于公共模块文件命名为test_5_2_public<br>11 driver=webdriver.Firefox()<br>12 driver.implicitly_wait(30)<br>13 driver.get(r’<a href="http://www.126.com/'" target="_blank" rel="noopener">http://www.126.com/'</a>)  #字符串加r，防止转义。<br>14 time.sleep(3)<br>15 driver.switch_to.frame(‘x-URS-iframe’)<br>16 #调用登录模块<br>17 Login().user_login(driver)<br>18 time.sleep(10)<br>19 #发送邮件<br>20 #点击发件箱<br>21 #<em>mail_component_61_61是动态id，所以不能用于定位<br>22 #driver.find_element_by_css_selector(‘#<em>mail_component_61_61&gt;span.oz0’).click()<br>23 #不能加u”//span[contains(text(),u’写 信’)]”，否则定位不到。<br>24 #以下定位是查找span标签有个文本（text）包含（contains）’写 信’ 的元素，该定位方法重要<br>25 driver.find_element_by_xpath(“//span[contains(text(),’写 信’)]”).click()<br>26 #填写收件人<br>27 #driver.find_element_by_class_name(‘nui-editableAddr-ipt’).send_keys(r’xxx@doov.com.cn’)<br>28 driver.find_element_by_class_name(‘nui-editableAddr-ipt’).send_keys(r’xxx@163.com’)<br>29 #填写主题<br>30 #通过and连接更多的属性来唯一地标志一个元素<br>31 driver.find_element_by_xpath(“//input[@class=’nui-ipt-input’ and @maxlength=’256’]”).send_keys(u’自动化测试’)<br>32 #填写正文<br>33 #通过switch_to_frame()将当前定位切换到frame/iframe表单的内嵌页面中<br>34 driver.switch_to_frame(driver.find_element_by_class_name(‘APP-editor-iframe’))<br>35 #在内嵌页面中定位邮件内容位置<br>36 emailcontext=driver.find_element_by_class_name(‘nui-scroll’)<br>37 #填写邮件内容<br>38 emailcontext.send_keys(u’这是第一封自动化测试邮件’)<br>39 #通过switch_to().default_content()跳回最外层的页面<br>40 #注：不要写成switch_to().default_content(),否则报AttributeError: SwitchTo instance has no __call</em></em> method<br>41 driver.switch_to.default_content()<br>42 #driver.switch_to.parent_frame()<br>43 #点击发送<br>44 time.sleep(3)<br>45 #有可能存在元素不可见（查看元素是灰色的），会报ElementNotVisibleException错误<br>46 #包含发送二字的元素很多，所以还得再加上其他限制<br>47 #sendemails=driver.find_element_by_xpath(“//span[contains(text(),’发送’)]”)<br>48 sendemails=driver.find_element_by_xpath(“//span[contains(text(),’发送’) and @class=’nui-btn-text’]”)<br>49 time.sleep(3)<br>50<br>51 #校验邮件是否发送成功<br>52 try:<br>53     assert ‘发送成功’ in driver.page_source<br>54 except AssertionError:<br>55     print ‘邮件发送失败’<br>56 else:<br>57     print ‘邮件发送成功’<br>58<br>59 #调用退出模块<br>60 Login().user_logout(driver)<br>复制代码<br>元素定位说明：<br>1.代码22行，定位不到是因为id是动态的，所以需采取其他方式定位元素。</p><p>2.代码25行，是根据元素内容来定位的，具体用法详看8.4.</p><p>3.代码28行，是根据class名来定位元素的，由于该值在该页面上是唯一的，所以可以用它来定位。</p><p>4.代码31行，是使用逻辑运算符and连接更多的属性从而唯一的标志一个元素，具体用法详看8.5.</p><p>5.代码34行，由于使用内嵌的iframe框架，所以需要先使用switch_to_frame()移到该表单上，才能定位该表单上的元素，非常重要，否则无论怎么定位都会报“NoSuchElementException”，找不到该元素。</p><p>6.代码41行，跳出iframe框架，当框架内的动作操作完毕后，需要使用switch_to.default_content跳出iframe框架,非常重要。</p><p>7.代码47行，由于内容包括“发送”的元素中包含不可见元素（html查看元素可以看到此行是灰色的），这样有可能定位到不可见元素，会报“ElementNotVisibleException”。</p><p>8.代码48行，是使用逻辑运算符and连接更多的属性从而唯一的标志一个元素，具体用法详看8.5.这样可以排除掉那个不可见元素。</p><p><a href="https://www.cnblogs.com/yufeihlf/p/5717291.html" target="_blank" rel="noopener">https://www.cnblogs.com/yufeihlf/p/5717291.html</a></p><h2 id="定位一组元素"><a href="#定位一组元素" class="headerlink" title="定位一组元素"></a>定位一组元素</h2><p>定位一组元素，与定位单个元素，唯一的差别，所使用的方法中element单词有没有加<code>s</code></p><p>| <code>id</code>定位 | <code>find_elements_by_id()</code> |<br>| <code>name</code>定位 | <code>find_elements_by_name()</code> |<br>| <code>class name</code>定位 | <code>find_elements_by_class_name()</code> |<br>| <code>tag name</code>定位 | <code>find_elements_by_tag_name()</code> |<br>| <code>link text</code>定位 | <code>find_elements_by_link_text()</code> |<br>| <code>partial link</code>定位 | <code>find_elements_by_partial_link_text()</code> |<br>| <code>XPath</code>定位 | <code>find_elements_by_xpath()</code> |<br>| <code>CSS Selector</code>定位 | <code>find_elements_by_css_selector()</code> |</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> WebDriver API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>休整一段时间</title>
      <link href="/2019/11/11/insights-have-a-rest/"/>
      <url>/2019/11/11/insights-have-a-rest/</url>
      
        <content type="html"><![CDATA[<p>最近翻译了一本Python相关的书籍，</p><p>耗费将近小半年的时间，</p><p>终于结束了，</p><p>如释重负。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191112082828.png" alt=""></p><p>先做一段时间的休整，</p><p>顺便把之前写的文章都整理到这个由 Hexo 搭建的博客中。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 碎碎念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 碎碎念 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>持之以恒 VS 半途而废</title>
      <link href="/2019/09/21/insights-persevere-vs-halfway-up/"/>
      <url>/2019/09/21/insights-persevere-vs-halfway-up/</url>
      
        <content type="html"><![CDATA[<h1 id="持之以恒-VS-半途而废"><a href="#持之以恒-VS-半途而废" class="headerlink" title="持之以恒 VS 半途而废"></a>持之以恒 VS 半途而废</h1><p>如何长久地坚持下去：</p><ul><li>动机：动机十分不纯</li><li>目标：目标非常容易达成</li><li>自我评价：对自己的评价高到离谱</li><li>进度管理：进度要求适度宽松</li><li>对于结果：努力追求乐趣</li></ul><p>如何半途而废：</p><ul><li>动机：动机高尚</li><li>目标：目标很远大</li><li>自我评价：冷静客观的自我评价</li><li>进度管理：进度要求一丝不苟</li><li>对于结果：对结果百分百执着</li></ul><p>好好琢磨下，有没有Get到关键点😏😏😏</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 碎碎念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 碎碎念 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown 语法学习笔记</title>
      <link href="/2019/09/18/markdown-syntax-learn-note/"/>
      <url>/2019/09/18/markdown-syntax-learn-note/</url>
      
        <content type="html"><![CDATA[<h1 id="Markdown-语法学习笔记"><a href="#Markdown-语法学习笔记" class="headerlink" title="Markdown 语法学习笔记"></a>Markdown 语法学习笔记</h1><blockquote><p>Markdown是一种轻量级标记语言，创始人为约翰·格鲁伯（John Gruber）。它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML（或者HTML）文档”。[4]这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。</p></blockquote><blockquote><p>由于Markdown的轻量化、易读易写特性，并且对于图片，图表、数学式都有支持，当前许多网站都广泛使用 Markdown 来撰写帮助文档或是用于论坛上发表消息。例如：GitHub、reddit、Diaspora、Stack Exchange、OpenStreetMap 、SourceForge等。甚至Markdown能被使用来撰写电子书。</p></blockquote><h2 id="1-基础语法"><a href="#1-基础语法" class="headerlink" title="1 基础语法"></a>1 基础语法</h2><h3 id="1-1-分级标题"><a href="#1-1-分级标题" class="headerlink" title="1.1 分级标题"></a>1.1 分级标题</h3><p><strong>语法说明：</strong></p><ul><li>在想要设置为标题的文字前面加<code>#</code>来表示</li><li>一个<code>#</code>是一级标题，二个<code>#</code>是二级标题，以此类推。支持六级标题。</li><li>标准语法一般在<code>#</code>后跟个空格再写文字</li></ul><pre><code># H1 一级标题## H2 二级标题### H3 三级标题#### H4 四级标题##### H5 五级标题###### H6 六级标题</code></pre><p><strong>显示效果如下：</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926190713.png" alt=""></p><h3 id="1-2-文本样式"><a href="#1-2-文本样式" class="headerlink" title="1.2 文本样式"></a>1.2 文本样式</h3><p><strong>语法说明：</strong></p><ul><li>加粗：要加粗的文字左右分别用两个<code>*</code>号包起来</li><li>斜体：要倾斜的文字左右分别用一个<code>*</code>号包起来（或用下划线<code>_</code>包裹）</li><li>斜体加粗：要倾斜和加粗的文字左右分别用三个<code>*</code>号包起来</li><li>删除线：要加删除线的文字左右分别用两个<code>~~</code>号包起来</li></ul><pre><code>~~这里是删除线~~**字体加粗***字体倾斜*_字体倾斜_***倾斜加粗***</code></pre><p><strong>显示效果如下：</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926192820.png" alt=""></p><h3 id="1-3-列表"><a href="#1-3-列表" class="headerlink" title="1.3 列表"></a>1.3 列表</h3><p><strong>语法说明：</strong></p><ul><li>无序列表：用<code>-</code>、<code>+</code>、<code>*</code>任何一种都可以，和内容之间都要有<code>一个空格</code></li><li>有序列表：数字后加<code>.</code>，序号跟内容之间要有<code>空格</code></li><li>列表嵌套：上一级和下一级之间敲<code>三个空格</code>即可</li></ul><pre><code>1. 一级有序列表   * 二级无序列表   * 二级无序列表      1. 三级有序列表      2. 三级有序列表         - 四级无序列表         - 四级无序列表   * 无序列表2. 一级有序列表3. 一级有序列表</code></pre><p><strong>显示效果如下：</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926190712.png" alt=""></p><h3 id="1-4-插入-链接-图片"><a href="#1-4-插入-链接-图片" class="headerlink" title="1.4 插入 链接/图片"></a>1.4 插入 链接/图片</h3><p>Markdown 支持两种形式的链接语法： <code>Inline-style</code>(行内式)和<code>Reference-style</code>(参考式)两种形式，行内式一般使用较多。</p><h4 id="1-4-1-行内式"><a href="#1-4-1-行内式" class="headerlink" title="1.4.1 行内式"></a>1.4.1 行内式</h4><p><strong>语法说明：</strong></p><ul><li><code>[ ]</code>里写链接文字，<code>( )</code>里写链接地址，<code>( )</code>中的<code>" "</code>中可以为链接指定<code>title</code>属性，<code>title</code>属性可加可不加。</li><li><code>title</code>属性的效果，是鼠标悬停在链接上会出现指定的<code>title</code>文字。</li><li>链接地址与链接标题前有一个空格。</li></ul><pre><code>欢迎访问[＆娴敲棋子＆'s Blog](https://HGzhao.github.io/)欢迎访问[＆娴敲棋子＆'s Blog](https://HGzhao.github.io/ "＆娴敲棋子＆'s Blog")</code></pre><p><strong>显示效果如下：</strong></p><p>欢迎访问<a href="https://HGzhao.github.io/">＆娴敲棋子＆’s Blog</a></p><p>欢迎访问<a href="https://HGzhao.github.io/" title="＆娴敲棋子＆'s Blog">＆娴敲棋子＆’s Blog</a></p><h4 id="1-4-2-参考式"><a href="#1-4-2-参考式" class="headerlink" title="1.4.2 参考式"></a>1.4.2 参考式</h4><p>参考式超链接一般用在学术论文上面，或者另一种情况，如果某一个链接在文章中多处使用，那么使用引用 的方式创建链接将非常好，它可以让你对链接进行统一的管理。</p><p><strong>语法说明：</strong></p><ul><li>参考式链接分为两部分，文中的写法 [链接文字][链接标记]，在文本的任意位置添加[链接标记]:链接地址 “链接标题”，链接地址与链接标题前有一个空格。</li><li>如果链接文字本身可以做为链接标记，你也可以写成[链接文字][] [链接文字]：链接地址的形式，见代码的最后一行。</li></ul><pre><code>网站推荐[Github][1]、[＆娴敲棋子＆'s Blog][2]、[＆娴敲棋子＆'s Blog][]。[1]:https://github.com/[2]:https://HGzhao.github.io/ "＆娴敲棋子＆'s Blog"[＆娴敲棋子＆'s Blog]:https://HGzhao.github.io/</code></pre><p><strong>显示效果如下：</strong></p><p>网站推荐<a href="https://github.com/" target="_blank" rel="noopener">Github</a>、<a href="https://HGzhao.github.io/" title="＆娴敲棋子＆'s Blog">＆娴敲棋子＆’s Blog</a>、<a href="https://HGzhao.github.io/">＆娴敲棋子＆’s Blog</a>。</p><h4 id="1-4-3-自动链接"><a href="#1-4-3-自动链接" class="headerlink" title="1.4.3 自动链接"></a>1.4.3 自动链接</h4><p><strong>语法说明：</strong></p><p>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用&lt;&gt;包起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如：</p><pre><code>&lt;http://example.com/&gt;&lt;address@example.com&gt;</code></pre><p><strong>显示效果如下：</strong></p><p><a href="http://example.com/" target="_blank" rel="noopener">http://example.com/</a><br><a href="mailto:address@example.com" target="_blank" rel="noopener">address@example.com</a></p><h4 id="1-4-4-插入图片"><a href="#1-4-4-插入图片" class="headerlink" title="1.4.4 插入图片"></a>1.4.4 插入图片</h4><p>图片的创建方式与超链接相似，而且和超链接一样也有两种写法，行内式和参考式写法。</p><p>语法中图片Alt的意思是如果图片因为某些原因不能显示，就用定义的图片Alt文字来代替图片。 图片Title则和链接中的Title一样，表示鼠标悬停与图片上时出现的文字。 Alt 和 Title 都不是必须的，可以省略，但建议写上。</p><pre><code>![图片alt](图片地址 ''图片title'')图片alt就是显示在图片下面的文字，相当于对图片内容的解释。图片title是图片的标题，当鼠标移到图片上时显示的内容。title可加可不加Inline-style: ![alt text](https://d233eq3e3p3cv0.cloudfront.net/fit/c/256/256/0*njGaeIRG6IiQJqNX.jpeg “Logo Title Text 1")Reference-style: ![alt text][logo][logo]: https://d233eq3e3p3cv0.cloudfront.net/fit/c/256/256/0*njGaeIRG6IiQJqNX.jpeg “Logo Title Text 2"</code></pre><h3 id="1-5-代码块和语法高亮"><a href="#1-5-代码块和语法高亮" class="headerlink" title="1.5 代码块和语法高亮"></a>1.5 代码块和语法高亮</h3><p>Blocks of code are either fenced by lines with three back-ticks ```, or are indented with four spaces. I recommend only using the fenced code blocks — they’re easier and only they support syntax highlighting.</p><p><strong>语法说明：</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926195729.png" alt=""></p><p><strong>显示效果如下：</strong><br>javascript</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> s <span class="token operator">=</span> “JavaScript syntax highlighting”<span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>python</p><pre class=" language-python"><code class="language-python">s <span class="token operator">=</span> “Python syntax highlighting”<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span></code></pre><p>HTML</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">bgcolor</span><span class="token attr-value"><span class="token punctuation">=</span>orange</span><span class="token punctuation">></span></span>背景色是：orange<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code></pre><p>不指定语言</p><pre><code>No language indicated, so no syntax highlighting. But let’s throw in a &lt;b&gt;tag&lt;/b&gt;.</code></pre><h3 id="1-6-表格"><a href="#1-6-表格" class="headerlink" title="1.6 表格"></a>1.6 表格</h3><p><strong>语法说明：</strong></p><pre><code>| 左对齐标题 | 右对齐标题 | 居中对齐标题 || :------| ------: | :------: || 短文本 | 中等文本 | 稍微长一点的文本 || 稍微长一点的文本 | 短文本 | 中等文本 |*字体倾斜* | `语法高亮` | **字体加粗**-- | -- | --1 | 2 | 3</code></pre><ul><li>第二行用于分割表头和内容。</li><li><code>-</code>有一个就行，为了对齐，多加了几个<ul><li><code>:---</code>表示所在列的内容居<code>左</code>对齐</li><li><code>:--:</code>表示所在列的内容<code>居中</code>对齐</li><li><code>---:</code>表示所在列的内容居<code>右</code>对齐</li></ul></li><li>此外，最外侧的管道符可以省略。</li></ul><p><strong>显示效果如下：</strong> （第一个表格）</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926190708.png" alt=""></p><h3 id="1-7-引用"><a href="#1-7-引用" class="headerlink" title="1.7 引用"></a>1.7 引用</h3><p><strong>语法说明：</strong></p><ul><li>在引用的文字前加<code>&gt;</code>即可。</li><li>引用也可以嵌套，如加两个<code>&gt;&gt;</code>，三个<code>&gt;&gt;&gt;</code>，n个…这可以一直加下去。</li></ul><pre><code>&gt; 这是引用的内容&gt;&gt; 这是引用的内容&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 这是引用的内容</code></pre><p><strong>显示效果如下：</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926193336.png" alt=""></p><p>或是如下这种显示方式：</p><blockquote><p>这是第一级引用的内容</p><blockquote><p>这是第二级引用的内容</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>这是第八级引用的内容</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h3 id="1-8-分割线"><a href="#1-8-分割线" class="headerlink" title="1.8 分割线"></a>1.8 分割线</h3><p><strong>语法说明：</strong></p><ul><li>三个或者三个以上的<code>-</code>或者<code>*</code>即可作出分割线。</li></ul><pre><code>-------*******</code></pre><p><strong>显示效果如下：</strong>（此处仅拿其中一种写法做为展示）</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926190711.png" alt=""></p><h2 id="2-进阶技巧"><a href="#2-进阶技巧" class="headerlink" title="2 进阶技巧"></a>2 进阶技巧</h2><h3 id="2-1-缩进"><a href="#2-1-缩进" class="headerlink" title="2.1 缩进"></a>2.1 缩进</h3><p><strong>语法说明：</strong></p><ul><li>不断行的空白格 </li><li>半角的空格</li><li>全角的空格</li></ul><h3 id="2-2-换行"><a href="#2-2-换行" class="headerlink" title="2.2 换行"></a>2.2 换行</h3><p><strong>语法说明：</strong></p><ul><li>方法1: 连续两个以上空格+回车</li><li>方法2：使用html语言换行标签：<code>&lt;br&gt;</code></li></ul><h3 id="2-3-链接的高级技巧"><a href="#2-3-链接的高级技巧" class="headerlink" title="2.3 链接的高级技巧"></a>2.3 链接的高级技巧</h3><h4 id="2-3-1-注脚"><a href="#2-3-1-注脚" class="headerlink" title="2.3.1 注脚"></a>2.3.1 注脚</h4><p><strong>语法说明：</strong></p><ul><li>在需要添加注脚的文字后加上脚注名字[^注脚名字],称为加注。 然后在文本的任意位置(一般在最后)添加脚注，脚注前必须有对应的脚注名字。</li><li>脚注自动被搬运到最后面，请到文章末尾查看，并且脚注后方的链接可以直接跳转回到加注的地方。</li></ul><h4 id="2-3-2-内容目录"><a href="#2-3-2-内容目录" class="headerlink" title="2.3.2 内容目录"></a>2.3.2 内容目录</h4><p><strong>语法说明：</strong></p><ul><li>关于目录生成，只要文章是按照markdown语法写作的。在需要生成目录的地方写<code>[TOC]</code>即可。</li><li>注意，在<code>[TOC]</code>上下需要空出一行。</li><li>有些Markdown编辑器需要使用<code>@[TOC]</code>语法。</li></ul><h4 id="2-3-3-锚点"><a href="#2-3-3-锚点" class="headerlink" title="2.3.3 锚点"></a>2.3.3 锚点</h4><p><strong>名词解释：</strong><br>锚点是是网页制作中超级链接的一种，又叫命名锚记。命名锚记像一个迅速定位器一样是一种页面内的超级链接，运用相当普遍。<br>英文名：anchor<br>使用命名锚记可以在文档中设置标记，这些标记通常放在文档的特定主题处或顶部。然后可以创建到这些命名锚记的链接，这些链接可快速将访问者带到指定位置。<br>创建到命名锚记的链接的过程分为两步。首先，创建命名锚记，然后创建到该命名锚记的链接。</p><p><strong>语法说明：</strong><br>总之就是用于文章快速定位，点击目录便可直接跳转到指定位置。下面来介绍一下在MarkDown编辑器中怎么使用：</p><p>首先是建立一个跳转的连接。注意符号 # 和 target 参数要设置正确：<br><code>&lt;a href="#jump" target="_self"&gt;说明文字&lt;/a&gt;</code><br>然后标记要跳转到什么位置即可。文字颜色可随意设置，这里以红色为例：</p><p><span id="jump"><font color="red">跳转到这里：</font></span></p><h3 id="2-4-字体设置"><a href="#2-4-字体设置" class="headerlink" title="2.4 字体设置"></a>2.4 字体设置</h3><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过类似HTML的标记语法，它可以使普通文本内容具有一定的格式。但是它本身是不支持修改字体、字号与颜色等功能的！</p><p>CSDN-markdown编辑器是其衍生版本，扩展了Markdown的功能（如表格、脚注、内嵌HTML等等）！对，就是内嵌HTML，接下来要讲的功能就需要使用内嵌HTML的方法来实现。</p><p>字体，字号和颜色编辑如下代码</p><p><strong>语法说明：</strong></p><ul><li>字体：<code>&lt;font</code><strong>face</strong><code>= "</code>xxx<code>"&gt;我是</code>xxx<code>体字&lt;/font&gt;</code></li><li>字号：<code>&lt;font</code><strong>size</strong><code>=</code>xxx<code>&gt;我是</code>xxx<code>号字&lt;/font&gt;</code></li><li>颜色：<code>&lt;font</code><strong>color</strong><code>=</code>xxxx<code>&gt;我是</code>xxxx<code>色&lt;/font&gt;</code></li></ul><p><strong>显示效果如下：</strong></p><p><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="red">我是红色</font><br><font color="#008000">我是绿色</font><br><font color="Blue">我是蓝色</font><br><font size="5">我是5号字</font><br><font face="等线" color="green" size="5">我是等线字，绿色，字号5</font></p><p><font face="等线">我是等线</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#0099ff" size="7" face="YOUYUAN">color=#0099ff size=72 face=”幼圆”</font><br><font color="#00ffff" size="36">color=#00ffff 可以用十六位颜色值</font><br><font color="gray" size="36">color=gray 在这里也可以用已知的颜色名</font></p><h3 id="2-4-反斜杠转义"><a href="#2-4-反斜杠转义" class="headerlink" title="2.4 反斜杠转义"></a>2.4 反斜杠转义</h3><p>Markdown 中可以使用反斜杠转义 Markdown 语法符号为字面量. 例如, 如果你想用星号包围一个单词 (而不是 HTML 的<code>&lt;em&gt;</code>标签), 你可以在星号前面加<code>反斜杠(\)</code>, 就像这样:</p><pre><code>\*literal asterisks\*</code></pre><p><strong>显示效果如下：</strong></p><h3 id="2-5-特殊符号"><a href="#2-5-特殊符号" class="headerlink" title="2.5 特殊符号"></a>2.5 特殊符号</h3><p>‘<a href="https://unicode-table.com/cn/'" target="_blank" rel="noopener">https://unicode-table.com/cn/'</a></p><h3 id="2-6-添加背景色"><a href="#2-6-添加背景色" class="headerlink" title="2.6 添加背景色"></a>2.6 添加背景色</h3><p>Markdown本身不支持背景色设置，需要采用内置html的方式实现：借助 table, tr, td 等表格标签的 bgcolor 属性来实现背景色的功能。举例如下：</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">bgcolor</span><span class="token attr-value"><span class="token punctuation">=</span>orange</span><span class="token punctuation">></span></span>背景色是：orange<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code></pre><p><strong>显示效果如下：</strong></p><table><tbody><tr><td bgcolor="orange">背景色是：orange</td></tr></tbody></table><h3 id="2-7-emoji表情"><a href="#2-7-emoji表情" class="headerlink" title="2.7 emoji表情"></a>2.7 emoji表情</h3><h2 id="3-高级用法"><a href="#3-高级用法" class="headerlink" title="3 高级用法"></a>3 高级用法</h2><h3 id="3-1-Latex-数学公式"><a href="#3-1-Latex-数学公式" class="headerlink" title="3.1 Latex 数学公式"></a>3.1 Latex 数学公式</h3><p><strong>语法说明：</strong></p><ul><li>行内公式：使用两个”<code>$</code>”符号引用公式: <code>$公式$</code></li><li>行间公式：使用两对“<code>$$</code>”符号引用公式： <code>$$公式$$</code></li></ul><h3 id="3-2-Todo-List"><a href="#3-2-Todo-List" class="headerlink" title="3.2 Todo List"></a>3.2 Todo List</h3><p><strong>语法说明：</strong></p><pre><code>-[ ] 待办事项1-[ ] 待办事项2-[x] 已办事项1</code></pre><p><strong>显示效果如下：</strong></p><h3 id="3-3-绘制流程图"><a href="#3-3-绘制流程图" class="headerlink" title="3.3 绘制流程图"></a>3.3 绘制流程图</h3><p><strong>语法说明：</strong></p><p><strong>显示效果如下：</strong></p><h3 id="3-4-绘制甘特图"><a href="#3-4-绘制甘特图" class="headerlink" title="3.4 绘制甘特图"></a>3.4 绘制甘特图</h3><h3 id="3-5-绘制序列图"><a href="#3-5-绘制序列图" class="headerlink" title="3.5 绘制序列图"></a>3.5 绘制序列图</h3><h2 id="4-Markdown工具"><a href="#4-Markdown工具" class="headerlink" title="4 Markdown工具"></a>4 Markdown工具</h2><h3 id="4-1-快捷键"><a href="#4-1-快捷键" class="headerlink" title="4.1 快捷键"></a>4.1 快捷键</h3><h2 id="5-Markdown-的大大小小坑"><a href="#5-Markdown-的大大小小坑" class="headerlink" title="5 Markdown 的大大小小坑"></a>5 Markdown 的大大小小坑</h2><h3 id="5-1-Markdown版本演进"><a href="#5-1-Markdown版本演进" class="headerlink" title="5.1 Markdown版本演进"></a>5.1 Markdown版本演进</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190926201507.png" alt=""></p><h3 id="5-2-语法差异"><a href="#5-2-语法差异" class="headerlink" title="5.2 语法差异"></a>5.2 语法差异</h3><p>语法差异其实就是看支持的是 Markdown 的哪一种实现，以及对应的配置选择。好消息就是，通用的格式 CommonMark 里面基础的标记是都支持的，只是单纯文字和图片几乎是随处可用，样式一致。</p><p>有兴趣的话，可以看看这个开源项目，它统计了不同Markdown实现的33个版本差异：<br><a href="https://babelmark.github.io/faq/" target="_blank" rel="noopener">https://babelmark.github.io/faq/</a></p><p>举个例子：支持扩展效果不一致</p><p>最典型的就是表格和流程图了。大部分的实现都支持表格的功能，通过 Babelmark 3 可以看到 6 种转换后的 Html，如果表格里面还使用了加粗的话更是惨不忍睹，12 种效果任君猜测在不同网站显示，你绝对想不到的。</p><h3 id="5-3-显示效果"><a href="#5-3-显示效果" class="headerlink" title="5.3 显示效果"></a>5.3 显示效果</h3><p>这也是个天坑，辛苦的写好后，最终是需要面对读者的。引起的原因无非是实现的扩展功能不一致以及网站的 CSS 样式差异影响到了排版。</p><ul><li>实现的扩展功能不一致</li><li>CSS 样式差异影响</li><li>这时候就必须要关注效果了。有预览功能那是最好的，否则需要一次次的发布然后查看，修改。因此选择的工具和你发布的平台的兼容性问题就来了，最好是都是同一个核心源码的变种实现。</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Uncategorized </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Efficiency </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual Studio 最常用的快捷键</title>
      <link href="/2019/09/16/vs-keyboard-shortcuts/"/>
      <url>/2019/09/16/vs-keyboard-shortcuts/</url>
      
        <content type="html"><![CDATA[<h1 id="Visual-Studio-最常用的快捷键"><a href="#Visual-Studio-最常用的快捷键" class="headerlink" title="Visual Studio 最常用的快捷键"></a>Visual Studio 最常用的快捷键</h1><blockquote><p>Microsoft Visual Studio（简称VS）是微软公司的开发工具包系列产品。VS是一个基本完整的开发工具集，它包括了整个软件生命周期中所需要的大部分工具，如UML工具、代码管控工具、集成开发环境（IDE）等等。所写的目标代码适用于微软支持的所有平台，包括Microsoft Windows、Windows Phone、Windows CE、.NET Framework、.NET Compact Framework和Microsoft Silverlight。</p></blockquote><p>有这么一款强悍的IDE工具，再加上一些常用的快捷键，那工作效率地提升不止一点两点！</p><p>每次在网上搜关于VS有哪些常用快捷键的时候，出来的永远是一串长的不能再长的列表，完全没体现出“常用”二字，每次看完前面几个就看不下去了，相信大家都 有这种感觉。其实我们平时用的真的只有很少的一部分，借用一句“二八原则”——其中20%的常用快捷键就可以完成你80%的任务了，当然这里20%不准确，只是说明这样一个事实。下面是我平时用VS编程时真正用的比较多的快捷键，就这么十几个，看完毫无压力，多看几遍就能完全记住了<del>~</del>得意</p><p>当然每个人常用的一般都会有些不一样，欢迎大家评论说出自己常用或最常用的快捷键吧，比比看谁用的巧<del>~</del></p><p>ctrl+-（shift+ctrl+-）：移动光标到上次位置或相反，比如定位一个函数，转到函数定义后想回到函数使用处，则用ctrl+-，若又想回到函数定义处则可以按shift+ctrl+-<br>F12：Go to Definition，到变量或函数定义的地方，如变量声明处，函数实现处。与ctrl+-配合使用非常方便</p><p>Ctrl+]：匹配选中的括号（大括号、小括号都行），在多层循环+判断语句时非常方便</p><p>ctrl+Space：代码补全</p><p>ctrl+tab：在VS中切换打开的窗口，即切换各个文件</p><p>ctrl+I：递增搜索，与ctrl+F不同的是搜索期间不显示搜索对话框，且ctrl+F搜索下一个直接按Enter即可，而ctrl+I搜索下一个按ctrl+I或F3，Escape退出，连续按两次ctrl+I重复上次搜索<br>Ctrl+Shift+F：旧式的文件搜索对话框（与记事本中的搜索替换框差不多，可以替换）<br>Ctrl+F3：为当前选中的部分进行搜索（不需要再输入要搜索的内容）</p><p>Shift+Alt+Enter：最大化代码编写区域（代码全屏模式），即去掉所有其它辅助窗口只留下代码编写窗口，再按一次返回到原来界面</p><p>ctrl+K，Ctrl+C：注释一段代码块（先要选中一段代码）<br>ctrl+K，Ctrl+U：取消注释一段代码块<br>ctrl+K，Ctrl+D：代码自动格式化（整个文档）<br>ctrl+K，Ctrl+F：只格式化你选中的部分</p><p>Ctrl+K，Ctrl+K：在当前行创建一个书签<br>Ctrl+K, Ctrl+N：去下一个书签处</p><p>Ctrl+C, Ctrl+V：在当前行的下一行复制当前行内容（不用选中当前行），即复制当前行并粘贴到下一行，在两行内容差不多时很有用，可以先复制再改<br>Ctrl+L：删除当前行</p><p>Ctrl+M, Ctrl+M：展开或关闭当前的代码</p><ul><li>项目相关</li></ul><table><thead><tr><th align="left">项目相关</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left">Ctrl + Shift + B</td><td align="left">生成项目</td></tr><tr><td align="left">Ctrl + Alt + L</td><td align="left">显示Solution Explorer（解决方案资源管理器）</td></tr><tr><td align="left">Shift + Alt+ C</td><td align="left">添加新类</td></tr><tr><td align="left">Shift + Alt + A</td><td align="left">添加新项目到项目</td></tr></tbody></table><ul><li>编辑相关</li></ul><table><thead><tr><th align="left">编辑相关</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left">Ctrl + Enter</td><td align="left">在当前行插入空行</td></tr><tr><td align="left">Ctrl + Shift + Enter</td><td align="left">在当前行下方插入空行</td></tr><tr><td align="left">Ctrl +空格键</td><td align="left">使用IntelliSense（智能感知）自动完成</td></tr><tr><td align="left">Alt + Shift +箭头键(←,↑,↓,→)</td><td align="left">选择代码的自定义部分</td></tr><tr><td align="left">Ctrl + }</td><td align="left">匹配大括号、括号</td></tr><tr><td align="left">Ctrl + Shift +}</td><td align="left">在匹配的括号、括号内选择文本</td></tr><tr><td align="left">Ctrl + Shift + S</td><td align="left">保存所有文件和项目</td></tr><tr><td align="left">Ctrl + K，Ctrl + C</td><td align="left">注释选定行</td></tr><tr><td align="left">Ctrl + K，Ctrl + U</td><td align="left">取消选定行的注释</td></tr><tr><td align="left">Ctrl + K，Ctrl + D</td><td align="left">正确对齐所有代码</td></tr><tr><td align="left">Shift + End</td><td align="left">从头到尾选择整行</td></tr><tr><td align="left">Shift + Home</td><td align="left">从尾到头选择整行</td></tr><tr><td align="left">Ctrl + Delete</td><td align="left">删除光标右侧的所有字</td></tr></tbody></table><ul><li>导航相关</li></ul><table><thead><tr><th align="left">导航相关</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left">Ctrl +Up/Down</td><td align="left">滚动窗口但不移动光标</td></tr><tr><td align="left">Ctrl + -</td><td align="left">让光标移动到它先前的位置</td></tr><tr><td align="left">Ctrl ++</td><td align="left">让光标移动到下一个位置</td></tr><tr><td align="left">F12</td><td align="left">转到定义</td></tr></tbody></table><ul><li>调试相关</li></ul><table><thead><tr><th align="left">调试相关</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left">Ctrl + Alt + P</td><td align="left">附加到进程</td></tr><tr><td align="left">F10</td><td align="left">调试单步执行</td></tr><tr><td align="left">F5</td><td align="left">开始调试</td></tr><tr><td align="left">Shift + F5</td><td align="left">停止调试</td></tr><tr><td align="left">Ctrl + Alt + Q</td><td align="left">添加快捷匹配</td></tr><tr><td align="left">F9</td><td align="left">设置或删除断点</td></tr></tbody></table><ul><li>搜索相关</li></ul><table><thead><tr><th align="left">搜索相关</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left">Ctrl + K  Ctrl + K</td><td align="left">将当前行添加书签</td></tr><tr><td align="left">Ctrl + K  Ctrl + N</td><td align="left">导航至下一个书签</td></tr><tr><td align="left">Ctrl + .</td><td align="left">若键入一个类，名如<code>Collection&lt;string&gt;</code>，且命名空间导入不正确的话，那么这个快捷方式组合将自动插入导入</td></tr><tr><td align="left">Ctrl + Shift + F</td><td align="left">在文件中查找</td></tr><tr><td align="left">Shift  + F12</td><td align="left">查找所有引用</td></tr><tr><td align="left">Ctrl + F</td><td align="left">显示查找对话框</td></tr><tr><td align="left">Ctrl + H</td><td align="left">显示替换对话框</td></tr><tr><td align="left">Ctrl + G</td><td align="left">跳转到行号或行</td></tr><tr><td align="left">Ctrl + Shift + F</td><td align="left">查找所选条目在整个解决方案中的引用</td></tr></tbody></table><p>有这么一款强悍的IDE工具，再加上一些常用的快捷键，那工作效率地提升不止一点两点！</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Uncategorized </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Visual Studio </tag>
            
            <tag> Efficiency </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之等待</title>
      <link href="/2019/09/14/python-selenium-waiting/"/>
      <url>/2019/09/14/python-selenium-waiting/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之等待"><a href="#Python-Selenium-小技巧之等待" class="headerlink" title="Python + Selenium 小技巧之等待"></a>Python + Selenium 小技巧之等待</h1><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>在自动化测试过程中有一种情况很常见，明明你的定位没有问题，代码执行时却直接报了元素不可见。这时就需要考虑下是不是因为程序运行太快，或者由于页面加载太慢造成了元素还没出来就已经报错了。要知道浏览器的渲染加载比不上你代码执行的速度。<br><br><br>为了解决这种情况，就用到了等待，在Selenium中有三种等待方式，分别为强制等待、隐式等待、显式等待。</p><h3 id="强制等待"><a href="#强制等待" class="headerlink" title="强制等待"></a>强制等待</h3><p>第一种等待方式：强制等待，其实指的就是<code>time</code>模块的<code>sleep</code>，示例如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://HGzhao.github.io'</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 单位为秒(s)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h5 id="优缺点说明"><a href="#优缺点说明" class="headerlink" title="优缺点说明"></a>优缺点说明</h5><ul><li>优点<br>简单明了，需要等待的时候直接time.sleep()，等待的时长根据执行Case的需要来定。</li><li>缺点<br>不智能。若设置的时间短，元素还没有加载出来，照样会报错；若设置的时间过长，便会加长Case的执行时间，影响整体的运行速度。</li></ul><h3 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h3><p>第二种等待方式：隐式等待，使用的是<code>webdriver</code>中<code>implicitly_wait()</code>函数，示例如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>  browser<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 最长等待20秒  </span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://HGzhao.github.io'</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>这里有两点需要注意：</p><ol><li>隐式等待的设置时全局性的，在开头设置过之后，整个的程序运行过程中都会有效，都会等待页面加载完成；不需要每次设置一遍。</li><li>页面加载完成后新打开的弹窗是没有等待效果的。</li></ol><h5 id="优缺点说明-1"><a href="#优缺点说明-1" class="headerlink" title="优缺点说明"></a>优缺点说明</h5><ul><li>优点<br>相比sleep() ，隐性更加智能，它会在你设置的时间内判断网页是否加载完成，如果完成了，就进行下一步；在设置的时间内没有加载完成，则会报超时加载。</li><li>缺点<br>随着ajax技术的广泛应用，页面的元素往往都可以局部加载，也就是在整个页面没有加载完的时候，可能我们需要的元素已经加载完成了，那就么有必要再等待整个页面的加载。这就引出了第三种等待的方式—显式等待。</li></ul><h3 id="显式等待"><a href="#显式等待" class="headerlink" title="显式等待"></a>显式等待</h3><p>第三种等待方式：显式等待，使用的是<code>WebDriverWait</code>，配合该类的until()和until_not()方法，就能够根据判断条件而进行灵活地等待了。示例如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> WebDriverWait<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> ECbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.baidu.com"</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 为了更好的对比效果，首先我们设置了一个存在的元素，然后在去找一个不存在的元素，同样设置了10s的等待时间</span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># kw元素存在</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    element <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>browser<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"kw"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 不存在的kwqq元素</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    element <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>browser<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"kwqq"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>说明：<br>1、<code>until</code>也属于<code>WebDriverWait</code>，代表一直等待，直到某元素可见。而<code>until_not</code>与其相反，判断某个元素直到不存在。<br>2、<code>presence_of_element_located</code>主要判断页面元素kw在页面中存在。</p><h5 id="优缺点说明-2"><a href="#优缺点说明-2" class="headerlink" title="优缺点说明"></a>优缺点说明</h5><ul><li>优点<br>它会不断的根据你设定的条件去判断，直到超过你设置的等待时间，如果设置的条件满足，然后进行下一步操作。<br>如果没有满足会报一个<code>selenium.common.exceptions.TimeoutException: Message:</code>错误。</li></ul><h3 id="多种等待混合使用"><a href="#多种等待混合使用" class="headerlink" title="多种等待混合使用"></a>多种等待混合使用</h3><p>隐性等待和显性等待可以同时用，但要注意：等待的最长时间取两者之中的大者。示例如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>wait <span class="token keyword">import</span> WebDriverWait<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> Bybrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://HGzhao.github.io'</span><span class="token punctuation">)</span>locator <span class="token operator">=</span> <span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token string">'CSDN'</span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">:</span>    WebDriverWait<span class="token punctuation">(</span>browser<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span>locator<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'CSDN'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>    browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>我们在实际使用selenium或appium执行一些自动化操作时，对一个待定位元素的出现特别是web端加载的过程，等待是一种行之有效的方式。设置一种合理地等待方式，是保证脚本稳定有效运行的一个非常重要的手段。此外需要注意的是，对于元素的选择，最好将其独立封装成方法，在每个方法中可以加上日志、显式等待。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VS Code 快捷键最全攻略(附中文释义)</title>
      <link href="/2019/09/11/vscode-keyboard-shortcuts/"/>
      <url>/2019/09/11/vscode-keyboard-shortcuts/</url>
      
        <content type="html"><![CDATA[<h1 id="VS-Code-快捷键最全攻略-附中文释义"><a href="#VS-Code-快捷键最全攻略-附中文释义" class="headerlink" title="VS Code 快捷键最全攻略(附中文释义)"></a>VS Code 快捷键最全攻略(附中文释义)</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>Visual Studio Code（简称VS Code）是一个由微软开发，同时支持Windows 、 Linux和macOS等操作系统且开放源代码的代码编辑器，它支持测试，并内置了Git 版本控制功能，同时也具有开发环境功能，例如代码补全（类似于 IntelliSense）、代码片段和代码重构等，该编辑器支持用户个性化配置，例如改变主题颜色、键盘快捷方式等各种属性和参数，同时还在编辑器中内置了扩展程序管理的功能。</p><p>VS Code是介于<code>文本编辑器</code>与<code>IDE</code>之间的工具，我们可以通过这张图来了解VSCode的定位。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190922135830.jpg" alt=""></p><p>VSCode 的快捷键继承了一些IDE风格，有VS的影子，也有Emacs的影子……可以通过下面这张图来了解它的定位。简言之，内置快捷键玩熟了，对效率地提升不是一点两点。</p><p>以下是在Windows系统中VS code快捷键的最全说明，并附有对应的中文释义。</p><p>一点点地码出来，真心不易😅😅😅</p><h2 id="快捷键的组合方式"><a href="#快捷键的组合方式" class="headerlink" title="快捷键的组合方式"></a>快捷键的组合方式</h2><ul><li>Ctrl + Shift + ? : 这种常规组合按钮</li><li>Ctrl + V Ctrl + V : 同时依赖一个按键的组合</li><li>Shift + V c : 先组合后单键的输入</li><li>Ctrl + Click: 键盘 + 鼠标点击</li><li>Ctrl + DragMouse : 键盘 + 鼠标拖动</li></ul><h2 id="Keyboard-shortcuts-for-Windows"><a href="#Keyboard-shortcuts-for-Windows" class="headerlink" title="Keyboard shortcuts for Windows"></a>Keyboard shortcuts for Windows</h2><h3 id="General"><a href="#General" class="headerlink" title="General"></a>General</h3><table><thead><tr><th align="left">通用快捷键</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl+Shift+P</code>, <code>F1</code></td><td align="left">Show Command Palette</td><td align="left">展示全局命令面板</td></tr><tr><td align="left"><code>Ctrl + P</code></td><td align="left">Quick Open, Go to File…</td><td align="left">快速打开最近打开的文件</td></tr><tr><td align="left"><code>Ctrl + Shift + N</code></td><td align="left">New window/instance</td><td align="left">打开新的编辑器窗口</td></tr><tr><td align="left"><code>Ctrl + Shift + W</code></td><td align="left">Close window/instance</td><td align="left">关闭编辑器</td></tr><tr><td align="left"><code>Ctrl +,</code></td><td align="left">User Settings</td><td align="left">用户设置项</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+S</code></td><td align="left">Keyboard Shortcuts</td><td align="left">快捷键设置</td></tr></tbody></table><h3 id="Basic-editing"><a href="#Basic-editing" class="headerlink" title="Basic editing"></a>Basic editing</h3><table><thead><tr><th align="left">基础编辑</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + X</code></td><td align="left">Cut line (empty selection)</td><td align="left">剪切</td></tr><tr><td align="left"><code>Ctrl + C</code></td><td align="left">Copy line (empty selection)</td><td align="left">复制</td></tr><tr><td align="left"><code>Alt + ↑ / ↓</code></td><td align="left">Move line up/down</td><td align="left">移动行上下</td></tr><tr><td align="left"><code>Shift + Alt + ↓ / ↑</code></td><td align="left">Copy line up/down</td><td align="left">在当前行上下复制当前行</td></tr><tr><td align="left"><code>Ctrl + Shift + K</code></td><td align="left">Delete line</td><td align="left">删除行</td></tr><tr><td align="left"><code>Ctrl + Enter</code></td><td align="left">Insert line below</td><td align="left">在当前行下插入新的一行</td></tr><tr><td align="left"><code>Ctrl + Shift + Enter</code></td><td align="left">Insert line above</td><td align="left">在当前行上插入新的一行</td></tr><tr><td align="left"><code>Ctrl + Shift + |</code></td><td align="left">Jump to matching bracket</td><td align="left">匹配花括号的闭合处，跳转</td></tr><tr><td align="left"><code>Ctrl + ] / [</code></td><td align="left">Indent/outdent line</td><td align="left">行缩进</td></tr><tr><td align="left"><code>Ctrl + Shift + Enter</code></td><td align="left">Insert line above</td><td align="left">在当前行上插入新的一行</td></tr><tr><td align="left"><code>Home / End</code></td><td align="left">Go to beginning/end of line</td><td align="left">光标跳转到 行头/行尾</td></tr><tr><td align="left"><code>Ctrl + Home / End</code></td><td align="left">Go to beginning/end of file</td><td align="left">跳转到 页头/页尾</td></tr><tr><td align="left"><code>Ctrl+ ↑ / ↓</code></td><td align="left">Scroll line up/down</td><td align="left">行视图上下偏移</td></tr><tr><td align="left"><code>Alt+ PgUp / PgDown</code></td><td align="left">Scroll page up/down</td><td align="left">屏视图上下偏移</td></tr><tr><td align="left"><code>Ctrl + Shift + ] / [</code></td><td align="left">Unfold/Fold (uncollapse) region</td><td align="left">折叠/展开 区域代码</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+[</code></td><td align="left">Fold (collapse) all subregions</td><td align="left">折叠所有子区域代码</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+]</code></td><td align="left">Unfold (uncollapse) all subregions</td><td align="left">展开所有折叠的子区域代码</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+0</code></td><td align="left">Fold (collapse) all regions</td><td align="left">折叠所有区域代码</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+J</code></td><td align="left">Unfold (uncollapse) all regions</td><td align="left">展开所有折叠区域代码</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+C</code></td><td align="left">Add line comment</td><td align="left">添加行注释</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+U</code></td><td align="left">Remove line comment</td><td align="left">删除行注释</td></tr><tr><td align="left"><code>Ctrl + /</code></td><td align="left">Toggle line comment</td><td align="left">添加关闭行注释</td></tr><tr><td align="left"><code>Shift + Alt + A</code></td><td align="left">Toggle block comment</td><td align="left">块区域注释</td></tr><tr><td align="left"><code>Alt + Z</code></td><td align="left">Toggle word wrap</td><td align="left">添加关闭词汇包含</td></tr></tbody></table><h3 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h3><table><thead><tr><th align="left">导航</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + T</code></td><td align="left">Show all Symbols</td><td align="left">列出所有符号</td></tr><tr><td align="left"><code>Ctrl + G</code></td><td align="left">Go to Line…</td><td align="left">跳转行</td></tr><tr><td align="left"><code>Ctrl + P</code></td><td align="left">Go to File…</td><td align="left">跳转文件</td></tr><tr><td align="left"><code>Ctrl + Shift + O</code></td><td align="left">Go to Symbol…</td><td align="left">跳转到符号处</td></tr><tr><td align="left"><code>Ctrl + Shift + M</code></td><td align="left">Show Problems panel</td><td align="left">打开问题展示面板</td></tr><tr><td align="left"><code>F8</code></td><td align="left">Go to next error or warning</td><td align="left">跳转到下一个错误或者警告</td></tr><tr><td align="left"><code>Shift + F8</code></td><td align="left">Go to previous error or warning</td><td align="left">跳转到上一个错误或者警告</td></tr><tr><td align="left"><code>Ctrl + Shift + Tab</code></td><td align="left">Navigate editor group history</td><td align="left">切换到最近打开的文件</td></tr><tr><td align="left"><code>Alt+ ← / →</code></td><td align="left">Go back / forward</td><td align="left">向后、向前</td></tr><tr><td align="left"><code>Ctrl + M</code></td><td align="left">Toggle Tab moves focus</td><td align="left">进入用Tab来移动焦点</td></tr></tbody></table><h3 id="Search-and-replace"><a href="#Search-and-replace" class="headerlink" title="Search and replace"></a>Search and replace</h3><table><thead><tr><th align="left">查询与替换</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + F</code></td><td align="left">Find</td><td align="left">查询</td></tr><tr><td align="left"><code>Ctrl + H</code></td><td align="left">Replace</td><td align="left">替换</td></tr><tr><td align="left"><code>F3 / Shift + F3</code></td><td align="left">Find next/previous</td><td align="left">查询 下一个/上一个</td></tr><tr><td align="left"><code>Alt + Enter</code></td><td align="left">Select all occurences of Find match</td><td align="left">选中所有出现在查询中的</td></tr><tr><td align="left"><code>Ctrl + D</code></td><td align="left">Add selection to next Find match</td><td align="left">匹配当前选中的词汇或者行，再次选中-可操作</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+D</code></td><td align="left">Move last selection to next Find match</td><td align="left">移动当前选择到下个匹配选择的位置(光标选定)</td></tr><tr><td align="left"><code>Alt + C / R / W</code></td><td align="left">Toggle case-sensitive / regex / whole word</td><td align="left"></td></tr></tbody></table><h3 id="Multi-cursor-and-selection"><a href="#Multi-cursor-and-selection" class="headerlink" title="Multi-cursor and selection"></a>Multi-cursor and selection</h3><table><thead><tr><th align="left">多行光标操作于选择</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Alt + Click</code></td><td align="left">Insert cursor</td><td align="left">插入光标-支持多个</td></tr><tr><td align="left"><code>Ctrl+Alt+ ↑ / ↓</code></td><td align="left">Insert cursor above / below</td><td align="left">上下插入光标-支持多个</td></tr><tr><td align="left"><code>Ctrl + U</code></td><td align="left">Undo last cursor operation</td><td align="left">撤销最后一次光标操作</td></tr><tr><td align="left"><code>Shift + Alt + I</code></td><td align="left">Insert cursor at end of each line selected</td><td align="left">插入光标到选中范围内所有行结束符</td></tr><tr><td align="left"><code>Ctrl + I</code></td><td align="left">Select current line</td><td align="left">选中当前行</td></tr><tr><td align="left"><code>Ctrl + Shift + L</code></td><td align="left">Select all occurrences of current selection</td><td align="left">选择所有出现在当前选中的行-操作</td></tr><tr><td align="left"><code>Ctrl + F2</code></td><td align="left">Select all occurrences of current word</td><td align="left">选择所有出现在当前选中的词汇-操作</td></tr><tr><td align="left"><code>Shift + Alt + →</code></td><td align="left">Expand selection</td><td align="left">从光标处扩展选中全行</td></tr><tr><td align="left"><code>Shift + Alt + ←</code></td><td align="left">Shrink selection</td><td align="left">收缩选择区域</td></tr><tr><td align="left"><code>Shift + Alt + (drag mouse)</code></td><td align="left">Column (box) selection</td><td align="left">鼠标拖动区域，同时在多个行结束符插入光标</td></tr><tr><td align="left"><code>Ctrl + Shift + Alt + (arrow key)</code></td><td align="left">Column (box) selection</td><td align="left">也是插入多行光标的[方向键控制]</td></tr><tr><td align="left"><code>Ctrl + Shift + Alt + PgUp/PgDown</code></td><td align="left">Column (box) selection page up/down</td><td align="left">也是插入多行光标的[整屏生效]</td></tr></tbody></table><h3 id="Rich-languages-editing"><a href="#Rich-languages-editing" class="headerlink" title="Rich languages editing"></a>Rich languages editing</h3><table><thead><tr><th align="left">丰富的语言操作</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + Space</code></td><td align="left">Trigger suggestion</td><td align="left">输入建议[智能提示]</td></tr><tr><td align="left"><code>Ctrl + Shift + Space</code></td><td align="left">Trigger parameter hints</td><td align="left">参数提示</td></tr><tr><td align="left"><code>Shift + Alt + F</code></td><td align="left">Format document</td><td align="left">格式化代码</td></tr><tr><td align="left"><code>Ctrl + K Ctrl + F</code></td><td align="left">Format selection</td><td align="left">格式化选中部分的代码</td></tr><tr><td align="left"><code>F12</code></td><td align="left">Go to Definition</td><td align="left">跳转到定义处</td></tr><tr><td align="left"><code>Alt + F12</code></td><td align="left">Peek Definition</td><td align="left">代码片段显示定义</td></tr><tr><td align="left"><code>Ctrl + K F12</code></td><td align="left">Open Definition to the side</td><td align="left">在其他窗口打开定义处</td></tr><tr><td align="left"><code>Ctrl + .</code></td><td align="left">Quick Fix</td><td align="left">快速修复部分可以修复的语法错误</td></tr><tr><td align="left"><code>Shift + F12</code></td><td align="left">Show References</td><td align="left">显示所有引用</td></tr><tr><td align="left"><code>F2</code></td><td align="left">Rename Symbol</td><td align="left">重命名符号</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+X</code></td><td align="left">Trim trailing whitespace</td><td align="left">移除空白字符</td></tr><tr><td align="left"><code>Ctrl + K M</code></td><td align="left">Change file language</td><td align="left">更改页面文档格式</td></tr></tbody></table><h3 id="Editor-Window-management"><a href="#Editor-Window-management" class="headerlink" title="Editor/Window management"></a>Editor/Window management</h3><table><thead><tr><th align="left">编辑器/窗口管理</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + F4</code>, <code>Ctrl + W</code></td><td align="left">Close editor</td><td align="left">关闭编辑器</td></tr><tr><td align="left"><code>Ctrl + k F</code></td><td align="left">Close folder</td><td align="left">关闭当前打开的文件夹</td></tr><tr><td align="left"><code>Ctrl + |</code></td><td align="left">Split editor</td><td align="left">切割编辑窗口</td></tr><tr><td align="left"><code>Ctrl+ 1 / 2 / 3</code></td><td align="left">ocus into 1 st , 2 nd or 3 rd editor group</td><td align="left">切换焦点在不同的切割窗口</td></tr><tr><td align="left"><code>Ctrl+K Ctrl+ ←/→</code></td><td align="left">Focus into previous/next editor group</td><td align="left">切换焦点在不同的切割窗口</td></tr><tr><td align="left"><code>Ctrl + Shift + PgUp/PgDown</code></td><td align="left">Move editor left/right</td><td align="left">切换标签页的位置</td></tr><tr><td align="left"><code>Ctrl+K ← / →</code></td><td align="left">Move active editor group</td><td align="left">切割窗口位置调换</td></tr></tbody></table><h3 id="File-management"><a href="#File-management" class="headerlink" title="File management"></a>File management</h3><table><thead><tr><th align="left">文件管理</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + N</code></td><td align="left">New File</td><td align="left">新建文件</td></tr><tr><td align="left"><code>Ctrl + O</code></td><td align="left">Open File…</td><td align="left">打开文件</td></tr><tr><td align="left"><code>Ctrl + S</code></td><td align="left">Save</td><td align="left">保存文件</td></tr><tr><td align="left"><code>Ctrl + Shift + S</code></td><td align="left">Save As…</td><td align="left">另存为</td></tr><tr><td align="left"><code>Ctrl + K S</code></td><td align="left">Save All</td><td align="left">保存所有当前已经打开的文件</td></tr><tr><td align="left"><code>Ctrl + F4</code></td><td align="left">Close</td><td align="left">关闭当前编辑窗口</td></tr><tr><td align="left"><code>Ctrl + K Ctrl + W</code></td><td align="left">Close All</td><td align="left">关闭所有编辑窗口</td></tr><tr><td align="left"><code>Ctrl + Shift + T</code></td><td align="left">Reopen closed editor</td><td align="left">撤销最近关闭的一个文件编辑窗口</td></tr><tr><td align="left"><code>Ctrl + K Enter</code></td><td align="left">Keep preview mode editor open</td><td align="left">保持开启</td></tr><tr><td align="left"><code>Ctrl + Shift + Tab</code></td><td align="left">Open previous</td><td align="left">调出最近打开的文件列表，重复按会切换</td></tr><tr><td align="left"><code>Ctrl + Tab</code></td><td align="left">Open next</td><td align="left">与上面一致，顺序不一致</td></tr><tr><td align="left"><code>Ctrl + K P</code></td><td align="left">Copy path of active file</td><td align="left">复制当前打开文件的存放路径</td></tr><tr><td align="left"><code>Ctrl + K R</code></td><td align="left">Reveal active file in Explorer</td><td align="left">打开当前编辑文件存放位置【文件管理器】</td></tr><tr><td align="left"><code>Ctrl + K O</code></td><td align="left">Show active file in new window/instance</td><td align="left">在新的编辑器中打开当前编辑的文件</td></tr></tbody></table><h3 id="Display"><a href="#Display" class="headerlink" title="Display"></a>Display</h3><table><thead><tr><th align="left">显示</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>F11</code></td><td align="left">Toggle full screen</td><td align="left">切换全屏模式</td></tr><tr><td align="left"><code>Shift + Alt + 1</code></td><td align="left">Toggle editor layout (horizontal/vertical)</td><td align="left">切换编辑布局【目前无效】</td></tr><tr><td align="left"><code>Ctrl + =/-</code></td><td align="left">Zoom in/out</td><td align="left">放大 / 缩小</td></tr><tr><td align="left"><code>Ctrl + B</code></td><td align="left">Toggle Sidebar visibility</td><td align="left">侧边栏显示隐藏</td></tr><tr><td align="left"><code>Ctrl + Shift + E</code></td><td align="left">Show Explorer / Toggle focus</td><td align="left">资源视图和编辑视图的焦点切换</td></tr><tr><td align="left"><code>Ctrl + Shift + F</code></td><td align="left">Show Search</td><td align="left">打开全局搜索</td></tr><tr><td align="left"><code>Ctrl + Shift + G</code></td><td align="left">Show Source Control</td><td align="left">打开Git可视管理</td></tr><tr><td align="left"><code>Ctrl + Shift + D</code></td><td align="left">Show Debug</td><td align="left">打开DeBug面板</td></tr><tr><td align="left"><code>Ctrl + Shift + X</code></td><td align="left">Show Extensions</td><td align="left">打开插件市场面板</td></tr><tr><td align="left"><code>Ctrl + Shift + H</code></td><td align="left">Replace in files</td><td align="left">在当前文件替换查询替换</td></tr><tr><td align="left"><code>Ctrl + Shift + J</code></td><td align="left">Toggle Search details</td><td align="left">开启详细查询</td></tr><tr><td align="left"><code>Ctrl + Shift + U</code></td><td align="left">Show Output panel</td><td align="left"></td></tr><tr><td align="left"><code>Ctrl + Shift + V</code></td><td align="left">Open Markdown preview</td><td align="left">预览Markdown文件【编译后】</td></tr><tr><td align="left"><code>Ctrl + K v</code></td><td align="left">Open Markdown preview to the side</td><td align="left">在边栏打开渲染后的视图【新建】</td></tr><tr><td align="left"><code>Ctrl+K Z</code></td><td align="left">Zen Mode (Esc Esc to exit)</td><td align="left">禅模式</td></tr></tbody></table><h3 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h3><table><thead><tr><th align="left">调试</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>F9</code></td><td align="left">Toggle breakpoint</td><td align="left">添加解除断点</td></tr><tr><td align="left"><code>F5</code></td><td align="left">Start/Continue</td><td align="left">启动调试、继续</td></tr><tr><td align="left"><code>Shift + F5</code></td><td align="left">Stop</td><td align="left">结束调试</td></tr><tr><td align="left"><code>F11 / Shift + F11</code></td><td align="left">Step into/out</td><td align="left">单步进入 / 单步跳出</td></tr><tr><td align="left"><code>F10</code></td><td align="left">Step over</td><td align="left">单步跳过</td></tr><tr><td align="left"><code>Ctrl + K Ctrl + I</code></td><td align="left">Show hover</td><td align="left">显示悬浮</td></tr></tbody></table><h3 id="Integrated-terminal"><a href="#Integrated-terminal" class="headerlink" title="Integrated terminal"></a>Integrated terminal</h3><table><thead><tr><th align="left">终端集成</th><th align="left">作用</th><th align="left">中文释义</th></tr></thead><tbody><tr><td align="left"><code>Ctrl + \</code>`</td><td align="left">Show integrated terminal</td><td align="left">打开集成终端</td></tr><tr><td align="left"><code>Ctrl + Shift + \</code>`</td><td align="left">Create new terminal</td><td align="left">创建一个新的终端</td></tr><tr><td align="left"><code>Ctrl + C</code></td><td align="left">Copy selection</td><td align="left">复制所选</td></tr><tr><td align="left"><code>Ctrl + V</code></td><td align="left">Paste into active terminal</td><td align="left">复制到当前激活的终端</td></tr><tr><td align="left"><code>Ctrl+ ↑ / ↓</code></td><td align="left">Scroll up/down</td><td align="left">按行进行上下翻</td></tr><tr><td align="left"><code>Shift+PgUp / PgDn</code></td><td align="left">Scroll page up/down</td><td align="left">页面上下翻屏</td></tr><tr><td align="left"><code>Ctrl+Home / End</code></td><td align="left">Scroll to top/bottom</td><td align="left">滚动到页面头部或尾部</td></tr></tbody></table><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>最后附上官方给出的快捷键排版图片<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190913222047.png" alt=""></p><p>以上这些快捷键，仅是针对于Windows系统来做的说明。至于Linux及MacOS系统中VS Code的键盘快捷键和附加功能，详见<a href="aka.ms/vscodekeybindings">aka.ms/vscodekeybindings</a>说明。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Uncategorized </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Efficiency </tag>
            
            <tag> Windows </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之清空输入框文字</title>
      <link href="/2019/09/04/python-selenium-qing-kong-shu-ru-kuang-wen-zi/"/>
      <url>/2019/09/04/python-selenium-qing-kong-shu-ru-kuang-wen-zi/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之清空输入框文字"><a href="#Python-Selenium-小技巧之清空输入框文字" class="headerlink" title="Python + Selenium 小技巧之清空输入框文字"></a>Python + Selenium 小技巧之清空输入框文字</h1><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190908221123.gif" alt=""></p><h4 id="思路一：直接使用clear-方法删除文字"><a href="#思路一：直接使用clear-方法删除文字" class="headerlink" title="思路一：直接使用clear()方法删除文字"></a>思路一：直接使用<code>clear()</code>方法删除文字</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span> browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>baidu_input <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span>baidu_input<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"Python Selenium"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">:</span>    baidu_input<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Passed: Clear Success"</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Failed"</span><span class="token punctuation">,</span> format<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="思路二：模拟键盘操作使用全选退格删除文字"><a href="#思路二：模拟键盘操作使用全选退格删除文字" class="headerlink" title="思路二：模拟键盘操作使用全选退格删除文字"></a>思路二：模拟键盘操作使用全选退格删除文字</h4><p>从用户操作出发，若想清除一个输入框中已存在的文字该怎么操作。我会使用<code>Ctrl + A</code>快捷键对输入框的内容进行全选，然后使用退格键，即可清空。 </p><p>在<code>selenium</code>中就为我们提供了一个<code>Keys</code>类，其中提供了很多常用的特殊按键。我们将其导入，看看使用它们是怎么来清除文字的。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keysbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span> browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>baidu_input <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"kw"</span><span class="token punctuation">)</span>baidu_input<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"Python Selenium"</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">:</span>    baidu_input<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL <span class="token operator">+</span> <span class="token string">'a'</span><span class="token punctuation">)</span>    baidu_input<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>BACKSPACE<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Passed: Clear Success"</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Failed"</span><span class="token punctuation">,</span> format<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python + Selenium 小技巧之切换浏览器窗口</title>
      <link href="/2019/08/29/python-selenium-qie-huan-liu-lan-qi-chuang-kou/"/>
      <url>/2019/08/29/python-selenium-qie-huan-liu-lan-qi-chuang-kou/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Selenium-小技巧之切换浏览器窗口"><a href="#Python-Selenium-小技巧之切换浏览器窗口" class="headerlink" title="Python + Selenium 小技巧之切换浏览器窗口"></a>Python + Selenium 小技巧之切换浏览器窗口</h1><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190908221124.gif" alt=""></p><p>浏览器大多页面中的链接，点击后就会打开一个新的窗口，这时就需要把窗口切换过去，才能继续执行相关的操作。</p><p>这里为了演示方便，我们预先通过执行js来新建出几个窗口。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>js <span class="token operator">=</span> <span class="token string">'window.open("https://cn.bing.com/");'</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span></code></pre><p>因为每个窗口都有一个<strong>句柄(handle)</strong>，代表当前窗口，需要操作哪个页面的窗口，切换到窗口对应的句柄。</p><h4 id="思路一：通过句柄来切换窗口"><a href="#思路一：通过句柄来切换窗口" class="headerlink" title="思路一：通过句柄来切换窗口"></a>思路一：通过句柄来切换窗口</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 在当前浏览器中访问网易邮箱</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.126.com'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 新开一个窗口，通过执行js来新开一个窗口</span>js <span class="token operator">=</span> <span class="token string">'window.open("https://cn.bing.com/");'</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 输出当前窗口句柄（网易邮箱）</span>Netease_handle <span class="token operator">=</span> browser<span class="token punctuation">.</span>current_window_handle<span class="token comment" spellcheck="true"># 获取当前窗口句柄集合（列表类型）</span>handles <span class="token operator">=</span> browser<span class="token punctuation">.</span>window_handles<span class="token keyword">print</span><span class="token punctuation">(</span>handles<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出句柄集合</span><span class="token comment" spellcheck="true"># ['CDwindow-E9B85270B51D42AF7369D81B9AA70FFE',</span><span class="token comment" spellcheck="true"># 'CDwindow-90004FD79A0F59EE057846B34D0E7327']</span><span class="token comment" spellcheck="true"># 获取必应窗口</span>bing_handle <span class="token operator">=</span> None<span class="token keyword">for</span> handle <span class="token keyword">in</span> handles<span class="token punctuation">:</span>    <span class="token keyword">if</span> handle <span class="token operator">!=</span> Netease_handle<span class="token punctuation">:</span>        bing_handle <span class="token operator">=</span> handle<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'switch to '</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 输出当前窗口句柄（必应）</span>browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>Netease_handle<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 关闭当前窗口（必应）</span><span class="token comment" spellcheck="true"># 切换回网易邮箱窗口</span>browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>bing_handle<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="思路二：根据浏览器页签title进行窗口切换"><a href="#思路二：根据浏览器页签title进行窗口切换" class="headerlink" title="思路二：根据浏览器页签title进行窗口切换"></a>思路二：根据浏览器页签<code>title</code>进行窗口切换</h4><p>其实这种方法也用到了句柄，与前面不同的是，这里使用了浏览器页签的<code>title</code>。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverbrowser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 在当前浏览器中访问网易邮箱</span>browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.126.com'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 新打开两个窗口</span>js <span class="token operator">=</span> <span class="token string">'window.open("https://www.qq.com/");'</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>js <span class="token operator">=</span> <span class="token string">'window.open("https://cn.bing.com/");'</span>browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 拿到所有的窗口</span>allHandles <span class="token operator">=</span> browser<span class="token punctuation">.</span>window_handles<span class="token comment" spellcheck="true"># 根据窗口的title进行URL切换</span><span class="token keyword">for</span> handle <span class="token keyword">in</span> allHandles<span class="token punctuation">:</span>    <span class="token keyword">if</span> browser<span class="token punctuation">.</span>title<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"腾讯"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>        browser<span class="token punctuation">.</span>switch_to_window<span class="token punctuation">(</span>handle<span class="token punctuation">)</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>注：在<code>find()</code>方法中填写的Title，只需填入浏览器页签的部分Title内容即可。例如本例中为了切换至<code>https://www.qq.com/</code>页面，其全称实际是<code>腾讯首页</code>，但这里只输入<code>腾讯</code>即可。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/08/21/hello-world/"/>
      <url>/2019/08/21/hello-world/</url>
      
        <content type="html"><![CDATA[<p>From WordPress to Hexo. Let’s start from scratch, Hello Hexo, Hello World!</p><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! </p><p>You can check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Uncategorized </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之制作个性微信好友墙</title>
      <link href="/2019/07/15/pythonapps-wechat-photo-wall/"/>
      <url>/2019/07/15/pythonapps-wechat-photo-wall/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之制作个性微信好友墙"><a href="#Python小应用系列之制作个性微信好友墙" class="headerlink" title="Python小应用系列之制作个性微信好友墙"></a>Python小应用系列之制作个性微信好友墙</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>前段时间，微信朋友圈开始出现了一种晒照片新形式，微信好友墙，即在一张大图片中展示出自己的所有微信好友的头像。</p><p>效果如下图，出于隐私考虑，这里作了模糊处理。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118092124.png" alt=""></p><p>是不是很炫，而且这还是独一无二的，毕竟每个人的微信好友是不一样的。本文就教大家用Python来实现这种效果。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.3</p><h2 id="2-代码实现"><a href="#2-代码实现" class="headerlink" title="2 代码实现"></a>2 代码实现</h2><p>我们需要首先需要获取好友的头像信息，接下来处理图像并完成图像的拼接。</p><h3 id="2-0-准备工作"><a href="#2-0-准备工作" class="headerlink" title="2.0 准备工作"></a>2.0 准备工作</h3><p>在这里，我们登录微信获取好友信息，使用的是 wxpy 模块；处理并生成最终的图像借助 PIL 模块。因为都是第三方模块，如环境中没有可以使用 pip 进行安装。另外涉及路径的处理等，我们需要导入 os 模块和 sys 模块。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> wxpy <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> PIL<span class="token punctuation">.</span>Image <span class="token keyword">as</span> Image<span class="token keyword">import</span> os<span class="token keyword">import</span> sys</code></pre><h3 id="2-1-获取并存储好友头像信息"><a href="#2-1-获取并存储好友头像信息" class="headerlink" title="2.1 获取并存储好友头像信息"></a>2.1 获取并存储好友头像信息</h3><p>我们要获取微信好友的头像，首先需要登录微信</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 初始化机器人，扫码登陆微信，适用于Windows系统</span>bot <span class="token operator">=</span> Bot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># # Linux系统，执行登陆请调用下面的这句</span><span class="token comment" spellcheck="true"># bot = Bot(console_qr=2, cache_path="botoo.pkl"</span></code></pre><p>在获取好友头像信息之前，我们得先在本地创建一个目录，用于后续存储好友头像的文件。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 获取当前路径信息</span>curr_dir <span class="token operator">=</span> get_dir<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 如果FriendImgs目录不存在就创建一个</span><span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"FriendImgs/"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"FriendImgs/"</span><span class="token punctuation">)</span></code></pre><p>接下来就是获取友头像信息，并将其存储在本地创建的目录中。</p><pre class=" language-python"><code class="language-python">my_friends <span class="token operator">=</span> bot<span class="token punctuation">.</span>friends<span class="token punctuation">(</span>update<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取好友头像信息并存储在FriendImgs目录中</span>n <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> friend <span class="token keyword">in</span> my_friends<span class="token punctuation">:</span>    friend<span class="token punctuation">.</span>get_avatar<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"FriendImgs/"</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".jpg"</span><span class="token punctuation">)</span>    n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span></code></pre><p>这时你就可以在本地FriendImgs文件夹中，看到保存下来的微信好友头像的图片。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118092150.png" alt=""></p><h3 id="2-2-生成微信好友墙"><a href="#2-2-生成微信好友墙" class="headerlink" title="2.2 生成微信好友墙"></a>2.2 生成微信好友墙</h3><p>制作微信好友墙，就像以前的大字报，把我们下载的好友头像逐一贴上去即可。</p><p>首先设定好微信好友墙的尺寸，使用 Image.new() 方法。</p><pre class=" language-python"><code class="language-python">image <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">"RGB"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>接下来，我们需要逐个打开微信好友的图片，使用 Image.open() 方法。</p><pre class=" language-python"><code class="language-python">img <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"FriendImgs/"</span> <span class="token operator">+</span> file_names<span class="token punctuation">)</span></code></pre><p>将微信头像图片，重置为50*50像素尺寸的小图，使用 img.resize() 方法。</p><pre class=" language-python"><code class="language-python">img <span class="token operator">=</span> img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span></code></pre><p>然后将图片黏贴到我们的照片墙中，使用 image.paste() 方法。</p><pre class=" language-python"><code class="language-python">image<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> y <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>最后将制作完成的照片墙保存下来，使用 image.save() 方法。</p><pre class=" language-python"><code class="language-python">img <span class="token operator">=</span> image<span class="token punctuation">.</span>save<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"WeChat_Friends.jpg"</span><span class="token punctuation">)</span></code></pre><p>现在我们将本小节中代码整合到一起，如下所示：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 准备生成微信好友头像墙的尺寸</span>image <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">"RGB"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定义初始图片的位置</span>x <span class="token operator">=</span> <span class="token number">0</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token comment" spellcheck="true"># 获取下载的头像文件</span>curr_dir <span class="token operator">=</span> get_dir<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ls <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">'FriendImgs'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 遍历文件夹的图片</span><span class="token keyword">for</span> file_names <span class="token keyword">in</span> ls<span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 依次打开图片</span>        img <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"FriendImgs/"</span> <span class="token operator">+</span> file_names<span class="token punctuation">)</span>    <span class="token keyword">except</span> IOError<span class="token punctuation">:</span>        <span class="token keyword">continue</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 重新设置图片的大小</span>        img <span class="token operator">=</span> img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 将图片粘贴到最终的照片墙上</span>        image<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> y <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 设置每一行排13个图像</span>        x <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">:</span>            x <span class="token operator">=</span> <span class="token number">0</span>            y <span class="token operator">+=</span> <span class="token number">1</span><span class="token comment" spellcheck="true"># 保存图片为WeChat_Friends.jpg       </span>img <span class="token operator">=</span> image<span class="token punctuation">.</span>save<span class="token punctuation">(</span>curr_dir <span class="token operator">+</span> <span class="token string">"WeChat_Friends.jpg"</span><span class="token punctuation">)</span></code></pre><p>代码执行后，最终生成的效果图如下：</p><p>(这里展示的图片做了模糊处理)</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118092244.png" alt=""></p><h2 id="3-后记"><a href="#3-后记" class="headerlink" title="3 后记"></a>3 后记</h2><p>本文中设定照片墙尺寸为650*650，而好友头像尺寸为50*50，这样最终制作成的照片墙每行有13位好友，共计容纳13*13位好友。大家可根据自己实际情况，自行调整尺寸参数，以达到最佳效果。大家赶快去生成自己独一无二的照片墙吧~！</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Wechat_Photo_Wall/Wechat_Photo_Wall.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之用Python分析并预测双色球</title>
      <link href="/2019/07/08/pythonapps-ssq-predict/"/>
      <url>/2019/07/08/pythonapps-ssq-predict/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之用Python分析并预测双色球"><a href="#Python小应用系列之用Python分析并预测双色球" class="headerlink" title="Python小应用系列之用Python分析并预测双色球"></a>Python小应用系列之用Python分析并预测双色球</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>上周被一则新闻震惊到了，《2454万元大奖无人认领！福彩史上第二大弃奖在广东中山产生 》，在2019年5月2日开奖的双色球中，广东中山一位彩民博中2454万元，兑奖时间截至2019年7月1日。令人遗憾的是，中奖者最终未现身领奖，2454万元大奖成为弃奖。经中山市福彩中心查证，这是中国福彩史上金额第二大的弃奖。根据《彩票管理条例实施细则》的有关规定，这次的2454万元弃奖奖金将被纳入彩票公益金。</p><p>一直在为福彩做贡献的我，啥时候能摊上这样的好事啊。于是我用Python生成了一组双色球的号码……</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.3</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>随机生成一组双色球的号码，我们可以借助random函数，如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> random<span class="token keyword">def</span> <span class="token function">ball</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    ball_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>        a<span class="token operator">=</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> a <span class="token operator">not</span> <span class="token keyword">in</span> ball_list<span class="token punctuation">:</span>            ball_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">)</span>        <span class="token keyword">if</span> len<span class="token punctuation">(</span>ball_list<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">:</span>            <span class="token keyword">break</span>    ball_list<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>    ball_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>ball_list<span class="token punctuation">)</span>ball<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>但要知道，这么搞的话，丝毫不会有什么中奖的，因为太随机了……</p><p>经历过高考的人，肯定都知道三年模拟五年高考。要知道彩票中奖概率很低的，所以我们在这里先分析下历年的数据，借助往年的数据来“精准”地推算下一期中奖号码。</p><p>我们通过这个网站来查询彩票的历史开奖信息。</p><pre><code>http://kaijiang.zhcw.com/zhcw/html/ssq/list_1.html</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194140.png" alt=""></p><p>我们点击下一页，看看网址链接是否有规律</p><pre><code>http://kaijiang.zhcw.com/zhcw/html/ssq/list_1.htmlhttp://kaijiang.zhcw.com/zhcw/html/ssq/list_2.htmlhttp://kaijiang.zhcw.com/zhcw/html/ssq/list_3.htmlhttp://kaijiang.zhcw.com/zhcw/html/ssq/list_4.htmlhttp://kaijiang.zhcw.com/zhcw/html/ssq/list_5.html</code></pre><p>不难发现，可以将目标网址拆分如下：</p><pre class=" language-python"><code class="language-python">url_part <span class="token operator">=</span> <span class="token string">'http://kaijiang.zhcw.com/zhcw/html/ssq/list'</span>url <span class="token operator">=</span> url_part <span class="token operator">+</span> <span class="token string">'_'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.html'</span></code></pre><p>而 i 对应的正好是页码信息，我们借助<code>F12</code>开发调试工具，来看看页数的信息怎么获取：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194127.png" alt=""></p><p>记录下这里的元素信息。</p><p>接下来，我们需要抓取每一页中的具体开奖信息。 我们继续通过开发者工具分析出每期开奖信息。</p><p>我们依次记录下每期的开奖日期对应的元素信息：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194116.png" alt=""></p><p>开奖的批次对应的元素信息：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194133.png" alt=""></p><p>中奖号码对应的元素信息：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194131.png" alt=""></p><p>有了这些元素信息之后，接下来就是代码的具体实现。</p><h2 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3 代码实现"></a>3 代码实现</h2><p>在这里，我们获取网页的请求使用 requests 模块；解析网址借助 beautifulsoup4 模块。因为都是第三方模块，如环境中没有可以使用 pip 进行安装。</p><pre class=" language-python"><code class="language-python">pip install requestspip install beautifulsoup4pip install lxml</code></pre><p>模块安装好之后，进行导入</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup</code></pre><p>我们需要先在首页中，拿到页数信息</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 发起请求</span>basic_url <span class="token operator">=</span> <span class="token string">'http://kaijiang.zhcw.com/zhcw/html/ssq/list_1.html'</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36'</span><span class="token punctuation">}</span>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>basic_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>response<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>htm <span class="token operator">=</span> response<span class="token punctuation">.</span>text<span class="token comment" spellcheck="true"># 解析内容</span>soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>htm<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取页数信息</span>page <span class="token operator">=</span> int<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"pg"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span></code></pre><p>接下来，我们就可以根据规律组装好我们的URL：</p><pre class=" language-python"><code class="language-python">url_part <span class="token operator">=</span> <span class="token string">'http://kaijiang.zhcw.com/zhcw/html/ssq/list'</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> url_part <span class="token operator">+</span> <span class="token string">'_'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.html'</span></code></pre><p>拿组装后的url发起请求，并获取每页中各期的开奖信息：</p><pre class=" language-python"><code class="language-python">res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>res<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>context <span class="token operator">=</span> res<span class="token punctuation">.</span>textsoups <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span><span class="token keyword">if</span> soups<span class="token punctuation">.</span>table <span class="token keyword">is</span> None<span class="token punctuation">:</span>    <span class="token keyword">continue</span><span class="token keyword">elif</span> soups<span class="token punctuation">.</span>table<span class="token punctuation">:</span>    table_rows <span class="token operator">=</span> soups<span class="token punctuation">.</span>table<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> row_num <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>table_rows<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        row_tds <span class="token operator">=</span> table_rows<span class="token punctuation">[</span>row_num<span class="token punctuation">]</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">)</span>        ems <span class="token operator">=</span> row_tds<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'em'</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> row_tds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string <span class="token operator">+</span><span class="token string">', '</span><span class="token operator">+</span> row_tds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string <span class="token operator">+</span><span class="token string">', '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token operator">+</span><span class="token string">', '</span><span class="token operator">+</span>ems<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string        <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre><p>这样，我们就完成了对每一页中各期开奖数据的获取。获取的数据可以保存在本地。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">save_to_file</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'ssq.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span></code></pre><p>我们在获取每期的开奖数据的同时，记录下红蓝球出现的号码信息。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 定义两个变量, 用于记录历史开奖信息中的红球、蓝球号码信息</span>red_num <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> blue_num <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球1</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球2</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球3</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球4</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球5</span>red_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 红色球6</span>blue_num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ems<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 蓝色球</span></code></pre><p>统计出各个号码出现次数信息：</p><pre class=" language-python"><code class="language-python">red_count <span class="token operator">=</span> Counter<span class="token punctuation">(</span>red_num<span class="token punctuation">)</span>blue_count <span class="token operator">=</span> Counter<span class="token punctuation">(</span>blue_num<span class="token punctuation">)</span></code></pre><p>接下来我们可以根据红蓝号码出现的频率进行排序，并推测出几组双色球号码信息：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 按照出现频率顺序</span>red_sorted <span class="token operator">=</span> sorted<span class="token punctuation">(</span>red_count<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>blue_sorted <span class="token operator">=</span> sorted<span class="token punctuation">(</span>blue_count<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>red <span class="token operator">=</span> red_sorted<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>blue <span class="token operator">=</span> blue_sorted<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>red <span class="token operator">=</span> list<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">)</span>blue <span class="token operator">=</span> list<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> blue<span class="token punctuation">)</span><span class="token punctuation">)</span>red<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>blue<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'号码高频-1注：'</span><span class="token operator">+</span>str<span class="token punctuation">(</span>red<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' | '</span><span class="token operator">+</span>blue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'号码高频-2注：'</span><span class="token operator">+</span>str<span class="token punctuation">(</span>red<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' | '</span><span class="token operator">+</span>blue<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'号码高频-3注：'</span><span class="token operator">+</span>str<span class="token punctuation">(</span>red<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' | '</span><span class="token operator">+</span>blue<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>当然了，也可以输出反序输出，中奖号码出现频率较低的几组，只需要设置<code>reverse=True</code>即可。</p><h2 id="4-后记"><a href="#4-后记" class="headerlink" title="4 后记"></a>4 后记</h2><p>这里根据蓝色球各号码出现的次数，作了张直方图，可以很直观到蓝色球各号码出现的频率。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194113.png" alt=""></p><p>有人会问了，这样预测出的中奖号码，中奖概率究竟有多大呢？这个，我可说不清楚，只有买了才会知道，小心错过一个亿哟！</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/SSQ_Predict/ssq_predict.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之我在B站学会了垃圾分类</title>
      <link href="/2019/07/01/pythonapps-garbage-classification/"/>
      <url>/2019/07/01/pythonapps-garbage-classification/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之我在B站学会了垃圾分类"><a href="#Python小应用系列之我在B站学会了垃圾分类" class="headerlink" title="Python小应用系列之我在B站学会了垃圾分类"></a>Python小应用系列之我在B站学会了垃圾分类</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>纸巾再湿也是干垃圾？瓜子皮再干也是湿垃圾？？最近大家都被垃圾分类折磨得不行不行的，傻傻的是否拎得清？🤷‍️🤷‍🤣🤣自2019.07.01开始，上海已率先实施垃圾分类制度，违反规定的还会面临罚款。</p><p>为了避免巨额损失，我决定来b站学习下垃圾分类的技巧。为什么要来b站，听说这可是当下年轻人最流行的学习途径之一。</p><p>打开b站，搜索了下垃圾分类，上来就被这个标题吓(吸)到(引)了：在上海丢人的正确姿势。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192103.png" alt=""></p><p>当然，这里的丢人非彼丢人，指的是丢垃圾的丢。</p><p>点开发现，原来是一段对口相声啊，还是两个萌妹子(AI)的对口相声，瞬间就来了兴趣，阐述的是关于如何进行垃圾分类的。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192128.png" alt=""><br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192159.png" alt=""><br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192229.png" alt=""></p><p>原视频链接：<a href="https://www.bilibili.com/video/av57129646?from=search&amp;seid=9101123388170190749" target="_blank" rel="noopener">https://www.bilibili.com/video/av57129646?from=search&amp;seid=9101123388170190749</a></p><p>看完一遍又一遍，简直停不下来了，已经开启了洗脑模式，毕竟视频很好玩，视频中的弹幕更是好玩！</p><p>独乐乐不如众乐乐，且不如用Python把弹幕保存下来，做个词云图？就这么愉快地决定了！</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.3</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>我们先需要通过<code>F12</code>开发调试工具，查询这条视频的弹幕的 cid 数据。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192254.png" alt=""></p><p>拿到 cid 之后，再填入下面的链接中。</p><pre><code>http://comment.bilibili.com/{cid}.xml</code></pre><p>打开之后，就可以看到该视频的弹幕列表。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192313.png" alt=""></p><p>有了弹幕数据后，我们需要先将解析好，并保存在本地，方便进一步的加工处理，如制成词云图进行展示。</p><h2 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3 代码实现"></a>3 代码实现</h2><p>在这里，我们获取网页的请求使用 requests 模块；解析网址借助 beautifulsoup4 模块；保存为CSV数据，这里借用 pandas 模块。因为都是第三方模块，如环境中没有可以使用 pip 进行安装。</p><pre class=" language-python"><code class="language-python">pip install requestspip install beautifulsoup4pip install lxmlpip install pandas</code></pre><p>模块安装好之后，进行导入</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd</code></pre><p>请求、解析、保存弹幕数据</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 请求弹幕数据</span>url <span class="token operator">=</span> <span class="token string">'http://comment.bilibili.com/99768393.xml'</span>html <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token comment" spellcheck="true"># 解析弹幕数据</span>html_data <span class="token operator">=</span> str<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>bs4 <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_data<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>results <span class="token operator">=</span> bs4<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span>comments <span class="token operator">=</span> <span class="token punctuation">[</span>comment<span class="token punctuation">.</span>text <span class="token keyword">for</span> comment <span class="token keyword">in</span> results<span class="token punctuation">]</span>comments_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'comments'</span><span class="token punctuation">:</span> comments<span class="token punctuation">}</span><span class="token comment" spellcheck="true"># 将弹幕数据保存在本地</span>br <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>comments_dict<span class="token punctuation">)</span>br<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'barrage.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span></code></pre><p>接下来，我们就对保存好的弹幕数据进行深加工。</p><p>制作词云，我们需要用到 wordcloud 模块、matplotlib 模块、jieba 模块，同样都是第三方模块，直接用 pip 进行安装。</p><pre class=" language-python"><code class="language-python">pip install wordcloudpip install matplotlibpip install jieba</code></pre><p>模块安装好之后，进行导入，因为我们读取文件用到了 panda 模块，所以一并导入即可</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud<span class="token punctuation">,</span> ImageColorGenerator<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> jieba</code></pre><p>我们可以自行选择一张图片，并基于此图片来生成一张定制的词云图。我们可以自定义一些词云样式，代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 解析背景图片</span>mask_img <span class="token operator">=</span> plt<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'Bulb.jpg'</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">'''设置词云样式'''</span>wc <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>    <span class="token comment" spellcheck="true"># 设置字体  </span>    font_path<span class="token operator">=</span><span class="token string">'SIMYOU.TTF'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 允许最大词汇量</span>    max_words <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置最大号字体大小</span>    max_font_size <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置使用的背景图片</span>    mask <span class="token operator">=</span> mask_img<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置输出的图片背景色</span>    background_color<span class="token operator">=</span>None<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"RGBA"</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置有多少种随机生成状态，即有多少种配色方案</span>    random_state<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span></code></pre><p>接下来，我们要读取文本信息（弹幕数据），进行分词并连接起来：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 读取文件内容</span>br <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'barrage.csv'</span><span class="token punctuation">,</span> header<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 进行分词，并用空格连起来</span>text <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> line <span class="token keyword">in</span> br<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    text <span class="token operator">+=</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>line<span class="token punctuation">,</span> cut_all<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>最后制作词云并将生成的词云保存下来：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 生成词云</span>wc<span class="token punctuation">.</span>generate_from_text<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#改变字体颜色</span>img_colors <span class="token operator">=</span> ImageColorGenerator<span class="token punctuation">(</span>mask_img<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#字体颜色为背景图片的颜色</span>wc<span class="token punctuation">.</span>recolor<span class="token punctuation">(</span>color_func<span class="token operator">=</span>img_colors<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 显示词云图</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wc<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 关闭坐标轴</span>plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 将图片保存到本地</span>wc<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">"Garbage_classification.png"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'生成词云成功!'</span><span class="token punctuation">)</span></code></pre><p>最后来看看我们效果图</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192330.png" alt=""></p><p>有没有感受到大家对垃圾分类这个话题的热情，莫名喜感涌上心头。</p><h2 id="4-后记"><a href="#4-后记" class="headerlink" title="4 后记"></a>4 后记</h2><p>这两个AI萌妹子说的相声很不错，就不知道郭德纲看到这个作品会作何感想。回到垃圾分类的话题，目前《上海市生活垃圾管理条例》已正式施行，不在上海的朋友们也不要太开心，住建部表示，全国其它46个重点城市也即将体验到……有没有瑟瑟发抖🤣🤣，讲真，垃圾分一分，环境美十分，行动起来吧！</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/tree/master/Garbage_classification" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之19 实现一键多值的字典</title>
      <link href="/2019/06/29/interviewquestion-019-shi-xian-yi-jian-duo-zhi-de-zi-dian/"/>
      <url>/2019/06/29/interviewquestion-019-shi-xian-yi-jian-duo-zhi-de-zi-dian/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之19-实现一键多值的字典"><a href="#Python面试题系列之19-实现一键多值的字典" class="headerlink" title="Python面试题系列之19: 实现一键多值的字典"></a>Python面试题系列之19: 实现一键多值的字典</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>怎样实现一个键对应多个值的字典？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>字典都是由一组组键值对构成，一个键对应一个单值的映射。而这里要求一个键映射多个值，实际上就需要将键所对应的多个值放到一个另外的容器中，如可以采用列表、集合来存储它们。</p><p>至于选用列表还是集合，这取决于你的实际需求，比如是否需要对值进行去重。一个键对应多个值，最终可以构造出像这样子的字典：</p><pre class=" language-python"><code class="language-python">dic1 <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'b'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">}</span>dic2 <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string">'b'</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>一种很常见的实现方式如下：</p><pre class=" language-python"><code class="language-python">d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> k_v<span class="token punctuation">:</span>    <span class="token keyword">if</span> key <span class="token operator">not</span> <span class="token keyword">in</span> d<span class="token punctuation">:</span>        d<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span></code></pre><p>但这种方式的实现，不得不添加一个初始值（上述代码中的空列表<code>[]</code>），因为每次调用都得创建一个新的初始值的实例，否则会抛出<code>KeyError</code>。</p><p>为了解决这个初始化问题，我们可以使用<code>defaultdict</code>，先来看看官方给出的定义。</p><blockquote><p>dict subclass that calls a factory function to supply missing values.<br><code>defaultdict</code>属于内建函数<code>dict</code>的一个子类，调用工厂函数提供缺失的值。</p></blockquote><p>这里出现了另一个名词，工厂函数。它指的是能够产生类实例的内建函数，这一类的内建函数都是类对象，当调用它们时，实际上是创建了一个类实例。如int()、bool()、dict()、set()、list()、tuple()等都是工厂函数。</p><p>关于 defaultdict ，我们还可以通过一段官方的说明来进一步了解它。</p><blockquote><p>class collections.defaultdict([default_factory[, …]])</p><p>Returns a new dictionary-like object. defaultdict is a subclass of the built-in dict class. It overrides one method and adds one writable instance variable. The remaining functionality is the same as for the dictclass and is not documented here.</p><p>The first argument provides the initial value for the default_factory attribute; it defaults to None. All remaining arguments are treated the same as if they were passed to the dict constructor, including keyword arguments.</p><p>defaultdict objects support the following method in addition to the standard dict operations:<br><strong>missing</strong>(key)<br>If the default_factory attribute is None, this raises a KeyError exception with the key as argument.<br>If default_factory is not None, it is called without arguments to provide a default value for the given key, this value is inserted in the dictionary for the key, and returned.<br>If calling default_factory raises an exception this exception is propagated unchanged.<br>This method is called by the <strong>getitem</strong>() method of the dict class when the requested key is not found; whatever it returns or raises is then returned or raised by <strong>getitem</strong>().<br>Note that <strong>missing</strong>() is not called for any operations besides <strong>getitem</strong>(). This means that get() will, like normal dictionaries, return None as a default rather than using default_factory.</p><p>defaultdict objects support the following instance variable:<br>default_factory<br>This attribute is used by the <strong>missing</strong>() method; it is initialized from the first argument to the constructor, if present, or to None, if absent.</p></blockquote><p>总结一下，在官方说明中，首先告诉我们<code>collections.defaultdict</code>会返回一个类似<code>dictionary</code>的对象，这里注意是类似，不是完全一样的对象。<code>defaultdict</code>是内置<code>dict</code>类的子类，除了支持<code>dict</code>的操作，它重载了<code>__missing__(key)</code>方法作为扩展。此外<code>defaultdict</code>添加了一个可写的实例变量<code>default_factory</code>，这个属性被<code>__missing__()</code>方法使用，它从构造函数的第一个参数（如果存在）初始化，如果不存在则初始化为<code>None</code>。</p><p><code>defaultdict</code>类的初始化函数，接受一个类型(本质上是工厂函数)作为参数，当所访问的键不存在的时候，可以实例化一个值作为默认值。 </p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<span class="token operator">>></span><span class="token operator">></span> d <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>defaultdict<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> d<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> d<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> d<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>defaultdict<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p><code>defaultdict</code>类除了接受类型名称作为初始化函数的参数之外，还可以使用任何不带参数的可调用函数，到时该函数的返回结果作为默认值，这样使得默认值的取值更加灵活。 </p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">zero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">>></span><span class="token operator">></span> d <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>zero<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>defaultdict<span class="token punctuation">(</span><span class="token operator">&lt;</span>function zero at <span class="token number">0x00000153CF166A60</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> d<span class="token punctuation">[</span><span class="token string">'zz'</span><span class="token punctuation">]</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>defaultdict<span class="token punctuation">(</span><span class="token operator">&lt;</span>function zero at <span class="token number">0x00000153CF166A60</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'zz'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>所以针对本题目的需求，换成defaultdict的写法，代码如下。</p><pre class=" language-python"><code class="language-python">d <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> k_v<span class="token punctuation">:</span>    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span></code></pre><p>这里已不再需要执行初始化操作了，而只需要关注添加元素本身的操作即可。有没有觉得代码更加简洁，更加pythonic了！</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>使用原生<code>dict</code>实现的话，需要对值进行初始化的操作，示例如下：</p><pre class=" language-python"><code class="language-python">d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> k_v<span class="token punctuation">:</span>    <span class="token keyword">if</span> key <span class="token operator">not</span> <span class="token keyword">in</span> d<span class="token punctuation">:</span>        d<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span></code></pre><p>如果使用<code>defaultdict</code>的话代码就会加简洁：</p><pre class=" language-python"><code class="language-python">d <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> k_v<span class="token punctuation">:</span>    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span></code></pre><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>要实现字典中的键映射多个值，这并不难。这里之所以引入<code>defaultdict</code>，其目的是利用了它会自动初始化每个<code>key</code>对应的值的这一特性，这样我们只需要关注添加元素本身的操作即可。而Python原生的数据结构dict，用<code>d[key]</code>这样的方式访问，当指定的<code>key</code>不存在时，是会抛出 <code>KeyError</code>异常的。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之用Python(蛇)玩Snake(贪吃蛇)</title>
      <link href="/2019/06/25/pythonapps-pygame-snake/"/>
      <url>/2019/06/25/pythonapps-pygame-snake/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之用Python-蛇-玩Snake-贪吃蛇"><a href="#Python小应用系列之用Python-蛇-玩Snake-贪吃蛇" class="headerlink" title="Python小应用系列之用Python(蛇)玩Snake(贪吃蛇)"></a>Python小应用系列之用Python(蛇)玩Snake(贪吃蛇)</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>前几天，星球有人提到贪吃蛇，一下子就勾起了我的兴趣，毕竟在那个Nokia称霸的年代，这款游戏可是经典中的经典啊！而用Python(蛇)玩Snake(贪吃蛇)，那再合适不过了🤣🤣🤣</p><p>先通过下面这个效果图来感受下吧！</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193458.gif" alt=""></p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.3</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>我们先来回顾下贪吃蛇中的游戏元素及游戏规则。</p><p>首先呢，需要有贪吃蛇、有食物；需要能控制贪吃蛇来上下移动获取食物；贪吃蛇在吃取食物后，自身长度增加，同时食物消失并随机生成新的食物；如果贪吃蛇触碰到四周墙壁或是触碰到自己身体时，则游戏结束。</p><p>游戏规则就是这么简单，接下来我们借助一个第三方库pygame来实现它。</p><blockquote><p>PyGame 是一个利用SDL库的游戏库， 是一组用来开发游戏软件的 Python 程序模块。</p><p>SDL（Simple DirectMedia Layer）是一个跨平台库，支持访问计算机多媒体硬件（声音、视频、输入等），SDL非常强大，但美中不足的是它是基于 C 语言的。</p><p>PyGame是 SDL 库的 Python 包装器（wrapper），Pygame 在SDL库的基础上提供了各种接口，从而使用用户能够使用 python 语言创建各种各样的游戏或多媒体程序。</p></blockquote><p>它的安装方法很简单，如下：</p><pre class=" language-python"><code class="language-python">pip install pygame</code></pre><p>想要了解更多pygame功能的朋友也可以查阅官方的文档。</p><h2 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3 代码实现"></a>3 代码实现</h2><p>首先导入我们要用到的模块，除了第三方库pygame外，我们还会用到一些Python内置的模块如sys、random、time等，一并导入即可。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pygame<span class="token punctuation">,</span> sys<span class="token punctuation">,</span> random<span class="token punctuation">,</span> time<span class="token comment" spellcheck="true"># 从pygame模块导入常用的函数和常量</span><span class="token keyword">from</span> pygame<span class="token punctuation">.</span>locals <span class="token keyword">import</span> <span class="token operator">*</span>   </code></pre><h3 id="3-1-一些全局参数的初始化"><a href="#3-1-一些全局参数的初始化" class="headerlink" title="3.1  一些全局参数的初始化"></a>3.1  一些全局参数的初始化</h3><p>接下来，我们需要声明一些全局参数。如初始化pygame、定义游戏窗口的大小、窗口的标题、定义全局的颜色变量等信息。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 初始化Pygame库</span>pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 初始化一个游戏界面窗口</span>DISPLAY <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置游戏窗口的标题</span>pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">'人人都是Pythonista - Snake'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定义一个变量来控制游戏速度</span>FPSCLOCK <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 初始化游戏界面内使用的字体</span>BASICFONT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token string">"SIMYOU.TTF"</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 定义颜色变量</span>BLACK <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>WHITE <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Color<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>RED <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Color<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>GREY <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Color<span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span></code></pre><h3 id="3-2-初始化贪吃蛇及食物"><a href="#3-2-初始化贪吃蛇及食物" class="headerlink" title="3.2  初始化贪吃蛇及食物"></a>3.2  初始化贪吃蛇及食物</h3><p>游戏中需要有贪吃蛇及食物，我们给定一个初始值。我们将整个界面看成许多20*20的小方块，每个小方块代表一个标准小格子，贪吃蛇的长度就可以用几个标准小格子表示。我们将贪吃蛇身体用列表的形式存储，方便之后的删减。</p><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">'''初始化贪吃蛇及食物'''</span><span class="token comment" spellcheck="true"># 贪吃蛇的的初始位置</span>snake_Head <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 初始化贪吃蛇的长度 (注：这里以20*20为一个标准小格子)</span>snake_Body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 指定蛇初始前进的方向，向右</span>direction <span class="token operator">=</span> <span class="token string">"right"</span><span class="token comment" spellcheck="true"># 给定第一枚食物的位置</span>food_Position <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 食物标记：0代表食物已被吃掉；1代表未被吃掉。</span>food_flag <span class="token operator">=</span> <span class="token number">1</span></code></pre><h3 id="3-3-实现贪吃蛇的上下左右移动"><a href="#3-3-实现贪吃蛇的上下左右移动" class="headerlink" title="3.3  实现贪吃蛇的上下左右移动"></a>3.3  实现贪吃蛇的上下左右移动</h3><p>我们需要控制贪吃蛇的上下左右的移动，这里通过监听键盘输入来实现。利用键盘中的上下左右键或WASD键来控制贪吃蛇的运动。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 检测按键等Pygame事件</span><span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> event<span class="token punctuation">.</span>type <span class="token operator">==</span> QUIT<span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 接收到退出事件后，退出程序</span>        pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 判断键盘事件，用 方向键 或 wsad 来表示上下左右</span>    <span class="token keyword">elif</span> event<span class="token punctuation">.</span>type <span class="token operator">==</span> KEYDOWN<span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_UP <span class="token operator">or</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_w<span class="token punctuation">)</span> <span class="token operator">and</span> direction <span class="token operator">!=</span> DOWN<span class="token punctuation">:</span>            direction <span class="token operator">=</span> UP        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_DOWN <span class="token operator">or</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_s<span class="token punctuation">)</span> <span class="token operator">and</span> direction <span class="token operator">!=</span> UP<span class="token punctuation">:</span>            direction <span class="token operator">=</span> DOWN        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_LEFT <span class="token operator">or</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_a<span class="token punctuation">)</span> <span class="token operator">and</span> direction <span class="token operator">!=</span> RIGHT<span class="token punctuation">:</span>            direction <span class="token operator">=</span> LEFT        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_RIGHT <span class="token operator">or</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_d<span class="token punctuation">)</span> <span class="token operator">and</span> direction <span class="token operator">!=</span> LEFT<span class="token punctuation">:</span>            direction <span class="token operator">=</span> RIGHT</code></pre><p>接下来就是将蛇前进方向按照键盘的输入进行转弯操作，并将蛇的头部当前的位置加入到蛇身的列表中。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 根据键盘的输入，改变蛇的头部，进行转弯操作</span><span class="token keyword">if</span> direction <span class="token operator">==</span> LEFT<span class="token punctuation">:</span>    snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">20</span><span class="token keyword">if</span> direction <span class="token operator">==</span> RIGHT<span class="token punctuation">:</span>    snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token keyword">if</span> direction <span class="token operator">==</span> UP<span class="token punctuation">:</span>    snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">20</span><span class="token keyword">if</span> direction <span class="token operator">==</span> DOWN<span class="token punctuation">:</span>    snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token comment" spellcheck="true"># 将蛇的头部当前的位置加入到蛇身的列表中</span>snake_Body<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> list<span class="token punctuation">(</span>snake_Head<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="3-4-判断是否吃到食物"><a href="#3-4-判断是否吃到食物" class="headerlink" title="3.4 判断是否吃到食物"></a>3.4 判断是否吃到食物</h3><p>如果蛇头与食物的位置重合，则判定吃到食物，将食物数量清零；而没吃到食物的话，蛇身就会跟着蛇头运动，蛇身的最后一节将被踢出列表。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 判断是否吃掉食物</span><span class="token keyword">if</span> snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>food_Position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">and</span> snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span>food_Position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    food_flag <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">else</span><span class="token punctuation">:</span>    snake_Body<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="3-5-重新生成食物"><a href="#3-5-重新生成食物" class="headerlink" title="3.5 重新生成食物"></a>3.5 重新生成食物</h3><p>当游戏界面中的食物数量为0时，需要重新生成食物。利用random函数来生成随机位置</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 生成新的食物</span><span class="token keyword">if</span> food_flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 随机生成x, y</span>    x <span class="token operator">=</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span>    y <span class="token operator">=</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span>    food_Position <span class="token operator">=</span> <span class="token punctuation">[</span>int<span class="token punctuation">(</span>x<span class="token operator">*</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>int<span class="token punctuation">(</span>y<span class="token operator">*</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    food_flag <span class="token operator">=</span> <span class="token number">1</span></code></pre><h3 id="3-6-绘制贪吃蛇、食物、分数等信息"><a href="#3-6-绘制贪吃蛇、食物、分数等信息" class="headerlink" title="3.6 绘制贪吃蛇、食物、分数等信息"></a>3.6 绘制贪吃蛇、食物、分数等信息</h3><p>定义贪吃蛇的绘制函数</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 绘制贪吃蛇</span><span class="token keyword">def</span> <span class="token function">drawSnake</span><span class="token punctuation">(</span>snake_Body<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> snake_Body<span class="token punctuation">:</span>        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>DISPLAY<span class="token punctuation">,</span> WHITE<span class="token punctuation">,</span> Rect<span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>定义食物的绘制函数</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 绘制食物的位置</span><span class="token keyword">def</span> <span class="token function">drawFood</span><span class="token punctuation">(</span>food_Position<span class="token punctuation">)</span><span class="token punctuation">:</span>    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>DISPLAY<span class="token punctuation">,</span> RED<span class="token punctuation">,</span> Rect<span class="token punctuation">(</span>food_Position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> food_Position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>定义分数的绘制函数</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 打印出当前得分</span><span class="token keyword">def</span> <span class="token function">drawScore</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 设置分数的显示颜色</span>    score_Surf <span class="token operator">=</span> BASICFONT<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'%s'</span> <span class="token operator">%</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> GREY<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 设置分数的位置</span>    score_Rect <span class="token operator">=</span> score_Surf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    score_Rect<span class="token punctuation">.</span>midtop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 绑定以上设置到句柄</span>    DISPLAY<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>score_Surf<span class="token punctuation">,</span> score_Rect<span class="token punctuation">)</span></code></pre><p>这些都定义好之后，我们需要在游戏主逻辑中调用它们，并刷新Pygame的显示层，贪吃蛇与食物的每一次移动，都会进行刷新显示层的操作来显示。最后我们可以设定一个速度值来合理控制游戏执行的速度。</p><pre class=" language-python"><code class="language-python">DISPLAY<span class="token punctuation">.</span>fill<span class="token punctuation">(</span>BLACK<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 画出贪吃蛇</span>drawSnake<span class="token punctuation">(</span>snake_Body<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 画出食物的位置</span>drawFood<span class="token punctuation">(</span>food_Position<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 打印出玩家的分数</span>drawScore<span class="token punctuation">(</span>len<span class="token punctuation">(</span>snake_Body<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 刷新Pygame的显示层，贪吃蛇与食物的每一次移动，都会进行刷新显示层的操作来显示。</span>pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>flip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 控制游戏速度</span>FPSCLOCK<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span></code></pre><h3 id="3-7-定义游戏结束的画面并判断游戏是否结束"><a href="#3-7-定义游戏结束的画面并判断游戏是否结束" class="headerlink" title="3.7 定义游戏结束的画面并判断游戏是否结束"></a>3.7 定义游戏结束的画面并判断游戏是否结束</h3><p>定义函数，用于展示游戏结束的画面并退出程序 </p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 游戏结束并退出</span><span class="token keyword">def</span> <span class="token function">GameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 设置GameOver的显示颜色</span>    GameOver_Surf <span class="token operator">=</span> BASICFONT<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Game Over!'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> GREY<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 设置GameOver的位置</span>    GameOver_Rect <span class="token operator">=</span> GameOver_Surf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    GameOver_Rect<span class="token punctuation">.</span>midtop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 绑定以上设置到句柄</span>    DISPLAY<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>GameOver_Surf<span class="token punctuation">,</span> GameOver_Rect<span class="token punctuation">)</span>    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>flip<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 等待3秒</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 退出游戏</span>    pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 退出程序</span>    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>在游戏主逻辑中加入判断，游戏是否结束</p><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">'''游戏结束的判断'''</span><span class="token comment" spellcheck="true"># 贪吃蛇触碰到边界</span><span class="token keyword">if</span> snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">or</span> snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token number">620</span><span class="token punctuation">:</span>    GameOver<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">or</span> snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token number">460</span><span class="token punctuation">:</span>    GameOver<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 贪吃蛇触碰到自己</span><span class="token keyword">for</span> i <span class="token keyword">in</span> snake_Body<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> snake_Head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">and</span> snake_Head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span>i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        GameOver<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="4-后记"><a href="#4-后记" class="headerlink" title="4 后记"></a>4 后记</h2><p>本文利用Pygame模块实现了最简单的贪吃蛇版本。当然还有很多需要优化的地方，比如随机生成食物时如何避免出现在贪吃蛇的自身上、通过贪吃蛇的长度来自动控制游戏速度等等。更高级一点的有如何通过AI自动玩贪吃蛇、贪吃蛇的双人对战等，期待大家利用Python可以把贪吃蛇玩出一个新的高度！😎😎😎</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/PYGame_Snake/playSnake.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之利用Python制作像素图</title>
      <link href="/2019/06/19/pythonapps-convert-img-to-pixel/"/>
      <url>/2019/06/19/pythonapps-convert-img-to-pixel/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之利用Python制作像素图"><a href="#Python小应用系列之利用Python制作像素图" class="headerlink" title="Python小应用系列之利用Python制作像素图"></a>Python小应用系列之利用Python制作像素图</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>所谓的像素图，就是对图像做一个颗粒化的效果，使其产生一种妙不可言的朦胧感。费话不多说，先来看一张效果图。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191041.jpg" alt=""><br>▲效果图</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191059.jpg" alt=""><br>▲原图</p><p>怎么样，效果还不错吧？现在，我们用Python来实现这种像素化的效果。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.3</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>一个最简单的实现思路，在打开图片后，把图片分割成一些像素块，再对这些像素块中的图像信息进行处理（修改图像中的RGB值）即可。</p><p>这里我们使用Numpy库和PIL库来实现这个需求，后者用来图像的读取与保存，涉及到的所有图像处理动作均借助Numpy来实现。</p><p>有关NumPy模块、PIL模块的介绍，可参考如下。</p><blockquote><p>NumPy(Numerical Python) 是 Python 语言的一个扩展程序库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。</p><p>PIL（Python Imaging Library）是Python常用的图像处理库，而Pillow是PIL的一个友好Fork，提供了了广泛的文件格式支持，强大的图像处理能力，主要包括图像储存、图像显示、格式转换以及基本的图像处理操作等。</p></blockquote><p>这两个模块非Python内置，都属于第三方模块，可直接采用如下方式进行安装</p><pre class=" language-python"><code class="language-python">pip install numpypip install Pillow</code></pre><p>注意，要想使用PIL模块，是需要直接install Pillow模块的。</p><h2 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3 代码实现"></a>3 代码实现</h2><p>首先导入我们要用到的模块 </p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image</code></pre><p>接下来，我们要处理图片，首先得打开一张图片，如下</p><pre class=" language-python"><code class="language-python">data <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">"P:\\Personal\\LuoShen.xpg"</span><span class="token punctuation">)</span></code></pre><p>然后把图像转换化Numpy数组进行下一步的处理</p><pre class=" language-python"><code class="language-python">im1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">)</span></code></pre><p>这里处理的核心思想，也很简单，主要通过中间值的RGB，对所选范围块的RGB进行重新赋值。</p><pre class=" language-python"><code class="language-python">im1<span class="token punctuation">[</span>y<span class="token punctuation">:</span>y <span class="token operator">+</span> pixel<span class="token punctuation">,</span> x<span class="token punctuation">:</span>x <span class="token operator">+</span> pixel<span class="token punctuation">]</span> <span class="token operator">=</span> im1<span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token punctuation">(</span>pixel <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token punctuation">(</span>pixel <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre><p>这里的<code>x</code>、<code>y</code>是分别指的我们图像的横向、纵向像素点的坐标值、而pixel指的是我们要以多大的像素块，来处理这张图像，我们设置的单位像素块(Pixel数值)越小，生成的像素图越精确。</p><p>当然了，若单位像素块设置的太小，生成图像就看不出效果了，至于多大的数值合适，需要自行尝试。不同尺寸的图像，要达到最佳的像素化的显示效果，所需要设置的单位像素块的大小也是不同的，实践出真知。</p><p>我们需要图像的指定一个处理范围，并对该范围内的每一个坐标(像素)点进行像素化的处理。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span>Start_coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> End_coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pixel<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span>Start_coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> End_coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pixel<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span></code></pre><p>在处理完成之后，我们再把Numpy数组转换回图像。</p><pre class=" language-python"><code class="language-python">im2 <span class="token operator">=</span> Image<span class="token punctuation">.</span>fromarray<span class="token punctuation">(</span>im1<span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>最后展示出处理后的图像</p><pre class=" language-python"><code class="language-python">im2<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="4-代码全景展示"><a href="#4-代码全景展示" class="headerlink" title="4 代码全景展示"></a>4 代码全景展示</h2><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">def</span> <span class="token function">to_pixelBlock</span><span class="token punctuation">(</span>pixel<span class="token punctuation">,</span> Start_coordinate<span class="token punctuation">,</span> End_coordinate<span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token triple-quoted-string string">'''         :param pixel: 单位像素块的元素大小            :param Start_coordinate: 处理的起始坐标(像素)点，元组形式          :param End_coordinate: 处理的终止坐标(像素)点，元组形式            :return:            通过中间值的RGB，对所选范围块的RGB进行重新赋值，设置的单位像素块(Pixel数值)越小，生成的像素图越精确    '''</span>    <span class="token comment" spellcheck="true"># 读取图片，并由 PIL image 转换为 NumPy array</span>    im1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">"P:\\Personal\\LuoShen.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 遍历所要处理范围内的所有坐标(像素)点</span>    <span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span>Start_coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> End_coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pixel<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span>Start_coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> End_coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pixel<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 通过中间值的RGB，对所选范围块的RGB进行重新赋值</span>            im1<span class="token punctuation">[</span>y<span class="token punctuation">:</span>y <span class="token operator">+</span> pixel<span class="token punctuation">,</span> x<span class="token punctuation">:</span>x <span class="token operator">+</span> pixel<span class="token punctuation">]</span> <span class="token operator">=</span> im1<span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token punctuation">(</span>pixel <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token punctuation">(</span>pixel <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true"># 将NumPy array 转换为 PIL image        </span>    im2 <span class="token operator">=</span> Image<span class="token punctuation">.</span>fromarray<span class="token punctuation">(</span>im1<span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 展示处理后的图像</span>    im2<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># 设置好要处理的像素范围，并以多大的像素块来生成最终效果图</span>    to_pixelBlock<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="5-后记"><a href="#5-后记" class="headerlink" title="5 后记"></a>5 后记</h2><p>本文使用了PIL加上Numpy的配合，短短几行代码实现了图像像素化的处理。当然这只是一种简单地实现，要想实现更丰富的处理效果，还可以借助CV2来实现。</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Convert_IMG_to_Pixel/Convert_IMG_to_Pixel.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之18 查找最大或最小的N个元素？</title>
      <link href="/2019/06/16/interviewquestion-018-cha-zhao-zui-da-huo-zui-xiao-de-n-ge-yuan-su/"/>
      <url>/2019/06/16/interviewquestion-018-cha-zhao-zui-da-huo-zui-xiao-de-n-ge-yuan-su/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之18-查找最大或最小的N个元素？"><a href="#Python面试题系列之18-查找最大或最小的N个元素？" class="headerlink" title="Python面试题系列之18: 查找最大或最小的N个元素？"></a>Python面试题系列之18: 查找最大或最小的N个元素？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>怎样从一个集合中获得最大或者最小的 N 个元素列表？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>我们来分析下这道题。从一个集合中获得最大或者最小的 N 个元素列表，肯定就需要先对集合进行一个排序。</p><p>而要获取N个元素，N是不确定的，我们要分情况来讨论。因为不同场景的下最优解可能是不同的。</p><p>如下给定的集合X：</p><pre class=" language-python"><code class="language-python">x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span></code></pre><h4 id="当N-1时"><a href="#当N-1时" class="headerlink" title="当N = 1时"></a>当N = 1时</h4><p>这时，题目就简化为从一个集合中获得最大值 或 最小值 ，那么我们可以直接使用内置函数<code>max()</code>、<code>min()</code>来解决。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> max<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token number">32</span><span class="token operator">>></span><span class="token operator">></span> min<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">52</span></code></pre><p>若想获取多个元素的话，<code>max()</code>、<code>min()</code>这俩函数就不适用了。</p><h4 id="当N不等于1时"><a href="#当N不等于1时" class="headerlink" title="当N不等于1时"></a>当N不等于1时</h4><p>分析题目后，我们知道首先得对集合进行排序，然后再获取元素。提到排序，肯定就想到的<code>sort()</code>、<code>sorted()</code>这两个内置函数，（关于这俩函数的区别，之前题目已讲过，不再重复），我们这里直接选用<code>sorted()</code>来搞定排序这一步。</p><p>接下来就是获取一段连续元素，那么我们可以使用切片操作。</p><p>当N = 5时，集合中，最大的5个元素、最小的5个元素分别如下：</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span></code></pre><p>我们换一个思路。</p><p>在上一篇面试题中，我们用堆实现了一个优先级队列。而堆数据结构本身就是一个有序的，因为在底层实现里面，首先会先将集合数据进行堆排序后放入一个列表中，其中一个重要的特征是<code>heap[0]</code>永远是最小的元素。</p><p>在heap模块中给我们提供的<code>nlargest()</code>、<code>nsmallest()</code>这俩方法正好就能解决这个问题。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> heapq<span class="token punctuation">.</span>__all__<span class="token punctuation">[</span><span class="token string">'heappush'</span><span class="token punctuation">,</span> <span class="token string">'heappop'</span><span class="token punctuation">,</span> <span class="token string">'heapify'</span><span class="token punctuation">,</span> <span class="token string">'heapreplace'</span><span class="token punctuation">,</span> <span class="token string">'merge'</span><span class="token punctuation">,</span> <span class="token string">'nlargest'</span><span class="token punctuation">,</span> <span class="token string">'nsmallest'</span><span class="token punctuation">,</span> <span class="token string">'heappushpop'</span><span class="token punctuation">]</span></code></pre><p>同上当N = 5时，集合中最大的5个元素、最小的5个元素分别如下：</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>heapq<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>heapq<span class="token punctuation">.</span>nsmallest<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span></code></pre><p>由上可见，两种思路都解决了这个问题，现在我们以取最大的N个元素为例，看看它们的效率如何。</p><h5 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h5><p>当N远小于集合的长度时，如：N = 2</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> heapq<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token number">5.26</span> µs ± <span class="token number">247</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> sorted<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token number">910</span> ns ± <span class="token number">66.4</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span></code></pre><p>当N接近集合的一半长度时，如：N = 9</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> heapq<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token number">9.31</span> µs ± <span class="token number">272</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> sorted<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token number">970</span> ns ± <span class="token number">47.5</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span></code></pre><p>当N接近集合的长度时，如：N = 19</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> heapq<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token number">9.03</span> µs ± <span class="token number">207</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> sorted<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token number">1.22</span> µs ± <span class="token number">77.3</span> ns per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">10000</span> loops each<span class="token punctuation">)</span></code></pre><p>综上对比可见，使用 <code>sorted(items)[:N]</code> / <code>sorted(items)[-N:]</code> 的方法要更优于 <code>nlargest()</code> / <code>nsmallest()</code> 方法。</p><h5 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h5><p>此外，这两组函数都可以接受一个关键字参数，以获取用这个字段进行排序后的N个元素。</p><pre class=" language-python"><code class="language-python">portfolio <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'IBM'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">91.1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AAPL'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">543.22</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'FB'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">21.09</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'HPQ'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">31.75</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'YHOO'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">16.35</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'ACME'</span><span class="token punctuation">,</span> <span class="token string">'shares'</span><span class="token punctuation">:</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">:</span> <span class="token number">115.65</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>使用 <code>nlargest()</code> / <code>nsmallest()</code> 方法来实现：</p><pre class=" language-python"><code class="language-python">cheap <span class="token operator">=</span> heapq<span class="token punctuation">.</span>nsmallest<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> portfolio<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> s<span class="token punctuation">:</span> s<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>expensive <span class="token operator">=</span> heapq<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> portfolio<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> s<span class="token punctuation">:</span> s<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>使用<code>sorted()</code>方法来实现:</p><pre class=" language-python"><code class="language-python">cheap <span class="token operator">=</span> sorted<span class="token punctuation">(</span>portfolio<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>expensive <span class="token operator">=</span> sorted<span class="token punctuation">(</span>portfolio<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span></code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>当N=1时，<br>即查找最小或最大元素，这时直接使用内置函数<code>min()</code>和<code>max()</code>就好。</p><p>当N不等于1时，<br>有两种解决思路：<code>sorted(items)[:N]</code>/<code>sorted(items)[-N:]</code>和<code>nlargest()</code>/<code>nsmallest()</code></p><p>从实际效率来看，前者更优。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>本篇中我们通过两种不同的思路解决一个集合中获得最大或者最小的 N 个元素列表的问题，你还有什么好的方法吗？欢迎在评论区留言分享~<br>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之17 如何实现一个优先级队列？</title>
      <link href="/2019/06/15/interviewquestion-017-you-xian-ji-dui-lie-de-shi-xian/"/>
      <url>/2019/06/15/interviewquestion-017-you-xian-ji-dui-lie-de-shi-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之17-如何实现一个优先级队列？"><a href="#Python面试题系列之17-如何实现一个优先级队列？" class="headerlink" title="Python面试题系列之17: 如何实现一个优先级队列？"></a>Python面试题系列之17: 如何实现一个优先级队列？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>如何用Python实现一个按优先级排序的队列？并且在这个队列上面每次 pop 操作总是返回优先级最高的那个元素。</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>首先，我们需要知道什么是优先级队列？先从相关概念谈起。</p><p>队列，是一种特征为FIFO的数据结构，每次从队列中取出的是最早加入队列中的元素。</p><h4 id="优先级队列的概念"><a href="#优先级队列的概念" class="headerlink" title="优先级队列的概念"></a>优先级队列的概念</h4><p>在实际应用中却常常需要另一类队列，每次从队列中取出的是具有最高优先权的元素，这种队列就是优先级队列(Priority Queue)，也称为优先权队列。</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>在优先级队列中每个元素都有一个优先权或值。当给每个元素分配一个数字来标记其优先级时，可设较小的数字具有较高的优先级，这样更方便地在一个集合中访问优先级最高的元素，并对其进行查找和删除操作。</p><p>对优先级队列，执行的操作主要有：查找，插入，删除。</p><ul><li>在最小优先级队列(min Priority Queue)中，查找操作用来搜索优先权最小的元素，删除操作用来删除该元素。</li><li>在最大优先级队列(max Priority Queue)中，查找操作用来搜索优先权最大的元素，删除操作用来删除该元素。</li><li>插入操作均只是简单地把一个新的元素加入到队列中。</li><li>当从优先级队列中删除一个元素时，可能出现多个元素具有相同的优先权。在这种情况下，把这些具有相同优先权的元素视为一个FIFO队列，按他们的入队顺序进行先后处理。</li></ul><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><p>优先队列最常见的用处便是基于优先队列实现的堆排序。利用优先队列找到、返回、删除最高优先级元素的快速性，将所有待排序的元素一个一个加入到优先队列中，然后依次返回优先级最高的元素，从而实现排序。</p><h4 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h4><p>为了实现优先队列，我们首先想到了链表。</p><p>采用链表的两种实现思路：</p><ul><li>正常入队列，返回优先级最高的元素时采用遍历的方式；</li><li>入队列时进行排序，将优先级最高的排在队列头部，返回优先级最高的元素时只需返回头部元素即可。<br>但这两种实现方式的时间复杂度都较高。为了高效地实现优先队列，这里我们使用<strong>堆</strong>。</li></ul><p><code>堆</code>(<strong>Heap</strong>)，是利用完全二叉树的结构来维护数据的一种的数据结构，因此堆也叫做二叉堆。借助下面这张图可以直观的理解二叉堆的结构和特点： </p><p>观察上图我们不难发现，元素的标号n’与其父节点的标号n的关系为： 左节点n’ = 2n 、右节点n’ = 2n+1 ，这为我们递归的查找节点提供了路径。</p><p>正是因为堆这种二叉树的结构特性，一般利用堆进行一次查找的时间复杂度在O(1)~O(logN)之间，这也正是我们后面利用堆实现优先队列和堆排序降低算法的时间空间成本的原因。</p><p>类似于数据结构栈和队列的push和pop两个核心操作，堆的也有两个核心操作：上浮swim和下沉sink，它们是实现堆的有序化的基础，也是实现优先队列的基础。</p><p><code>堆化</code>(<strong>heapify</strong>)，是将一个二叉树转化为一个堆数据结构的过程。在Python中我们可以使用内置模块<code>heapq</code>中的<code>heapify(x)</code>函数来实现将一个列表 x 转化为一个堆。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> heapqx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>heap <span class="token operator">=</span> list<span class="token punctuation">(</span>x<span class="token punctuation">)</span>heapq<span class="token punctuation">.</span>heapify<span class="token punctuation">(</span>heap<span class="token punctuation">)</span>heap<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span></code></pre><p><code>heap</code>是被<code>堆化</code>后的列表，heap[0] = 2为最小项。<br>注意：此时<code>heap</code>的数据类型仍是一个list。</p><p>我们打印出heapq提供的方法</p><pre class=" language-python"><code class="language-python">heapq<span class="token punctuation">.</span>__all__<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'heappush'</span><span class="token punctuation">,</span> <span class="token string">'heappop'</span><span class="token punctuation">,</span> <span class="token string">'heapify'</span><span class="token punctuation">,</span> <span class="token string">'heapreplace'</span><span class="token punctuation">,</span> <span class="token string">'merge'</span><span class="token punctuation">,</span> <span class="token string">'nlargest'</span><span class="token punctuation">,</span> <span class="token string">'nsmallest'</span><span class="token punctuation">,</span> <span class="token string">'heappushpop'</span><span class="token punctuation">]</span></code></pre><p>以<code>heappop()</code>为例，它会从堆列表中拿出并返回最小项。并且使堆保持不变（即<code>heap[0]</code>仍为最小项）。</p><pre class=" language-python"><code class="language-python">heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>heap<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2</span>heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>heap<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span>heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>heap<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span>heap<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span></code></pre><p>我们在了解堆及其相关操作后，现在就用它来实现一个优先级队列，具体代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> heapq<span class="token keyword">class</span> <span class="token class-name">MyPriorityQueue</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 创建一个空列表用于存放队列</span>        self<span class="token punctuation">.</span>_queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment" spellcheck="true"># 指针用于记录push的次序</span>        self<span class="token punctuation">.</span>_index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> priority<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""队列由(-priority, index, item)形式的元祖构成"""</span>        heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_queue<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span>priority<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_index<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>_index <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 返回拥有最高优先级的项</span>        <span class="token keyword">return</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_queue<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span></code></pre><p>在这里我们利用了<code>heapq</code>模块的<code>heappush()</code>方法和<code>heappop()</code>方法。其中<code>heapq.heappush()</code>在队列<code>_queue</code>上插入和删除第一个元素，并且队列<code>_queue</code>保证第一个元素拥有最高优先级。<code>heappop()</code>函数总是返回 “最小的” 的元素，这就是保证队列<code>pop</code>操作返回正确元素的关键。 </p><p>在上面代码中，队列包含了一个<code>(-priority, index, item)</code>的元组。优先级为负，其目的是使得元素按照优先级从高到低排序。 这个跟普通的按优先级从低到高排序的堆排序恰巧相反。</p><p>而<code>index</code>变量的加入，是保证同等优先级元素的正确排序。通过保存一个不断增加的<code>index</code>下标变量，可以确保元素按照它们插入的顺序排序，而且<code>index</code>变量也在相同优先级元素比较的时候起到重要作用。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'Item: {!r}'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>q <span class="token operator">=</span> MyPriorityQueue<span class="token punctuation">(</span><span class="token punctuation">)</span>q<span class="token punctuation">.</span>push<span class="token punctuation">(</span>Item<span class="token punctuation">(</span><span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15.004</span><span class="token punctuation">)</span>q<span class="token punctuation">.</span>push<span class="token punctuation">(</span>Item<span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8.350</span><span class="token punctuation">)</span>q<span class="token punctuation">.</span>push<span class="token punctuation">(</span>Item<span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">13.300</span><span class="token punctuation">)</span>q<span class="token punctuation">.</span>push<span class="token punctuation">(</span>Item<span class="token punctuation">(</span><span class="token string">'C++'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8.350</span><span class="token punctuation">)</span>q<span class="token punctuation">.</span>push<span class="token punctuation">(</span>Item<span class="token punctuation">(</span><span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4.624</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>_queue<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15.004</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">13.3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C++'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.624</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre><p>我们现在对队列进行5次<code>pop()</code>操作</p><pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>_queue<span class="token punctuation">)</span></code></pre><p>打印结果如下：</p><pre class=" language-python"><code class="language-python">Item<span class="token punctuation">:</span> <span class="token string">'Java'</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">13.3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.624</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C++'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>Item<span class="token punctuation">:</span> <span class="token string">'C'</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C++'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.624</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>Item<span class="token punctuation">:</span> <span class="token string">'Python'</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8.35</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'C++'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.624</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>Item<span class="token punctuation">:</span> <span class="token string">'C++'</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.624</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>Item<span class="token punctuation">:</span> <span class="token string">'.NET'</span><span class="token punctuation">[</span><span class="token punctuation">]</span></code></pre><p>仔细观察可以发现我们通过<code>pop()</code>操作了返回优先级最高的元素。 另外如果遇到两个同优先级的元素（如这里的 C++和 Python），<code>pop</code>操作则会按照它们被插入到队列的顺序进行返回。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>实现优先级队列，代码的核心是利用<code>heapq</code>模块，根据堆排序的特点<code>heapq.heappop()</code>会返回最小值项，因此需要把<code>priority</code>的值变为负，才能让队列将每一项按从最高到最低优先级的顺序级来排序。具体代码见上文。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>在Python中内置的<code>heapq</code>和<code>queue</code>分别给我们提供了堆和优先队列结构，但是<code>queue.PriorityQueue</code>实际上只是对<code>heapq</code>的简单封装，直接使用其 <code>heappush</code> / <code>heappop</code> 方法，所以很有必要了解<code>heapq</code>的用法。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之2019.618叠猫猫、Python帮你拿喵币</title>
      <link href="/2019/06/14/pythonapps-2019-618-pickmaomao/"/>
      <url>/2019/06/14/pythonapps-2019-618-pickmaomao/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之2019-618叠猫猫、Python帮你拿喵币"><a href="#Python小应用系列之2019-618叠猫猫、Python帮你拿喵币" class="headerlink" title="Python小应用系列之2019.618叠猫猫、Python帮你拿喵币"></a>Python小应用系列之2019.618叠猫猫、Python帮你拿喵币</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>最近叠猫猫的活动可真是十分的火爆，每天小伙伴们为了合猫猫忙得可谓是如火如荼。为啥要叠猫猫呢？赚猫币得现金红包！！眼看为实，先来看看我朋友的购物订单。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118184959.png" alt=""></p><p>看到没，优惠力度如此之大！！！</p><p>后知后觉的我，错过了第一波，可不想错过第二波啊！<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185036.jpg" alt=""></p><p>活动需要不断的升级自家的猫，其中一个途径是通过逛店铺来获取喵币。每天可逛40店铺，共可领到40*300喵币！！但是，你总不能一直盯着玩吧？想想都累，所以呢，该Python大显身手了。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><p>手机系统：Android</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>我们在手动的操作流程是逛店铺、领喵币，领取成功后，逛下一家店铺。好了，就是这么简单。</p><p>这里我们借助的是「adb」工具，配合Python脚本来完成。</p><h2 id="3-前置准备"><a href="#3-前置准备" class="headerlink" title="3 前置准备"></a>3 前置准备</h2><p>要正常使用「adb」需要打开USB调试，设置项通常出现在手机系统设置中的[开发人员选项]里面。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185011.png" alt=""></p><p>通过开发者模式中的“指针位置”可以用来获取手机点击时的坐标<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185012.jpg" alt=""></p><h2 id="4-逛店铺流程回顾"><a href="#4-逛店铺流程回顾" class="headerlink" title="4 逛店铺流程回顾"></a>4 逛店铺流程回顾</h2><p>打开淘宝，在右上角找到合猫猫的入口并进入。</p><p>第一步，点击”合合卡”<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185017.jpg" alt=""></p><p>第二步，点击”进店找卡”<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185014.jpg" alt=""></p><p>第三步，等待10秒左右，点击”猫猫出现啦，点击得喵币”<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185016.jpg" alt=""></p><p>第四步，点击”开心收下”<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185013.jpg" alt=""></p><p>第五步，退出此店铺</p><p>因为有些店铺的左上角没有退出的按钮，这里为了统一操作，直接使用手机系统的全面屏手势退出即可，我的Honor9手机，是在屏幕左侧向右滑动可回到上一级。</p><p>第六步，退出店铺后即回到了主界面，如步骤一。</p><p>在这里，我们需要依次记录下”合合卡”、”进店找卡”、”猫猫出现啦，点击得喵币”、”开心收下”的坐标。</p><h2 id="5-代码全景展示"><a href="#5-代码全景展示" class="headerlink" title="5 代码全景展示"></a>5 代码全景展示</h2><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span>time<span class="token keyword">def</span> <span class="token function">pick_maomao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"点 合合卡 按钮"</span><span class="token punctuation">)</span>    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell input tap 145 1625'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"点 进店找卡 按钮"</span><span class="token punctuation">)</span>    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell input tap 841 1660'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"猫猫出现啦，点击得喵币"</span><span class="token punctuation">)</span>    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell input tap 967 1134'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"点 开心收下"</span><span class="token punctuation">)</span>    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell input tap 569 1380'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"利用全面屏手势退出店铺"</span><span class="token punctuation">)</span>    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell input swipe 0 1500 500 1500'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    pick_maomao<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>短短十几行代码，轻松搞定！</p><p>将写好了代码放到「adb」工具的同路径下执行即可</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118185010.png" alt=""></p><p>最后强调一下，手机连上电脑后，在执行脚本前要确保「adb」命令能正常操控手机。</p><h2 id="6-后记"><a href="#6-后记" class="headerlink" title="6 后记"></a>6 后记</h2><p>本文代码中的坐标，是在我的Honor9手机上获取到的，因手机型号众多屏幕大小也不同，大家在执行代码前，根据实际情况记录下自己手机上”合合卡”、”进店找卡”、”猫猫出现啦，点击得喵币”、”开心收下”的坐标即可，替换坐标数据后即可正常使用。留给我们的时间不多喽，抓紧时间搞起来吧~~</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/2019_618_PickMaomao/2019_618_PickMaomao.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之16 如何进行代码的优化？</title>
      <link href="/2019/06/12/interviewquestion-016-ru-he-jin-xing-dai-ma-de-you-hua/"/>
      <url>/2019/06/12/interviewquestion-016-ru-he-jin-xing-dai-ma-de-you-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之16-如何进行代码的优化？"><a href="#Python面试题系列之16-如何进行代码的优化？" class="headerlink" title="Python面试题系列之16: 如何进行代码的优化？"></a>Python面试题系列之16: 如何进行代码的优化？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>代码优化从哪些方面考虑？有什么想法？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>代码优化可以从以下几个方面考虑</p><h4 id="1-算法优化"><a href="#1-算法优化" class="headerlink" title="1 算法优化"></a>1 算法优化</h4><p>一个良好的算法能够对性能起到关键作用，因此性能改进的首要点是对算法的改进。</p><p>我们把算法的时间复杂度进行排序，依次是：</p><pre class=" language-css"><code class="language-css"><span class="token function">O</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>lgn<span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>nlgn<span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>n^<span class="token number">2</span><span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>n^<span class="token number">3</span><span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>n^k<span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>k^n<span class="token punctuation">)</span> -> <span class="token function">O</span><span class="token punctuation">(</span>n!<span class="token punctuation">)</span></code></pre><p>如果能够在时间复杂度上对算法进行一定的改进，对性能的提高不言而喻。在 Python 中可以通过选择合适的数据结构来优化时间复杂度。</p><p>Python dict 和 set 都是使用 hash 表来实现，查找元素的时间复杂度是O(1)，而Python list 实际是个数组，在 list 中，查找元素需要遍历整个list，其复杂度为 O(n)，因此使用 dict 或 set 查找元素要比 list 快不少。另外与set相比，dict 的效率略高。</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> range<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>s <span class="token operator">=</span> set<span class="token punctuation">(</span>a<span class="token punctuation">)</span>d <span class="token operator">=</span> dict<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span><span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> d<span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">10000</span> <span class="token number">100</span> <span class="token keyword">in</span> s <span class="token number">10000</span> loops<span class="token punctuation">,</span> best of <span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">43.5</span> ns per loop<span class="token number">10000</span> loops<span class="token punctuation">,</span> best of <span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">49.6</span> ns per loop</code></pre><h4 id="2-循环优化"><a href="#2-循环优化" class="headerlink" title="2 循环优化"></a>2 循环优化</h4><p>每种编程语言都会强调需要优化循环。当使用Python的时候，你可以依靠大量的技巧使得循环运行得更快。</p><p>循环之外能做的事不要放在循环内，如下面的优化可以快上一倍：</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> range<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>size_a <span class="token operator">=</span> len<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">1000</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> a<span class="token punctuation">:</span> k <span class="token operator">=</span> len<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">%</span>timeit <span class="token operator">-</span>n <span class="token number">1000</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> a<span class="token punctuation">:</span> k <span class="token operator">=</span> size_a<span class="token number">1000</span> loops<span class="token punctuation">,</span> best of <span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">569</span> µs per loop<span class="token number">1000</span> loops<span class="token punctuation">,</span> best of <span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">256</span> µs per loop</code></pre><p>优化循环的关键，是要减少Python在循环内部执行的工作量，因为Python原生的解释器在第一种情况下，真的会减缓执行的速度。</p><h4 id="3-并行编程"><a href="#3-并行编程" class="headerlink" title="3 并行编程"></a>3 并行编程</h4><p>因为GIL的存在，Python很难充分利用多核CPU的优势。但是可以通过内置的模块multiprocessing实现下面几种并行模式：</p><ul><li>多进程：对于 CPU 密集型的程序，可以使用multiprocessing 的Process、Pool等封装好的类，通过多进程的方式实现并行计算。但是因为进程中的通信成本比较大，对于进程之间需要大量数据交互的程序效率未必有大的提高。</li><li>多线程：对于IO密集型的程序，multiprocessing.dummy模块使用multiprocessing的接口封装threading，使得多线程编程也变得非常轻松(比如可以使用Pool的map接口，简洁高效)。</li><li>分布式：multiprocessing中的Managers类提供了可以在不同进程之共享数据的方式，可以在此基础上开发出分布式的程序。<br>不同的业务场景可以选择其中的一种或几种的组合，来实现程序性能的优化。</li></ul><h4 id="4-调整部分逻辑改为原生代码实现"><a href="#4-调整部分逻辑改为原生代码实现" class="headerlink" title="4 调整部分逻辑改为原生代码实现"></a>4 调整部分逻辑改为原生代码实现</h4><p>通过C/C++来替换掉部分逻辑也是Python优化的常见手段，比如：</p><ul><li>裸写C/C++扩展</li><li>使用Boost.Python实现C++扩展</li><li>使用Cython</li><li>使用PyPy<br>裸写C/C++需要处理繁琐的对象转化以及引用处理，一般会选择使用Boost.Python，使用起来方便很多；采用Cython可以不去写C++代码，但是要写Cython脚本；PyPy是CPython的一个替代实现，其最主要的优势就是pypy的速度，根据官网的基准测试数据，它比 CPython 实现的 Python 要快6倍以上。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116143857.png" alt=""></li></ul><p>快的原因是PyPy使用了Just-in-Time(JIT)编译器，即动态编译器，与静态编译器(如gcc、javac等)不同，它是利用程序运行的过程的数据进行优化。由于历史原因，目前pypy中还保留着GIL，不过正在进行的STM项目试图将PyPy变成没有GIL的Python。<br>如果python程序中含有C扩展(非cffi的方式)，JIT的优化效果会大打折扣，甚至比CPython慢（如 Numpy）。所以在PyPy中最好用纯Python或使用cffi扩展。随着STM、Numpy等项目的完善，相信PyPy将会替代CPython。</p><p>这里需要注意的是，保留好必要的Python实现，以便在遇到问题时可以快速切换回去。</p><h4 id="5-使用性能分析工具"><a href="#5-使用性能分析工具" class="headerlink" title="5 使用性能分析工具"></a>5 使用性能分析工具</h4><p>性能分析工具除了在ipython使用到的 timeit 模块，还有cProfile。它的使用方式也非常简单，形式如下</p><pre class=" language-python"><code class="language-python">python <span class="token operator">-</span>m cProfile filename<span class="token punctuation">.</span>py</code></pre><p>注：filename.py 是要运行程序的文件名。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116143949.png" alt=""><br>利用cProfile，我们可以在标准输出中看到每一个函数被调用的次数和运行的时间，从而找到程序的性能瓶颈。</p><p>cProfile结果的可视化工具，配合编码一起来用的话，直接使用PyCharm打开最为方便，可以快速跳转每一个耗时函数对应的代码，关注那些调用次数多的以及单次性能差的，针对性地进行优化。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>详见上文内容。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>关于代码优化，这是一道开放性题目。本文仅是从优化算法、优化循环、并行编程、调整部分逻辑转为原生代码实现等角度进行了说明，同时可以借助性能分析工具来进行优化。当然不止这几个方面，比如使用级联比较；择合适的格式化字符方式；选择使用列表解析要比在循环中重新构建一个新的 list 更为高效……欢迎大家在评论区留言分享自己在平时如何优化代码的。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之借助Python抢微信红包</title>
      <link href="/2019/06/10/pythonapps-grab-luckymoney/"/>
      <url>/2019/06/10/pythonapps-grab-luckymoney/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之借助Python抢微信红包"><a href="#Python小应用系列之借助Python抢微信红包" class="headerlink" title="Python小应用系列之借助Python抢微信红包"></a>Python小应用系列之借助Python抢微信红包</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>提到抢红包，就不得不提Xposed框架，它简直是个抢红包的神器，但使用Xposed框架有一个前提条件：手机需要root，对于苹果手机的话就需要越狱了。现在的手机想要root或越狱并不容易，同时这会对手机安全性带来一些风险，抢红包本身只是个娱乐活动，这样做就得不偿失了。</p><p>为了自动抢红包，python能帮我们实现吗？</p><p>答案是肯定的，本文就带大家一起探索下用Python如何实现自动抢红包。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><p>手机系统：Android</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h2><p>这里我们的需求是实现自动抢红包。首先要打开微信，进入到指定的群聊，识别微信红包、执行抢红包的动作。这就是关键的步骤，简单清晰。</p><p>因为电脑版本的微信没有抢红包的功能，我们只能手机微信，那么就需要把手机连上电脑，通过电脑控制手机来自动抢，那就需要确保「adb」命令可正常执行。</p><p>识别微信中的消息，是红包还是普通的信息，这里我们通过聊天消息的元素标识来判断。这里我们借助了「Airtest IDE」工具来实现。</p><h2 id="3-前置准备"><a href="#3-前置准备" class="headerlink" title="3 前置准备"></a>3 前置准备</h2><h3 id="3-1-打开手机的USB调试"><a href="#3-1-打开手机的USB调试" class="headerlink" title="3.1 打开手机的USB调试"></a>3.1 打开手机的USB调试</h3><p>要正常使用「adb」需要打开USB调试，设置项通常出现在手机系统设置中的[开发人员选项]里面。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192459.jpg" alt=""></p><p>在手机上打开USB调试后，接下来我们通过Airttest IDE验证 adb 运行是否正常。</p><h3 id="3-2-下载安装Airtest-IDE"><a href="#3-2-下载安装Airtest-IDE" class="headerlink" title="3.2 下载安装Airtest IDE"></a>3.2 下载安装Airtest IDE</h3><p>开始之前先，先解释下airttest相关概念：</p><blockquote><p><strong>Airtest</strong>是一个跨平台的、基于图像识别的UI自动化测试框架，适用于游戏和App，支持平台有Windows、Android和iOS。<br><strong>Poco</strong>是一款基于UI控件识别的自动化测试框架，目前支持Unity3D/cocos2dx-*/Android原生app/iOS原生app/微信小程序，也可以在其他引擎中自行接入poco-sdk来使用。<br>AirtestIDE是一个我们配套推出的跨平台的UI自动化测试编辑器，内置了Airtest和Poco的相关插件功能，能够使用它快速简单地编写脚本。</p></blockquote><p>Airtest IDE 的下载地址：</p><pre><code>http://airtest.netease.com/</code></pre><p>下载之后，解压打开就可以使用，Airtest IDE的界面如下：<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192631.png" alt=""></p><p>使用AirtestIDE对Android应用进行自动化操作，第一步就需要连接Android设备。</p><p>请使用USB线连接手机，手机上出现的 允许USB调试 弹窗点击 确定。<br>点击连接面板中的 refresh ADB 按钮，设备列表将会刷新。<br>点击列表内对应设备的 Connect 完成连接。<br>若设备未刷出，点击 refresh ADB 按钮。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192535.gif" alt=""></p><p>若连接遇到问题，请参考Airtest的官方教程：Android真机连接</p><h2 id="4-抢红包流程回顾"><a href="#4-抢红包流程回顾" class="headerlink" title="4 抢红包流程回顾"></a>4 抢红包流程回顾</h2><p>打开微信，在最左侧的Tab页，微信消息列表，我们需要从这里选择指定的群聊来抢红包。</p><p>在AirtestIDE中，我们可以通过暂停功能，冻结当前的UI树形结构来精确地检视UI控件，我们先来分析下这个页面中元素标识。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192603.png" alt=""></p><p>▲聊天页面中整体的群聊消息的元素标识 com.tencent.mm:id/d1v</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192616.png" alt=""></p><p>▲聊天页面中单个群聊消息的元素标识 com.tencent.mm:id/b6e</p><p>接下来进入我们准备要抢红包的群聊中，识别出红包并执行抢红包的动作。</p><p>我们先来看看红包的标识：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192915.png" alt=""></p><p>▲红包标识的示例1 com.tencent.mm:id/aql</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192924.png" alt=""></p><p>▲红包标识的示例2  com.tencent.mm:id/aql</p><p>点击红包，记录下弹出的大红包页面中“开”的元素标识</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192935.png" alt=""></p><p>▲大红包页面中”开“的标识 com.tencent.mm:id/d02</p><p>这里我们需要判断是红包是否有效，比如已被领完或是已被自己领取的红包就是无效的，我们在执行时可以跳过这些。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192944.png" alt=""></p><p>▲已领取红包的标识 com.tencent.mm:id/apk</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118192954.png" alt=""></p><p>▲已被领完红包的标识 com.tencent.mm:id/apk</p><p>我们用的各元素的标识都已取到，接下来就是组织我们的代码。</p><h2 id="5-代码梳理"><a href="#5-代码梳理" class="headerlink" title="5 代码梳理"></a>5 代码梳理</h2><p>首先得打开微信，利用Airtest启动app应用，只须一行代码即可搞定，如下</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 打开手机微信</span>poco<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">'微信'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>获取当前页面中所有所有群聊的名称</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 群聊消息的元素标识</span>Chat_msg <span class="token operator">=</span> poco<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'com.tencent.mm:id/d1v'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offspring<span class="token punctuation">(</span><span class="token string">'com.tencent.mm:id/b6e'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 获取当前页面中所有群聊的名称</span>Chat_names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Chat_names <span class="token operator">=</span> list<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Chat_msg<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>选择并进入指定的群聊</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 指定抢红包的群聊名称</span>chat <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'请指定群聊名称:'</span><span class="token punctuation">)</span><span class="token keyword">if</span> chat <span class="token keyword">in</span> Chat_names<span class="token punctuation">:</span>    index <span class="token operator">=</span> Chat_names<span class="token punctuation">.</span>index<span class="token punctuation">(</span>chat<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 点击进入指定的群聊</span>    Chat_msg<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>在微信聊天页面中，获取当前页面中的所有消息元素。</p><pre class=" language-python"><code class="language-python">msg_list <span class="token operator">=</span> poco<span class="token punctuation">(</span><span class="token string">"android.widget.ListView"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>children<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>遍历消息并查找红包</p><pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> msg <span class="token keyword">in</span> msg_list<span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 微信红包的标识</span>    LuckyMoney <span class="token operator">=</span> msg<span class="token punctuation">.</span>offspring<span class="token punctuation">(</span><span class="token string">'com.tencent.mm:id/aql'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 已失效红包（比如已领取、已被领完）的标识</span>    Invalid <span class="token operator">=</span> msg<span class="token punctuation">.</span>offspring<span class="token punctuation">(</span><span class="token string">'com.tencent.mm:id/aqk'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 判断红包是否有效并抢起来！</span>    <span class="token keyword">if</span> LuckyMoney<span class="token punctuation">:</span>        <span class="token keyword">pass</span></code></pre><p>在LuckyMoney中定义抢红包的动作</p><pre class=" language-python"><code class="language-python"><span class="token keyword">if</span> Invalid<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token punctuation">(</span>Invalid<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'已领取'</span> <span class="token operator">or</span> Invalid<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'已被领完'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'红包已无效，跳过……'</span><span class="token punctuation">)</span>    <span class="token keyword">continue</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'发现一个新红包，抢起来！'</span><span class="token punctuation">)</span>    poco<span class="token punctuation">(</span><span class="token string">"com.tencent.mm:id/d1v"</span><span class="token punctuation">)</span>    msg<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>    click_open <span class="token operator">=</span> poco<span class="token punctuation">(</span><span class="token string">"com.tencent.mm:id/d02"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> click_open<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        click_open<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>    keyevent<span class="token punctuation">(</span><span class="token string">'BACK'</span><span class="token punctuation">)</span></code></pre><h2 id="6-后记"><a href="#6-后记" class="headerlink" title="6 后记"></a>6 后记</h2><p>若我们在一台电脑上并不想安装Airtest IDE，还能执行这个脚本吗？</p><p>当然可以，只需要安装好「pocoui」这个第三方库就可以“抛弃”它了！</p><pre class=" language-python"><code class="language-python">pip install pocoui</code></pre><p>利用 AirtestIDE 创建一个项目时，设备类型选中 Android，就会在编码区生成一段初始化的代码。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> airtest<span class="token punctuation">.</span>core<span class="token punctuation">.</span>api <span class="token keyword">import</span> <span class="token operator">*</span>auto_setup<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token keyword">from</span> poco<span class="token punctuation">.</span>drivers<span class="token punctuation">.</span>android<span class="token punctuation">.</span>uiautomation <span class="token keyword">import</span> AndroidUiautomationPocopoco <span class="token operator">=</span> AndroidUiautomationPoco<span class="token punctuation">(</span>use_airtest_input<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> screenshot_each_action<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></code></pre><p>我们自己编写的Python代码中也需要加上这段初始化的代码。</p><p>再次强调，在执行脚本时要确保手机连上电脑，并确保「adb」命令正常运行。</p><p>对Airtest有兴趣的小伙伴，可以参考airtest官方教程：<a href="https://airtest.netease.com/docs/docs_AirtestIDE-zh_CN/index.html" target="_blank" rel="noopener">AirtestIDE官方文档</a></p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Grab_LuckyMoney/Grab_LuckyMoney.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之15 如何实现一个单例？</title>
      <link href="/2019/06/08/interviewquestion-015-dan-li-de-shi-xian/"/>
      <url>/2019/06/08/interviewquestion-015-dan-li-de-shi-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之15-如何实现一个单例？"><a href="#Python面试题系列之15-如何实现一个单例？" class="headerlink" title="Python面试题系列之15: 如何实现一个单例？"></a>Python面试题系列之15: 如何实现一个单例？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>如何实现一个单例？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p><strong>单例</strong>(<em>Singleton</em>)，一种设计模式，应用该模式的类只会生成一个实例。它保证了在程序的不同位置都可以，且仅能取到同一个对象实例：如果实例不存在，会创建一个实例；如果已存在就会返回这个实例。</p><p>我们回顾下在 Python 中的类、实例，是通过哪些方法以怎样的顺序被构造的。</p><p>简单来说，<code>元类(metaclass)</code>可以通过<code>__metaclass__</code>方法创造出<code>类(class)</code>，而<code>类(class)</code>通过<code>__new__</code>方法创造出<code>实例(instance)</code>。</p><p>在创造类的过程中或者创造实例的过程中稍加控制，从而可以达到最后产生的实例都是一个对象的目的，即实现了单例。</p><h3 id="方法一：利用-new-方法"><a href="#方法一：利用-new-方法" class="headerlink" title="方法一：利用 new 方法"></a>方法一：利用 new 方法</h3><p>为了使类只能出现一个实例，我们可以使用<code>__new__</code>来控制实例的创建过程，达到实现单例模式的目的。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    _instance <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> cls<span class="token punctuation">.</span>_instance <span class="token keyword">is</span> None<span class="token punctuation">:</span>            cls<span class="token punctuation">.</span>_instance <span class="token operator">=</span> object<span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instance    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span>a <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><p>这里将一个类的实例绑定到类变量_instance上，如果_instance为None，说明该类还没有实例化过，实例化该类并返回；否则直接返回 _instance 存放的实例。</p><h3 id="方法二：利用元类-metaclass"><a href="#方法二：利用元类-metaclass" class="headerlink" title="方法二：利用元类(metaclass)"></a>方法二：利用元类(metaclass)</h3><p>我们在类的创建时进行干预，从而达到实现单例的目的。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 拦截(intercepting) class的创建</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">:</span>    _instance <span class="token operator">=</span> None    <span class="token comment" spellcheck="true"># 通过重写__call__拦截实例的创建</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token operator">not</span> cls<span class="token punctuation">.</span>_instance<span class="token punctuation">:</span>            cls<span class="token punctuation">.</span>_instance <span class="token operator">=</span> super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__call__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instance<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span>a <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><p>这里我们将metaclass指向 Singleton 类，让Singleton中的type来创造新的 MyClass实例。</p><p>元类可以控制类的创建过程，它主要做了三件事：拦截类的创建；修改类的定义；返回修改后的类。</p><h3 id="方法三：利用-函数-装饰器"><a href="#方法三：利用-函数-装饰器" class="headerlink" title="方法三：利用(函数)装饰器"></a>方法三：利用(函数)装饰器</h3><p>装饰器可以动态的修改一个类或函数的功能。这里，我们也可以使用装饰器来装饰某个类，使其只能生成一个实例：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">Singleton</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>    _instances <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">get_instance</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> cls <span class="token operator">not</span> <span class="token keyword">in</span> _instances<span class="token punctuation">:</span>            _instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> cls<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token keyword">return</span> _instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span>    <span class="token keyword">return</span> get_instance@Singleton<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span>a <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><p>这里我们定义了一个装饰器<code>singleton</code>，它返回了一个内部函数<code>get_instance</code>，该函数会判断某个类是否在字典<code>_instances</code>中，如果不存在，则会将<code>cls</code>作为<code>key</code>、<code>cls(*args, **kwargs)</code>作为<code>value</code>存到<code>instances</code>中，否则，直接返回<code>_instances[cls]</code>。</p><h3 id="方法四：利用-类-装饰器"><a href="#方法四：利用-类-装饰器" class="headerlink" title="方法四：利用(类)装饰器"></a>方法四：利用(类)装饰器</h3><p>上面我们使用函数装饰器实现了单例，用类装饰器来实现的思路与其类似，直接看具体代码：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>_cls <span class="token operator">=</span> cls        self<span class="token punctuation">.</span>_instance <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_cls <span class="token operator">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>_instance<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>_instance<span class="token punctuation">[</span>self<span class="token punctuation">.</span>_cls<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>_cls<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_instance<span class="token punctuation">[</span>self<span class="token punctuation">.</span>_cls<span class="token punctuation">]</span>@Singleton<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span>a <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><h3 id="方法五：利用StaticMethod"><a href="#方法五：利用StaticMethod" class="headerlink" title="方法五：利用StaticMethod"></a>方法五：利用StaticMethod</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    _instance <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">raise</span> SyntaxError<span class="token punctuation">(</span><span class="token string">'can not instance, please use get_instance'</span><span class="token punctuation">)</span>    @staticmethod    <span class="token keyword">def</span> <span class="token function">get_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> Singleton<span class="token punctuation">.</span>_instance <span class="token keyword">is</span> None<span class="token punctuation">:</span>            Singleton<span class="token punctuation">.</span>_instance <span class="token operator">=</span> object<span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>Singleton<span class="token punctuation">)</span>        <span class="token keyword">return</span> Singleton<span class="token punctuation">.</span>_instancea <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>get_instance<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>get_instance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><p>该方法的要点是在<code>__init__</code>抛出异常，禁止通过类来实例化，只能使用静态<code>get_instance</code>函数来获取实例，通过父类<code>object.__new__</code>来实例化。</p><h3 id="方法六：利用ClassMethod"><a href="#方法六：利用ClassMethod" class="headerlink" title="方法六：利用ClassMethod"></a>方法六：利用ClassMethod</h3><p>和方法五的实现思路类似，只是这里采用了classmethod，代码：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    _instance <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">raise</span> SyntaxError<span class="token punctuation">(</span><span class="token string">'can not instance, please use get_instance'</span><span class="token punctuation">)</span>    @classmethod    <span class="token keyword">def</span> <span class="token function">get_instance</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> Singleton<span class="token punctuation">.</span>_instance <span class="token keyword">is</span> None<span class="token punctuation">:</span>            Singleton<span class="token punctuation">.</span>_instance <span class="token operator">=</span> object<span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>Singleton<span class="token punctuation">)</span>        <span class="token keyword">return</span> Singleton<span class="token punctuation">.</span>_instancea <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>get_instance<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>get_instance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><h3 id="方法七：利用名字覆盖"><a href="#方法七：利用名字覆盖" class="headerlink" title="方法七：利用名字覆盖"></a>方法七：利用名字覆盖</h3><p>这里采用的是一种名字覆盖的思路</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> selfSingleton <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span>Singleton<span class="token punctuation">.</span>foo<span class="token punctuation">(</span><span class="token punctuation">)</span>a <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> Singleton<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span></code></pre><h3 id="方法八：使用模块"><a href="#方法八：使用模块" class="headerlink" title="方法八：使用模块"></a>方法八：使用模块</h3><p>Python的模块就是天然的单例模式，因为模块在第一次导入时，会生成.pyc文件，当第二次导入时，就会直接加载.pyc文件，而不会再次执行模块代码。</p><p>因此我们只需把相关的函数和数据定义在一个模块中，就可以获得一个单例对象了。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># MySingleton.py</span><span class="token keyword">class</span> <span class="token class-name">MySingleton</span><span class="token punctuation">:</span>　　<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>　　　　<span class="token keyword">pass</span>sinleton <span class="token operator">=</span> MySingleton<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>将上面的代码保存在文件MySingleton.py中，然后这样使用：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> MySingleton <span class="token keyword">import</span> sinletonsingleton<span class="token punctuation">.</span>foo<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="方法九：共享属性"><a href="#方法九：共享属性" class="headerlink" title="方法九：共享属性"></a>方法九：共享属性</h3><p>所谓单例就是所有引用(实例、对象)拥有相同的状态(属性)和行为(方法)，同一个类的所有实例天然拥有相同的行为(方法)，只需要保证同一个类的所有实例具有相同的状态(属性)即可。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    _state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>        ob <span class="token operator">=</span> super<span class="token punctuation">(</span>Singleton<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>        ob<span class="token punctuation">.</span>__dict__ <span class="token operator">=</span> cls<span class="token punctuation">.</span>_state        <span class="token keyword">return</span> ob<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> <span class="token number">666</span>a <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>b <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span>  id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">False</span></code></pre><p>我们可以看到a和b是两个不同的对象，我们再看看它们的<code>__dict__</code>属性呢？</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2679828344048</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>b<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2679828344048</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">True</span></code></pre><p>不难发现这两不同的对象a、b，却共享了相同属性。所有实例共享属性的最简单直接的方法就是<code>__dict__</code>属性指向(引用) 同一个字典(dict)。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>实现单例模式的方法，详见上文内容。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>本文介绍了多种方法来实现单例模式，这其中涉及到了很多的Python高级语法，诸如decorator、metaclass、new、type、super等等。在面试过程以及实际工程项目中，根据实际情况来按需实现即可。关于单例模式的实现，你还能想到有哪些方式呢？</p><p>欢迎大家在评论区留言说出自己的看法。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之14 什么是单例以及应用场景？</title>
      <link href="/2019/06/07/interviewquestion-014-dan-li-ji-qi-ying-yong-chang-jing/"/>
      <url>/2019/06/07/interviewquestion-014-dan-li-ji-qi-ying-yong-chang-jing/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之14-什么是单例以及应用场景？"><a href="#Python面试题系列之14-什么是单例以及应用场景？" class="headerlink" title="Python面试题系列之14: 什么是单例以及应用场景？"></a>Python面试题系列之14: 什么是单例以及应用场景？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>什么是单例？请简述其使用场景。</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>先从一个例子说起。</p><p>假设我们去4S店买车，一下子提了两辆车。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 定义一个 MyCar 类</span><span class="token keyword">class</span> <span class="token class-name">MyCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span>Tesla_Model_3 <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span>Tesla_Model_X <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>我们查询下我们的订单号</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Tesla_Model_3 OrderID：{id(Tesla_Model_3)}'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Tesla_Model_X OrderID：{id(Tesla_Model_X)}'</span><span class="token punctuation">)</span>Tesla_Model_3 OrderID：<span class="token number">2698785399304</span>Tesla_Model_X OrderID：<span class="token number">2698785399360</span></code></pre><p>这里出现两个不同的订单号，不合理啊。我们同时提了两辆车，订单号应该是同一个才对啊。</p><p>这时单例对象就派上用场了。</p><p><strong>单例模式（Singleton Pattern）</strong>，它是一种常用的软件设计模式，该模式的主要目的是确保某一个类只有一个实例存在。当你希望在整个系统中，某个类只能出现一个实例时，单例对象就能派上用场。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 定义一个 MyCar 类</span><span class="token keyword">class</span> <span class="token class-name">MyCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 定义一个类属性保存对象</span>    __instance <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 如果 instance 为空证明是第一次创建实例</span>        <span class="token keyword">if</span> cls<span class="token punctuation">.</span>__instance <span class="token operator">==</span> None<span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 通过父类的__new__(cls)创建实例</span>            cls<span class="token punctuation">.</span>__instance <span class="token operator">=</span> object<span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>            <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instance        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 返回上一个对象的引用</span>            <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instanceTesla_Model_3 <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span>Tesla_Model_X <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>这里我们先把类属性初始化为 None，每次都对类属性做判断，如果类属性为 None，表示第一次创建，我们通过父类的<code>__new__(cls)</code>来创建实例。如果类属性不为 None，表示之前已经创建过了，直接返回上一个对象的实例就行。</p><p>我们现在再次打印看看。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Tesla_Model_3 OrderID：{id(Tesla_Model_3)}'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Tesla_Model_X OrderID：{id(Tesla_Model_X)}'</span><span class="token punctuation">)</span>Tesla_Model_3 OrderID：<span class="token number">2686250262992</span>Tesla_Model_X OrderID：<span class="token number">2686250262992</span></code></pre><p>通过上述方式改造后，我们看到此时两台车的订单号已经是相同了。无论通过哪台车，都能得到我们在购车时的订单号。</p><p>我们再来看看以下几种场景：</p><ul><li>Windows的资源管理器</li><li>网站计数器</li><li>线程池、数据库连接池等资源池</li><li>Python中用以日志记录的logger</li></ul><p>Windows的资源管理器，在Win桌面中我们打开一个回收站，这时当我们试图再次打开一个新的回收站时，Windows系统并不会为你弹出一个新的回收站窗口。也就是说在整个系统运行的过程中，系统只维护一个回收站的实例。这就是一个典型的单例模式运用。</p><p>事实上，我们在使用过程中并不存在需要同时打开两个回收站窗口的必要性。假如我每次创建回收站时都需要消耗大量的资源，而每个回收站之间资源是共享的，那么在没有必要多次重复创建该实例的情况下，创建了多个实例，这样做就会给系统造成不必要的负担，造成资源浪费。</p><p>再举一个栗子，网站的计数器。如果存在有多个计数器，每一个用户的访问都刷新计数器的值，这样的话记录的数值是难以同步的。但是如果采用单例模式实现就不会存在这样的问题，而且还可以避免线程安全问题。</p><p>同样的，多线程的线程池的设计一般也是采用单例模式，这是由于线程池需要方便对池中的线程进行控制。</p><p>上述这些使用场景中用到的其实都是单例模式。为什么一定要用单例模式，归纳来说：</p><ul><li>可以避免对资源的多重占用</li><li>避免对同一个资源文件的同时操作，造成文件状态不一致</li><li>减少内存开支，尤其是需要频繁创建和使用的类</li><li>设置全局访问点，优化和共享资源访问</li></ul><p>在协同开发中为了减少产生类似的实例对象来节省资源，以及整体项目中需要一个共享访问节点或共享数据的场景中，使用单例模式来开发是再合适不过了。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><strong>单例模式</strong>，保证一个类仅有一个实例，并提供一个访问他的全局访问点。</p><p>在协同开发中为了减少产生类似的实例对象来节省资源，以及整体项目中需要一个共享访问节点或共享数据的场景中，使用单例模式来开发是再合适不过了，具体场景可参考文中给出的例子。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>当然使用单例模式的前提，是我们的确可以用一个实例就能搞定要解决的问题，并不需要多个实例。如果每个实例都需要维护自己的状态，这种情况下单例模式肯定是不适用的。本篇介绍了单例模式的定义及使用场景，关于单例模式的实现，你又有多少种方式呢？</p><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之Python助你秒杀淘宝大单</title>
      <link href="/2019/06/04/pythonapps-spike-taobao-orders/"/>
      <url>/2019/06/04/pythonapps-spike-taobao-orders/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之Python助你秒杀淘宝大单"><a href="#Python小应用系列之Python助你秒杀淘宝大单" class="headerlink" title="Python小应用系列之Python助你秒杀淘宝大单"></a>Python小应用系列之Python助你秒杀淘宝大单</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>年中购物618大狂欢开始了，各大电商又开始了大力度的折扣促销，我们的小胖又给大家谋了一波福利，淘宝APP直接搜索：小胖发福利，每天领取三次粉丝专属现金大红包。</p><p>有了现金大红包，如何做到更省钱的剁手呢？今天给大家提供一种思路，用Python实现秒杀订单，借用自动化方式完成最优解。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><h2 id="2-需求分析-amp-前期准备"><a href="#2-需求分析-amp-前期准备" class="headerlink" title="2 需求分析&amp;前期准备"></a>2 需求分析&amp;前期准备</h2><h3 id="2-0-需求分析"><a href="#2-0-需求分析" class="headerlink" title="2.0 需求分析"></a>2.0 需求分析</h3><p>我们的目标是秒杀淘宝的订单，这里面有几个关键点，首先需要登录淘宝，其次你需要准备好订单，最后要在指定时间快速提交订单。</p><p>登录淘宝，这里就要用到一个爬虫利器Selenium，它是一个自动化测试工具，利用它我们可以驱动浏览器执行特定的动作，如点击、下拉等等操作，所见即所得。另外对于一些 JavaScript 渲染的页面来说，此种抓取方式非常有效。</p><h3 id="2-1-Selenium的安装"><a href="#2-1-Selenium的安装" class="headerlink" title="2.1 Selenium的安装"></a>2.1 Selenium的安装</h3><p>Selenium 的安装很简单，可采用如下方式。</p><pre class=" language-python"><code class="language-python">pip install selenium</code></pre><p>Selenium安装好之后，并不能直接使用，它需要与浏览器进行对接。这里拿Chrome浏览器为例。若想使用Selenium成功调用Chrome浏览器完成相应的操作，需要通过ChromeDriver来驱动。</p><h3 id="2-2-ChromeDriver的安装"><a href="#2-2-ChromeDriver的安装" class="headerlink" title="2.2 ChromeDriver的安装"></a>2.2 ChromeDriver的安装</h3><p>这里是ChromeDriver的官方下载地址。</p><p>链接：<a href="https://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="noopener">https://chromedriver.storage.googleapis.com/index.html</a></p><p>我们在下载之前先来确认下我们使用的Chrome浏览器版本。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194119.png" alt=""></p><p>通过ChromeDriver的下载链接，找到与之对应的Chrome浏览器版本，根据你电脑系统的平台类型进行下载。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194118.png" alt=""></p><p>下载完成之后，解压，将其放置在Python安装路径下Scripts文件夹中即可</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194124.png" alt=""></p><p>上述操作结束后，我们执行如下命令，测试一下</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token comment" spellcheck="true"># 打开Chrome浏览器</span>browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>代码执行后，若成功打开了浏览器，则证明你的ChromeDriver安装的没问题，可以正常愉快地使用Selenium了。</p><p>接下来，我们先来回顾下淘宝购物流程。 </p><h2 id="3-淘宝购物流程回顾"><a href="#3-淘宝购物流程回顾" class="headerlink" title="3 淘宝购物流程回顾"></a>3 淘宝购物流程回顾</h2><h3 id="3-1-首先要打开淘宝网站"><a href="#3-1-首先要打开淘宝网站" class="headerlink" title="3.1 首先要打开淘宝网站"></a>3.1 首先要打开淘宝网站</h3><p><a href="https://www.taobao.com" target="_blank" rel="noopener">https://www.taobao.com</a></p><p>换作使用Seleuinm方式，代码如下：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.taobao.com"</span><span class="token punctuation">)</span></code></pre><h3 id="3-2-我们登录淘宝才能进行下一步操作"><a href="#3-2-我们登录淘宝才能进行下一步操作" class="headerlink" title="3.2 我们登录淘宝才能进行下一步操作"></a>3.2 我们登录淘宝才能进行下一步操作</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194130.png" alt=""></p><p>换成Seleuinm方式，代码：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"亲，请登录"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>这时我们就要就跳到了一个扫码登录的页面，我们用手机进行扫码，登录成功之后进行下一步。</p><h3 id="3-3-登录成功之后，我们来打开购物车，链接如下："><a href="#3-3-登录成功之后，我们来打开购物车，链接如下：" class="headerlink" title="3.3 登录成功之后，我们来打开购物车，链接如下："></a>3.3 登录成功之后，我们来打开购物车，链接如下：</h3><p><a href="https://cart.taobao.com/cart.htm" target="_blank" rel="noopener">https://cart.taobao.com/cart.htm</a></p><p>换成Seleuinm方式，代码：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://cart.taobao.com/cart.htm"</span><span class="token punctuation">)</span></code></pre><h3 id="3-4-我们想要全选购物车中的商品，直接点击全选即可"><a href="#3-4-我们想要全选购物车中的商品，直接点击全选即可" class="headerlink" title="3.4 我们想要全选购物车中的商品，直接点击全选即可"></a>3.4 我们想要全选购物车中的商品，直接点击全选即可</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194132.png" alt=""></p><p>换成Seleuinm方式，代码：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"J_SelectAll1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>注：若你的购物车商品比较多，又不想全选购买，那就 手动 勾选想要下单的商品。</p><h3 id="3-5-勾选好商品后就可以“结算”下单"><a href="#3-5-勾选好商品后就可以“结算”下单" class="headerlink" title="3.5 勾选好商品后就可以“结算”下单"></a>3.5 勾选好商品后就可以“结算”下单</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194123.png" alt=""></p><p>换成Seleuinm方式，代码即：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"结 算"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="3-6-等待提交完订单后才算数"><a href="#3-6-等待提交完订单后才算数" class="headerlink" title="3.6 等待提交完订单后才算数"></a>3.6 等待提交完订单后才算数</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194128.png" alt=""></p><p>换成Seleuinm方式，代码即：</p><pre class=" language-python"><code class="language-python">browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'提交订单'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="3-7-订单成功秒下之后，接下来的付款，慢慢来就好。"><a href="#3-7-订单成功秒下之后，接下来的付款，慢慢来就好。" class="headerlink" title="3.7 订单成功秒下之后，接下来的付款，慢慢来就好。"></a>3.7 订单成功秒下之后，接下来的付款，慢慢来就好。</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194121.png" alt=""></p><h2 id="4-秒杀的实现"><a href="#4-秒杀的实现" class="headerlink" title="4 秒杀的实现"></a>4 秒杀的实现</h2><p>秒杀的实现，思路也很简单。这里有两个时间点，一是抢购时间，一是当前时间。只需要比较这两个时间点，到了抢购时间立即下单即可。</p><p>记录时间，需要使用<code>datetime</code>这个内置模块，代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> datetimenow <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S.%f'</span><span class="token punctuation">)</span></code></pre><h2 id="5-代码梳理"><a href="#5-代码梳理" class="headerlink" title="5 代码梳理"></a>5 代码梳理</h2><p>首先得登录淘宝，这里我们定义一个login函数</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 打开淘宝首页，通过扫码登录</span>    browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.taobao.com"</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"亲，请登录"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"亲，请登录"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"请尽快扫码登录"</span><span class="token punctuation">)</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></code></pre><p>接下来就是勾选购物车中的商品，这里我们定义一个picking函数</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">picking</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 打开购物车列表页面</span>    browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://cart.taobao.com/cart.htm"</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 是否全选购物车</span>    <span class="token keyword">if</span> method <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"J_SelectAll1"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"J_SelectAll1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token keyword">break</span>            <span class="token keyword">except</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"找不到购买按钮"</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"请手动勾选需要购买的商品"</span><span class="token punctuation">)</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></code></pre><p>等待抢购时间，定时秒杀，这里我们定义一个buy函数</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">buy</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S.%f'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 对比时间，时间到的话就点击结算</span>        <span class="token keyword">if</span> now <span class="token operator">></span> times<span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 点击结算按钮</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                <span class="token keyword">try</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"结 算"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"结 算"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"结算成功，准备提交订单"</span><span class="token punctuation">)</span>                        <span class="token keyword">break</span>                <span class="token keyword">except</span><span class="token punctuation">:</span>                    <span class="token keyword">pass</span>            <span class="token comment" spellcheck="true"># 点击提交订单按钮</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                <span class="token keyword">try</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'提交订单'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'提交订单'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"抢购成功，请尽快付款"</span><span class="token punctuation">)</span>                <span class="token keyword">except</span><span class="token punctuation">:</span>                    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"再次尝试提交订单"</span><span class="token punctuation">)</span>            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span></code></pre><h2 id="6-总结"><a href="#6-总结" class="headerlink" title="6 总结"></a>6 总结</h2><p>短短几十行代码就能秒杀淘宝订单，赶紧行动起来吧！</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Spike_Taobao_Orders/Spike_Taobao_Orders.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之13 类方法、实例方法、静态方法</title>
      <link href="/2019/05/28/interviewquestion-013-instancemethod-classmethod-staticmethod/"/>
      <url>/2019/05/28/interviewquestion-013-instancemethod-classmethod-staticmethod/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之13-类方法、实例方法、静态方法"><a href="#Python面试题系列之13-类方法、实例方法、静态方法" class="headerlink" title="Python面试题系列之13: 类方法、实例方法、静态方法"></a>Python面试题系列之13: 类方法、实例方法、静态方法</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>请简述下Python 中<code>类方法</code>、<code>实例方法</code>、<code>静态方法</code>有何区别？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>在Python的类中，实例方法（instance method），类方法（class method）与静态方法（static method）经常容易混淆，本文中通过几个例子逐一介绍下。</p><h4 id="实例方法·instance-method"><a href="#实例方法·instance-method" class="headerlink" title="实例方法·instance method"></a>实例方法·instance method</h4><p>Python的<code>实例方法</code>，用得最多也最为常见。先来看这个例子。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyCar</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>color <span class="token operator">=</span> color    <span class="token keyword">def</span> <span class="token function">car_color</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>color<span class="token punctuation">)</span>mycar1 <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span></code></pre><p>调用一下看看</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> mycar1<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span><span class="token punctuation">)</span>red</code></pre><p>上述例子中，car_color为一个实例方法。实例方法第一个参数为self，当使用mycar1.car_color()调用实例方法时，实例mycar1会传递给self参数，这样self参数就可以引用当前正在调用实例方法的实例。</p><h4 id="类方法·class-method"><a href="#类方法·class-method" class="headerlink" title="类方法·class method"></a>类方法·class method</h4><p>Python 的<code>类方法</code>，采用装饰器<code>@classmethod</code>来定义，我们来看这个例子。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyCar</span><span class="token punctuation">:</span>    num <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        MyCar<span class="token punctuation">.</span>num <span class="token operator">+=</span> <span class="token number">1</span>    @classmethod    <span class="token keyword">def</span> <span class="token function">car_num</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>numcar1 <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span>car2 <span class="token operator">=</span> MyCar<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>我们调用一下看看</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> MyCar<span class="token punctuation">.</span>car_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">2</span> </code></pre><p>这个例子中我们来统计类MyCar实例的个数。于是定义了一个类变量num来存放，然后我们通过装饰器@classmethod的使用，方法car_num被定义成一个类方法。在调用类方法时，Python会将类（class MyCar）传递给cls，这样在car_num内部就可以引用类变量num。<br>由于在调用类方法时，只需要将类型本身传递给类方法，因此，我们既可以通过类、也可以通过实例，来调用类方法。</p><h4 id="静态方法·static-method"><a href="#静态方法·static-method" class="headerlink" title="静态方法·static method"></a>静态方法·static method</h4><p>Python中还有一种方法，采用装饰器<code>@staticmethod</code>来定义，我们称之为<code>静态方法</code>。先来看看这个例子。</p><p>我们定义一个“三角形”的类，通过传入3条边的长度来构造出三角形，并提供计算周长的方法。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt<span class="token keyword">class</span> <span class="token class-name">Triangle</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>_a <span class="token operator">=</span> a        self<span class="token punctuation">.</span>_b <span class="token operator">=</span> b        self<span class="token punctuation">.</span>_c <span class="token operator">=</span> c    <span class="token keyword">def</span> <span class="token function">perimeter</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_a <span class="token operator">+</span> self<span class="token punctuation">.</span>_b <span class="token operator">+</span> self<span class="token punctuation">.</span>_c</code></pre><p>但是小学数字老师告诉我们，任意给的三条边长未必能构造出三角形。三条边是需要满足一定条件的：</p><pre class=" language-css"><code class="language-css"><span class="token punctuation">(</span>a + b > c<span class="token punctuation">)</span> and <span class="token punctuation">(</span>b + c > a<span class="token punctuation">)</span> and <span class="token punctuation">(</span>a + c > b<span class="token punctuation">)</span></code></pre><p>所以我们可以先写一个方法，来验证三条边长是否可以构成三角形。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">is_valid</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">></span> c <span class="token operator">and</span> b <span class="token operator">+</span> c <span class="token operator">></span> a <span class="token operator">and</span> a <span class="token operator">+</span> c <span class="token operator">></span> b</code></pre><p>这个方法很显然就不是对象方法，因为在调用这个方法时三角形对象尚未创建出来（因为都不知道三条边能不能构成三角形），即这个方法应属于三角形类，但并不属于三角形对象的。这就用到了我们的静态方法。具体代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Triangle</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>_a <span class="token operator">=</span> a        self<span class="token punctuation">.</span>_b <span class="token operator">=</span> b        self<span class="token punctuation">.</span>_c <span class="token operator">=</span> c    @staticmethod    <span class="token keyword">def</span> <span class="token function">is_valid</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">></span> c <span class="token operator">and</span> b <span class="token operator">+</span> c <span class="token operator">></span> a <span class="token operator">and</span> a <span class="token operator">+</span> c <span class="token operator">></span> b    <span class="token keyword">def</span> <span class="token function">perimeter</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_a <span class="token operator">+</span> self<span class="token punctuation">.</span>_b <span class="token operator">+</span> self<span class="token punctuation">.</span>_c</code></pre><p>然后我们给定三个边长，并计算由其组成的三角形的周长。</p><pre class=" language-python"><code class="language-python">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token keyword">if</span> Triangle<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>    t <span class="token operator">=</span> Triangle<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'无法组成三角形'</span><span class="token punctuation">)</span></code></pre><p>我们介绍完这三种方法定义及使用场景的区别，接下来我们看看它们在调用时的差异。</p><p>调用上的区别<br>还是通过一个例子来说明，这里定义一个MyClass类，同时定义了实例、类、静态三种方法。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">instance_m</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'executing instance_m({self}, {x})'</span><span class="token punctuation">)</span>    @classmethod    <span class="token keyword">def</span> <span class="token function">class_m</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'executing class_m({cls}, {x})'</span><span class="token punctuation">)</span>    @staticmethod    <span class="token keyword">def</span> <span class="token function">static_m</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'executing static_m({x})'</span><span class="token punctuation">)</span>mc <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>接下来我们调用这三种实例，分析下输出的结果</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用实例方法</span>mc<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>instance_m<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-----------------------------------------'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 调用类方法</span>mc<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>MyClass<span class="token punctuation">.</span>class_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>class_m<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-----------------------------------------'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 调用静态方法</span>mc<span class="token punctuation">.</span>static_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>MyClass<span class="token punctuation">.</span>static_m<span class="token punctuation">(</span><span class="token string">'人人都是Pythonista'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>static_m<span class="token punctuation">)</span></code></pre><p>以下是执行结果</p><pre class=" language-python"><code class="language-python">executing instance_m<span class="token punctuation">(</span><span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>MyClass object at <span class="token number">0x0000023DA63E7E48</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>bound method MyClass<span class="token punctuation">.</span>instance_m of <span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>MyClass object at <span class="token number">0x0000023DA63E7E48</span><span class="token operator">>></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>executing class_m<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'__main__.MyClass'</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span>executing class_m<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'__main__.MyClass'</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>bound method MyClass<span class="token punctuation">.</span>class_m of <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'__main__.MyClass'</span><span class="token operator">>></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>executing static_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>executing static_m<span class="token punctuation">(</span>人人都是Pythonista<span class="token punctuation">)</span><span class="token operator">&lt;</span>function MyClass<span class="token punctuation">.</span>static_m at <span class="token number">0x0000023DA63E6048</span><span class="token operator">></span></code></pre><p>对于实例方法，调用时会把实例<code>mc</code>作为第一个参数传递给<code>self</code>参数。因此，调用mc.instance_m(666)时输出了实例mc的地址。</p><p>对于类方法，调用时会把类<code>MyClass</code>作为第一个参数传递给<code>cls</code>参数。因此，调用mc.instance_m(666)时输出了MyClass类型信息。 前面提到，可以通过类也可以通过实例来调用类方法，在上述代码中，我们再一次进行了验证。</p><p>对于静态方法，调用时并不需要传递类或者实例。其实，静态方法很像我们在类外定义的函数，只不过静态方法可以通过类或者实例来调用而已。</p><p>上面这个例子，我们发现类方法、静态方法都可以通过类直接调用，那么实例方法呢？</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> MyClass<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>TypeError                                 Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token operator">&lt;</span>ipython<span class="token operator">-</span>input<span class="token number">-23</span><span class="token operator">-</span><span class="token number">082125d2908b</span><span class="token operator">></span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">1</span> MyClass<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>TypeError<span class="token punctuation">:</span> instance_m<span class="token punctuation">(</span><span class="token punctuation">)</span> missing <span class="token number">1</span> required positional argument<span class="token punctuation">:</span> <span class="token string">'x'</span></code></pre><p>实例方法不能通过类直接调用，它需要一个实例绑定，比如写成如下形式：</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> MyClass<span class="token punctuation">.</span>instance_m<span class="token punctuation">(</span>mc<span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span>executing instance_m<span class="token punctuation">(</span><span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>MyClass object at <span class="token number">0x0000023DA63E7E48</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span></code></pre><p>从上面的例子，我们还可以看到：</p><p>实例方法instance_m与实例mc进行了绑定。</p><pre class=" language-python"><code class="language-python"><span class="token operator">&lt;</span>bound method MyClass<span class="token punctuation">.</span>instance_m of <span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>MyClass object at <span class="token number">0x0000023DA63E7E48</span><span class="token operator">>></span></code></pre><p>类方法class_m与类MyClass进行了绑定。</p><pre class=" language-python"><code class="language-python"><span class="token operator">&lt;</span>bound method MyClass<span class="token punctuation">.</span>class_m of <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'__main__.MyClass'</span><span class="token operator">>></span></code></pre><p>静态方法static_m并不会与类MyClass或者实例mc绑定。</p><pre class=" language-python"><code class="language-python"><span class="token operator">&lt;</span>function MyClass<span class="token punctuation">.</span>static_m at <span class="token number">0x0000023DA63E6048</span><span class="token operator">></span></code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><strong>实例方法</strong>，<em>Instance methods</em>，需要一个类实例，并且可以通过<code>self</code>访问实例。<br>只有实例对象可以调用。</p><p><strong>类方法</strong>，<em>Class methods</em>，类方法不是绑定到对象上，而是绑定在类上的方法。不需要类实例。他们无法访问实例，但它们可以通过cls访问类本身。<br>在定义时需在上方使用<code>@classmethod</code>进行装饰，类对象和实例对象都可调用。</p><p><strong>静态方法</strong>，<em>Static methods</em>，在类中无需实例参与即可调用，无权访问<code>cls</code>或<code>self</code>。它们像常规函数一样工作，但属于类的命名空间。<br>在定义时需在其上方使用<code>@staticmethod</code>进行装饰，类对象和实例对象都可调用。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>以上就是Python中的实例方法、类方法与静态方法的区别，在面试时可以从定义及调用时差异入手，来解释这三种方法。欢迎大家在评论区留言说出自己的看法。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之12 __init__和__new__区别？</title>
      <link href="/2019/05/17/interviewquestion-012-init-he-new-qu-bie/"/>
      <url>/2019/05/17/interviewquestion-012-init-he-new-qu-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之12-init和new区别？"><a href="#Python面试题系列之12-init和new区别？" class="headerlink" title="Python面试题系列之12: init和new区别？"></a>Python面试题系列之12: <strong>init</strong>和<strong>new</strong>区别？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>请简述下<code>__init__</code>和<code>__new__</code>区别？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>在定义一个类时我们通常会使用<code>__init__</code>的方法，在实例化对象的时候对属性进行设置。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Star</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        self<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>star <span class="token operator">=</span> Star<span class="token punctuation">(</span><span class="token string">'人人都是Pythonista'</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">)</span></code></pre><p>但事实上，创建一个类的过程是分为两步的，首先是创建类的对象，第二步就是对类进行初始化。而这个<code>__new__</code>正是用来创建类并返回这个类的实例，<code>__init__</code>只是将传入的参数来初始化该实例。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Star</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'__init__ is called'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>id <span class="token operator">=</span> id    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 打印 __new__方法中的相关信息</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'__new__ is called'</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 最后返回父类的方法</span>        <span class="token keyword">return</span> super<span class="token punctuation">(</span>Star<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    star <span class="token operator">=</span> Star<span class="token punctuation">(</span><span class="token string">'人人都是Pythonista'</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">)</span></code></pre><p>我们看看输出的结果：</p><pre class=" language-python"><code class="language-python">__new__ <span class="token keyword">is</span> called<span class="token punctuation">(</span><span class="token string">'人人都是Pythonista'</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">)</span>__init__ <span class="token keyword">is</span> called</code></pre><p>从上面代码的输出结果不难发现<code>__new__</code>和<code>__init__</code>被调用的顺序：<code>__new__</code>函数首先被调用，构造了一个<code>Star</code>的实例；接着<code>__init__</code>函数在<code>__new__</code>函数返回一个实例的时候被调用，并且这个实例作为<code>self</code>参数被传入了<code>__init__</code>函数。</p><p>除了功能上的差异外，两者的参数也是不同的。<code>__new__</code>方式的第一个参数是<code>cls</code>，而<code>__init__</code>方式的第一个参数是<code>self</code>。</p><p>当我们调用<code>__new__</code>时，该类的实例还并不存在（换句话就是self所引用的对象还不存在），所以需要接收一个类作为参数，从而产生一个实例。而当我们在调用<code>__init__</code>时，实例已经存在，此时<code>__init__</code>用<code>self</code>作为参数，就可以对该实例进行必要的初始化操作。</p><p>这里需要注意的是：如果<code>__new__</code>返回一个已经存在的实例（无论是哪个类的），<code>__init__</code>方法是不会被调用的。举个栗子：</p><pre class=" language-python"><code class="language-python">Car <span class="token operator">=</span> <span class="token string">'Tesla'</span> <span class="token keyword">class</span> <span class="token class-name">Star</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__new__ is called"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Car    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__init__ is called"</span><span class="token punctuation">)</span>Star<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>执行结果如下：</p><pre class=" language-python"><code class="language-python">__new__ <span class="token keyword">is</span> calledTesla</code></pre><p>那如果我们在<code>__new__</code>方法中不返回任何对象呢？举个栗子：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Star</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__new__ is called"</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__init__ is called"</span><span class="token punctuation">)</span>Star<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>执行结果如下：</p><pre class=" language-python"><code class="language-python">__new__ <span class="token keyword">is</span> calledNone</code></pre><p>由此可见，若<code>__new__</code>方法不返回对象的话，此时就不会有任何对象被创建，<code>__init__</code>方法同样也不会被调用（因为并没有对象来初始化）。</p><p>综上所述，只有在<code>__new__</code>返回一个新创建属于该类的实例时，当前类的<code>__init__</code>才会被调用。</p><p><strong>还有一点需要注意的是</strong>：<code>__new__</code>方法总是需要返回该类的一个实例，而<code>__init__</code>不能返回除了<code>None</code>的任何值。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Star</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__new__ is called"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> super<span class="token punctuation">(</span>Star<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"__init__ is called"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token string">'人人都是Pythonista'</span>Star<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>执行之后，就会直接报错，提示</p><pre class=" language-python"><code class="language-python">TypeError<span class="token punctuation">:</span> __init__<span class="token punctuation">(</span><span class="token punctuation">)</span> should <span class="token keyword">return</span> None</code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><ol><li><code>__new__</code>是一个类方法，它返回的是一个实例</li><li><code>__init__</code>是一个实例方法，它什么都不返回</li><li>只有在<code>__new__</code>返回一个新创建属于该类的实例时，当前类的<code>__init__</code>才会被调用。</li></ol><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>在理解<code>__init__</code>和<code>__new__</code>的区别之后，思考下<code>__new__</code>还有哪些应用场景呢？好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之11 变态青蛙跳</title>
      <link href="/2019/05/16/interviewquestion-011-bian-tai-qing-wa-tiao/"/>
      <url>/2019/05/16/interviewquestion-011-bian-tai-qing-wa-tiao/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之11-变态青蛙跳"><a href="#Python面试题系列之11-变态青蛙跳" class="headerlink" title="Python面试题系列之11: 变态青蛙跳"></a>Python面试题系列之11: 变态青蛙跳</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>一只青蛙一次可以<strong>跳上1级台阶</strong>，也可以<strong>跳上2级</strong>……它也可以<strong>跳上n级</strong>。求该青蛙跳上一个n级的台阶总共有多少种跳法？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>这个题目与前一篇看起来很像。在上一题中限定了青蛙一次跳台阶的阶数，要么一阶要么两阶，我们分析最终得出是斐波那契数列。那么这道题又是什么数学模型呢？</p><p>假设台阶为n级，青蛙可以通过一次或者多次来完成跳跃。<br>跳一次：从起点直接跳到终点。<br>跳多次：从起点跳了若干步后(先到达 1 ~ n-1 级的中间任一级)再跳到n级。<br>所以最终青蛙的跳数可以这样表述： 跳到 1级 ~ n-1级 每级可能的方法数（再跳到n级） + 1（直接跳到n级）</p><p>即，F(n)可以表示为： F(n) = F(n-1) + F(n-2) + … + F(1) + 1</p><p>又因为 F(n-1) = F(n-2) + F(n-3) +…_F(1) + 1</p><p>进而可以转化为 F(n) = F(n-1) + F(n-1)</p><p>最终可得到 F(n) = 2F(n-1)</p><p>题目分析完了，答案也就出来了，接下来就是具体的代码。</p><h4 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">jumpFloorII</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> number <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> number    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> jumpFloorII<span class="token punctuation">(</span>number<span class="token number">-1</span><span class="token punctuation">)</span></code></pre><h4 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h4><p>我们还可以借助<code>lambda</code>函数来实现，一行代码搞定</p><pre class=" language-python"><code class="language-python">fII <span class="token operator">=</span> <span class="token keyword">lambda</span> n<span class="token punctuation">:</span> n <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token keyword">else</span> <span class="token number">2</span> <span class="token operator">*</span> fII<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span></code></pre><h4 id="解法三"><a href="#解法三" class="headerlink" title="解法三"></a>解法三</h4><p>其实在仔细分析后不难发现<strong>n级</strong>台阶的跳法还表示为<strong>2的(n-1)幂</strong>，所以就可以直接写成：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">jumpFloorII</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> <span class="token number">2</span><span class="token operator">**</span><span class="token punctuation">(</span>number<span class="token number">-1</span><span class="token punctuation">)</span></code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>分析过程及具体代码见上文。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>两个相似的青蛙跳台阶问题，得到的结果却是完全不同的。在面试过程中一定要看清题目！其实只要分析出题目所对应的数学模型，问题也就会迎刃而解😁😁<br>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之10 青蛙跳台阶</title>
      <link href="/2019/05/13/interviewquestion-010-qing-wa-tiao-tai-jie/"/>
      <url>/2019/05/13/interviewquestion-010-qing-wa-tiao-tai-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之10-青蛙跳台阶"><a href="#Python面试题系列之10-青蛙跳台阶" class="headerlink" title="Python面试题系列之10: 青蛙跳台阶"></a>Python面试题系列之10: 青蛙跳台阶</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>这个题目，我们看到题干中青蛙在跳台阶的时候：一次跳跃要么1阶、要么2阶，这是个前提。</p><p>有了这个限定，我们进行详细分析下：<br>假定第一次跳的是1阶，那么剩下的是n-1个台阶，跳法是f(n-1)<br>假定第一次跳的是2阶，那么剩下的是n-2个台阶，跳法是f(n-2)<br>通过第1/2步的假设，总的跳法则可用这种形式表示 f(n) = f(n-1) + f(n-2)<br>再结合实际的情况：当只有一阶的时候 f(1) = 1，当只有两阶的时候可以有 f(2) = 2<br>这样不难发现，最终得出的是一个斐波那契数列，有没有很惊喜😉😉😉</p><pre class=" language-python"><code class="language-python">           <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    f<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">|</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>           <span class="token operator">|</span> f<span class="token punctuation">(</span>n<span class="token number">-1</span><span class="token punctuation">)</span><span class="token operator">+</span>f<span class="token punctuation">(</span>n<span class="token number">-2</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token punctuation">(</span>n<span class="token operator">></span><span class="token number">2</span><span class="token punctuation">,</span>n为整数<span class="token punctuation">)</span></code></pre><p>好了，题目分析完了，接下来就是具体的代码。这里给大家提供多达四种解法。</p><h4 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">jumpFloor</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> len<span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> number<span class="token punctuation">:</span>        res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> res<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> number <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> res<span class="token punctuation">[</span>number<span class="token number">-1</span><span class="token punctuation">]</span></code></pre><h4 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h4><p>定义一个装饰器，来看看利用装饰器的解法</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">moo</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> args <span class="token operator">not</span> <span class="token keyword">in</span> cache<span class="token punctuation">:</span>            cache<span class="token punctuation">[</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>        <span class="token keyword">return</span> cache<span class="token punctuation">[</span>args<span class="token punctuation">]</span>    <span class="token keyword">return</span> wrap@moo<span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">return</span> fib<span class="token punctuation">(</span>i<span class="token number">-1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>i<span class="token number">-2</span><span class="token punctuation">)</span></code></pre><h4 id="解法三"><a href="#解法三" class="headerlink" title="解法三"></a>解法三</h4><p>利用Python的解构来实现</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>    <span class="token keyword">for</span> _ <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b    <span class="token keyword">return</span> b</code></pre><h4 id="解法四"><a href="#解法四" class="headerlink" title="解法四"></a>解法四</h4><p>我们还可以借助<code>lambda</code>函数来实现，一行代码搞定</p><pre class=" language-python"><code class="language-python">fib <span class="token operator">=</span> <span class="token keyword">lambda</span> n<span class="token punctuation">:</span> n <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token keyword">else</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>这个跳台阶题目，当我们分析出它实际就是一个斐波那契数列后，问题是不是迎刃而解。<br>具体代码见上文。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>以上四种解法，大家更中意哪种解法呢？如果大家有独特的解法，欢迎大家在评论区留言分享~</p><p>这里还有一个相似的问题留给大家：一只青蛙一次可以<strong>跳上1级台阶</strong>，也可以<strong>跳上2级</strong>……它也可以<strong>跳上n级</strong>。求该青蛙跳上一个n级的台阶总共有多少种跳法。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之09 Python字典与json的异同？</title>
      <link href="/2019/05/10/interviewquestion-009-python-zi-dian-yu-json-de-yi-tong/"/>
      <url>/2019/05/10/interviewquestion-009-python-zi-dian-yu-json-de-yi-tong/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之09-Python字典与json的异同？"><a href="#Python面试题系列之09-Python字典与json的异同？" class="headerlink" title="Python面试题系列之09: Python字典与json的异同？"></a>Python面试题系列之09: Python字典与json的异同？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>Python<code>字典</code>与<code>json</code>的异同？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><h3 id="dict-与-json-的异同"><a href="#dict-与-json-的异同" class="headerlink" title="dict 与 json 的异同"></a>dict 与 json 的异同</h3><p>从形式来讲，这两者的确很像，都为<code>key</code>:<code>value</code>的形式。</p><pre class=" language-python"><code class="language-python">dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token string">'Pythonista'</span><span class="token punctuation">,</span> <span class="token string">'ID'</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">'Owner'</span><span class="token punctuation">:</span> <span class="token string">'MiracleYoung'</span><span class="token punctuation">}</span>j <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"Pythonista"</span><span class="token punctuation">,</span> <span class="token string">"ID"</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">"Owner"</span><span class="token punctuation">:</span> <span class="token string">"MiracleYoung"</span><span class="token punctuation">}</span></code></pre><p>本质上来讲，<code>字典</code>是一种数据结构，<code>json</code>是一种格式。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">,</span> type<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">></span></code></pre><p><code>dict</code>：是一个完整的数据结构，是对<code>Hash Table</code>这一数据结构的一种实现，是一套从存储到提取都封装好了的方案。它使用内置的哈希函数来规划<code>key</code>对应<code>value</code>的存储位置，从而获得<code>O(1)</code>的数据读取速度。<br><code>json</code>：是一种数据格式，是具有一定规则的字符串，方便在不同平台上处理其中包含的数据。可以被解析成Python的<code>dict</code>或者其他形式。</p><p>字典有很多内置函数，有多种调用方法，而<code>json</code>是数据打包的一种格式，并不像字典具备操作性，并且是格式就会有一些形式上的限制，比如<code>json</code>的格式要求必须且只能使用双引号作为key或者值的边界符号，不能使用单引号，而且<code>“key”</code>必须使用边界符（双引号），但字典就无所谓了。</p><p>上面我们已经知道，字典的格式是<code>dict</code>，<code>json</code>的格式是<code>str</code>，在传输的时候用的是字符串，所以如果要传输字典内容，就需要先进行字典转<code>json</code>，接下来我们就来看看两者之间的转化。</p><h3 id="dict-与-json-的互相转化"><a href="#dict-与-json-的互相转化" class="headerlink" title="dict 与 json 的互相转化"></a>dict 与 json 的互相转化</h3><p>在<code>Python</code>语言中，<code>json</code>数据与<code>dict</code>字典之间的转化是必不可少的操作。在<code>Python</code>中自带<code>json</code>库，可直接通过<code>import json</code>导入。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> json</code></pre><p><code>json</code>模块有4个方法：</p><ul><li>loads()：将json数据转化成dict数据</li><li>dumps()：将dict数据转化成json数据</li><li>load()：从json文件中读取数据，转成dict数据</li><li>dump()：将dict数据转化成json数据后写入json文件</li></ul><h5 id="dumps方法"><a href="#dumps方法" class="headerlink" title="dumps方法"></a>dumps方法</h5><p>dict数据 &gt;&gt;&gt; json数据</p><pre class=" language-python"><code class="language-python">dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>dic<span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Pythonista'</span>dic<span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">91155859</span>dic<span class="token punctuation">[</span><span class="token string">'Owner'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'MiracleYoung'</span><span class="token keyword">print</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span>  <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token string">'Pythonista'</span><span class="token punctuation">,</span> <span class="token string">'ID'</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">'Owner'</span><span class="token punctuation">:</span> <span class="token string">'MiracleYoung'</span><span class="token punctuation">}</span>j <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"Pythonista"</span><span class="token punctuation">,</span> <span class="token string">"ID"</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">"Owner"</span><span class="token punctuation">:</span> <span class="token string">"MiracleYoung"</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">,</span> type<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">></span></code></pre><h5 id="loads方法"><a href="#loads方法" class="headerlink" title="loads方法"></a>loads方法</h5><p>json数据 &gt;&gt;&gt; dict数据</p><pre class=" language-python"><code class="language-python">j <span class="token operator">=</span> <span class="token string">'{"Name": "Pythonista", "ID": 91155859, "Owner": "MiracleYoung"}'</span>dic <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token string">'Pythonista'</span><span class="token punctuation">,</span> <span class="token string">'ID'</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">'Owner'</span><span class="token punctuation">:</span> <span class="token string">'MiracleYoung'</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span> type<span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span></code></pre><h5 id="dump方法"><a href="#dump方法" class="headerlink" title="dump方法"></a>dump方法</h5><p>dict数据 &gt;&gt;&gt; json数据，并写入json文件</p><pre class=" language-python"><code class="language-python">dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>dic<span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Pythonista'</span>dic<span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">91155859</span>dic<span class="token punctuation">[</span><span class="token string">'Owner'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'MiracleYoung'</span><span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'pythonista.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 上述操作后，会在目录下生成一个 pythonista.json 的文件，文件内容是dict数据转成的json数据。</span></code></pre><h5 id="load方法"><a href="#load方法" class="headerlink" title="load方法"></a>load方法</h5><p>读取json文件 &gt;&gt;&gt; dict数据</p><pre class=" language-python"><code class="language-python"><span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'pythonista.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    dic <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token string">'Pythonista'</span><span class="token punctuation">,</span> <span class="token string">'ID'</span><span class="token punctuation">:</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token string">'Owner'</span><span class="token punctuation">:</span> <span class="token string">'MiracleYoung'</span><span class="token punctuation">}</span></code></pre><p>从上述的例子不难看出：<code>json.dumps()</code>/<code>json.loads()</code>用来编码和解码json字符串数据的；而<code>json.dump()</code>/ <code>json.load()</code>用来处理文件的。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>Python的<code>字典</code>，是一种数据结构。<code>JSON</code>，是一种数据传输格式。</p><ul><li><code>json</code>，就是一个根据某种约定格式编写的纯字符串，不具备任何数据结构的特征。</li><li>python的<code>字典</code>，其的字符串表现形式的规则看上去和 json 类似，但是字典本身是一个完整的数据结构，实现了一切自身该有的算法。</li></ul><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>读完本篇内容，想必大家对Python的<code>字典</code>与<code>json</code>差异应该很清楚了吧？从本质上看差异就很容易抓住重点。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之08 设计删除列表中的重复元素</title>
      <link href="/2019/05/09/interviewquestion-008-shan-chu-lie-biao-zhong-de-chong-fu-yuan-su/"/>
      <url>/2019/05/09/interviewquestion-008-shan-chu-lie-biao-zhong-de-chong-fu-yuan-su/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之08-设计删除列表中的重复元素？"><a href="#Python面试题系列之08-设计删除列表中的重复元素？" class="headerlink" title="Python面试题系列之08: 设计删除列表中的重复元素？"></a>Python面试题系列之08: 设计删除列表中的重复元素？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>请写出一段 Python 代码，实现删除一个 list 里面的重复元素?</p><pre class=" language-python"><code class="language-python">list_ori <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>去除重复元素，最常用的就是采用内置的<code>set</code>方法</p><pre class=" language-python"><code class="language-python">list_ori <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>l0 <span class="token operator">=</span> list<span class="token punctuation">(</span>set<span class="token punctuation">(</span>list_ori<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l0<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">]</span></code></pre><p>方法一<br>上面例子中，我们使用set方法虽然实现了去重，但打乱了元素的排列顺序。</p><p>若想要保持它们原本的排序，我们可以利用上一篇提到的list操作中的sort方法来实现，只需把原列表的索引设置为key。</p><pre class=" language-python"><code class="language-python">list_ori <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>l1 <span class="token operator">=</span> list<span class="token punctuation">(</span>set<span class="token punctuation">(</span>list_ori<span class="token punctuation">)</span><span class="token punctuation">)</span>l1<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span>list_ori<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>看过上篇文章的同学，肯定会想到既然sort方法可以实现这个需求，那么用sorted函数自然也是可以的。</p><pre class=" language-python"><code class="language-python">list_ori <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>l2 <span class="token operator">=</span> sorted<span class="token punctuation">(</span>set<span class="token punctuation">(</span>list_ori<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span>list_ori<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><p>这里我们不再借助内置的set、sort/sorted方法，再换个思路，用for循环来实现这个需求：用for循环遍历列表，将取出元素存入新列表中，在存入时只需判断元素是否已存在即可实现去重的效果。</p><pre class=" language-python"><code class="language-python">list_ori <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>l3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> list_ori<span class="token punctuation">:</span>    <span class="token keyword">if</span> i <span class="token operator">not</span> <span class="token keyword">in</span> l3<span class="token punctuation">:</span>        l3<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l3<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><h3 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h3><p>再换一个思路：<strong>引入临时变量</strong>。我们声明一个临时变量tmp，设定初始值tmp=data[0], index=0。对原列表排序后，执行遍历操作，若data[i]与tmp相同则跳过；当两者值不同时：将tmp赋值给data[index]，然后将data[i]赋值给tmp、同时index加1。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">l4</span><span class="token punctuation">(</span>data<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>    data <span class="token operator">=</span> sorted<span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token operator">=</span>data<span class="token punctuation">.</span>index<span class="token punctuation">)</span>    tmp <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> tmp <span class="token operator">==</span> v<span class="token punctuation">:</span>            <span class="token keyword">continue</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            data<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> tmp            tmp <span class="token operator">=</span> v            index <span class="token operator">+=</span> <span class="token number">1</span>    data<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> tmp <span class="token comment" spellcheck="true"># 上面for循环中最后一次的tmp值没有赋给data，这里要补上</span>    <span class="token keyword">return</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># 因为index从0开始，所以此处需加1</span></code></pre><p>接下来我们调用函数，看下是否和前面三种方法得到的结果一致</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>l4<span class="token punctuation">(</span>data<span class="token operator">=</span>list_ori<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><p>这种方法的空间复杂度为O(1)，时间复杂度为O(N)。与方法三相比，这里仅遍历了一次，算法上已是最优解了。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>此问题的解决方案，详见上文所述。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>俗话说“条条大路通罗马”，用python代码实现这个列表去重的需求，远不止上述这些方法。欢迎大家在评论区留言给出自己的解决方案。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之07 sort 和 sorted 的区别</title>
      <link href="/2019/05/08/interviewquestion-007-sort-he-sorted-de-qu-bie/"/>
      <url>/2019/05/08/interviewquestion-007-sort-he-sorted-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之07-请简述下-sort-和-sorted-的区别？"><a href="#Python面试题系列之07-请简述下-sort-和-sorted-的区别？" class="headerlink" title="Python面试题系列之07: 请简述下 sort 和 sorted 的区别？"></a>Python面试题系列之07: 请简述下 sort 和 sorted 的区别？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>作为python的内置的排序函数，<code>sort</code>和<code>sorted</code>有什么区别？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>这两个函数都是用来排序的，如下：</p><pre class=" language-python"><code class="language-python">L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>L<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span></code></pre><p>既然都能实现排序，作为内置的排序函数，为什么还需要两个呢？毕竟它们俩长得也很像的啊，究竟有什么区别呢？🤔🤔</p><p>我们通过下面这组例子观察研究一下。</p><pre class=" language-python"><code class="language-python">List_A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">,</span><span class="token string">'h'</span><span class="token punctuation">,</span><span class="token string">'o'</span><span class="token punctuation">,</span><span class="token string">'n'</span><span class="token punctuation">,</span><span class="token string">'i'</span><span class="token punctuation">,</span><span class="token string">'s'</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span>List_A_new <span class="token operator">=</span> List_A<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>List_A<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>List_A_new<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> NoneList_B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">,</span><span class="token string">'h'</span><span class="token punctuation">,</span><span class="token string">'o'</span><span class="token punctuation">,</span><span class="token string">'n'</span><span class="token punctuation">,</span><span class="token string">'i'</span><span class="token punctuation">,</span><span class="token string">'s'</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span>List_B_new <span class="token operator">=</span> sorted<span class="token punctuation">(</span>List_B<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>List_B<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>List_B_new<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span></code></pre><p>有木有感到很奇怪：使用<code>sort</code>函数排序后，List_A的值变成了排序后的结果，但是List_A_new的值却是None。对于使用<code>sorted</code>函数进行排序后，List_B的值并没有发生变化，而List_B_new的值才是排序后的列表。</p><p>要解决这个疑问，我们就需要从源头说起，先看看<code>sort</code>函数</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> help<span class="token punctuation">(</span>list<span class="token punctuation">.</span>sort<span class="token punctuation">)</span>Help on method_descriptor<span class="token punctuation">:</span>sort<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">/</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> key<span class="token operator">=</span>None<span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    Stable sort <span class="token operator">*</span>IN PLACE<span class="token operator">*</span><span class="token punctuation">.</span></code></pre><p>原来<code>sort()</code>方法是在原来的列表上直接进行排序，并没有返回一个新的列表，所以返回值为None！</p><p>再来看看<code>sorted</code>函数</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> help<span class="token punctuation">(</span>sorted<span class="token punctuation">)</span>Help on built<span class="token operator">-</span><span class="token keyword">in</span> function sorted <span class="token keyword">in</span> module builtins<span class="token punctuation">:</span>sorted<span class="token punctuation">(</span>iterable<span class="token punctuation">,</span> <span class="token operator">/</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> key<span class="token operator">=</span>None<span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    Return a new list containing all items <span class="token keyword">from</span> the iterable <span class="token keyword">in</span> ascending order<span class="token punctuation">.</span>    A custom key function can be supplied to customize the sort order<span class="token punctuation">,</span> <span class="token operator">and</span> the    reverse flag can be set to request the result <span class="token keyword">in</span> descending order<span class="token punctuation">.</span></code></pre><p>由上述定义可知，<code>sorted()</code>函数排序之后会返回一个新的列表，原来的列表并没有发生改变！</p><p>细心的同学应该发现了<code>sorted</code>函数比<code>sort</code>函数，多了一个参数<strong>iterable</strong>，这说明它可以为任意可迭代的对象进行排序。而<code>sort</code>函数只是列表中的方法，只能用于列表中的排序。</p><p>以下是使用<code>sorted()</code>对字符串，元组，字典进行排序。</p><pre class=" language-python"><code class="language-python">S <span class="token operator">=</span> <span class="token string">'pythonista'</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span>T <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>D <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'1'</span><span class="token punctuation">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">:</span> <span class="token string">'c'</span><span class="token punctuation">}</span>sorted<span class="token punctuation">(</span>D<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre><p>说完两者的区别，再看看相同之处。通过定义来看，<code>sorted</code>和<code>list.sort</code>都是可以接受<code>key</code>,<code>reverse</code>定制的。</p><ul><li>根据参数key排序<br>用列表元素的某个属性或函数作为关键字</li></ul><pre class=" language-python"><code class="language-python">L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>L<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>L<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre><ul><li>根据参数reverse排序<br>reverse=False为升序；reverse=True为降序</li></ul><pre class=" language-python"><code class="language-python">L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>L<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>L<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>L<span class="token punctuation">,</span>reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>sorted<span class="token punctuation">(</span>L<span class="token punctuation">,</span>reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span></code></pre><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><code>sort()</code>函数</p><ul><li>无返回值，在原位重新排列列表，未创建新的列表；</li><li>只适用于列表排序。</li></ul><p><code>sorted()</code>函数</p><ul><li>有返回值，产生一个新的列表，不改变原列表；</li><li>适用于任意可以迭代的对象排序。</li></ul><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>需要注意的是，因为<code>sorted()</code>函数会产生返回值，在数据量较大的场景中，这会浪费较大的存储空间。所以，在列表进行排序时，需要考虑是否需要保存原列表，<strong>若无需保存原列表，则优先使用sort()函数，以节省内存空间，提高效率</strong>。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之06 赋值深拷贝浅拷贝</title>
      <link href="/2019/05/07/interviewquestion-006-fu-zhi-shen-kao-bei-qian-kao-bei/"/>
      <url>/2019/05/07/interviewquestion-006-fu-zhi-shen-kao-bei-qian-kao-bei/</url>
      
        <content type="html"><![CDATA[<h1 id="InterviewQuestion06-什么是赋值、深拷贝、浅拷贝？"><a href="#InterviewQuestion06-什么是赋值、深拷贝、浅拷贝？" class="headerlink" title="InterviewQuestion06: 什么是赋值、深拷贝、浅拷贝？"></a>InterviewQuestion06: 什么是赋值、深拷贝、浅拷贝？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>什么是<code>赋值</code>、<code>深拷贝</code>、<code>浅拷贝</code>？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>对象的赋值<code>Assignment</code>、拷贝<code>Copy</code>（深/浅拷贝）之间是有差异的，这也是面试经常遇到的问题，本文就通过一些例子来理解下它们的区别。</p><h3 id="赋值·Assignment"><a href="#赋值·Assignment" class="headerlink" title="赋值·Assignment"></a>赋值·Assignment</h3><p>所谓<code>赋值</code>，就是将一个对象的地址赋值给一个变量，让变量指向该地址。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"知识星球-ID"</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"人人"</span><span class="token punctuation">,</span> <span class="token string">"都是"</span><span class="token punctuation">,</span> <span class="token string">"Pythonista"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> a<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token number">2705125761736</span><span class="token number">2705125761736</span></code></pre><p>在Python中，用一个变量给另一个变量<strong>赋值</strong>，其实就是给当前内存中的对象增加一个“标签”而已。如上面的例子，通过使用内置函数 id() ，可以看出 a 和 b 指向内存中同一个对象，此时is比较时：</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token keyword">is</span> b<span class="token boolean">True</span></code></pre><h3 id="浅拷贝·ShallowCopy"><a href="#浅拷贝·ShallowCopy" class="headerlink" title="浅拷贝·ShallowCopy"></a>浅拷贝·ShallowCopy</h3><p>所谓<code>浅拷贝</code>，是在另一块地址中创建一个新的变量或容器，但是容器内的元素的地址均是源对象的元素的地址的拷贝。也就是说新的容器中指向了旧的元素。（拷贝组合对象，不拷贝子对象）</p><p>常见的浅拷贝操作有以下三种方式：</p><ul><li>切片[:]操作</li></ul><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"知识星球-ID"</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"人人"</span><span class="token punctuation">,</span> <span class="token string">"都是"</span><span class="token punctuation">,</span> <span class="token string">"Pythonista"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># a 和 b 身份不同</span><span class="token number">2103264174792</span> <span class="token number">2103265400456</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true">#  从打印结果不难看出：它们包含的子对象身份相同</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">2103264511872</span> <span class="token number">2103264511872</span><span class="token number">2103235528592</span> <span class="token number">2103235528592</span><span class="token number">2103264174728</span> <span class="token number">2103264174728</span></code></pre><ul><li>工厂函数，如list/dir/set</li></ul><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"知识星球-ID"</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"人人"</span><span class="token punctuation">,</span> <span class="token string">"都是"</span><span class="token punctuation">,</span> <span class="token string">"Pythonista"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> list<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># a 和 b 身份不同</span><span class="token number">2455220242184</span> <span class="token number">2455213751624</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true">#  从打印结果不难看出：它们包含的子对象身份相同</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">2739939238872</span> <span class="token number">2739939238872</span><span class="token number">2739939283632</span> <span class="token number">2739939283632</span><span class="token number">2739927343624</span> <span class="token number">2739927343624</span></code></pre><ul><li>copy模块中的<code>copy</code>函数</li></ul><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"知识星球-ID"</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"人人"</span><span class="token punctuation">,</span> <span class="token string">"都是"</span><span class="token punctuation">,</span> <span class="token string">"Pythonista"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># a 和 b 身份不同</span><span class="token number">2216345428872</span> <span class="token number">2216345585544</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true">#  从打印结果不难看出：它们包含的子对象身份相同</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">2216343799680</span> <span class="token number">2216343799680</span><span class="token number">2216343259024</span> <span class="token number">2216343259024</span><span class="token number">2216345430280</span> <span class="token number">2216345430280</span></code></pre><p>从上面的三个例子可以明显的看出来，通过 a 浅拷贝得到的 b，a 和 b 指向内存中不同的<code>list</code>对象，但它们的元素却指向相同的<code>str</code>、<code>int</code>、<code>list</code>子对象。这就是浅拷贝！</p><h3 id="深拷贝·DeepCopy"><a href="#深拷贝·DeepCopy" class="headerlink" title="深拷贝·DeepCopy"></a>深拷贝·DeepCopy</h3><p>所谓“深拷贝”，是在另一块地址中创建一个新的变量或容器，同时容器内的元素的地址也是新开辟的，仅仅是值相同而已，是完全的副本。深拷贝出来的对象与原对象没有任何关联。</p><p>深拷贝只有一种方式：copy模块中的<code>deepcopy</code>函数。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> copy<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"知识星球-ID"</span><span class="token punctuation">,</span> <span class="token number">91155859</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"人人"</span><span class="token punctuation">,</span> <span class="token string">"都是"</span><span class="token punctuation">,</span> <span class="token string">"Pythonista"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">1538766627848</span> <span class="token number">1538766784456</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">1538736752512</span> <span class="token number">1538736752512</span><span class="token number">1538736211856</span> <span class="token number">1538736211856</span><span class="token number">1538766629128</span> <span class="token number">1538766784520</span></code></pre><p>看了上面的例子，有人可能会疑惑：<font color="blue">为什么使用了深拷贝，a和b中元素的id还是一样呢？</font></p><p>其原因就是上述拷贝操作的对象中出现了str、int这种<strong>不可变对象</strong>。对于不可变对象，当需要一个新的对象时，Python可能会返回已经存在的某个类型和值都一致的对象的引用。但这种机制并不会影响 a 和 b 的相互独立性，因为当两个元素指向同一个不可变对象时，对其中一个赋值不会影响另外一个。</p><p>我们现在用一个仅包含了可变对象的列表，来再次演示“浅拷贝”与“深拷贝”的差异：</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> copy<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 通过对 a 浅拷贝得到 b</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>a<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 通过对 a 深拷贝得到 c</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true"># a 和 b 不同</span><span class="token number">3095031302024</span> <span class="token number">3095031301704</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 从打印结果不难看出：a和b的子对象是相同的</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">3095031146696</span> <span class="token number">3095031146696</span><span class="token number">3095031145480</span> <span class="token number">3095031145480</span><span class="token number">3095031301960</span> <span class="token number">3095031301960</span></code></pre><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true"># a 和 c 不同</span><span class="token number">3095031302024</span> <span class="token number">3095031301576</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> zip<span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 从打印结果不难看出：a和c的子对象也是不同的</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">3095031146696</span> <span class="token number">3095031301768</span><span class="token number">3095031145480</span> <span class="token number">3095031301896</span><span class="token number">3095031301960</span> <span class="token number">3095031302088</span></code></pre><p>通过这个例子，你应该理解了浅拷贝与深拷贝的区别了吧😁</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><strong>赋值</strong><br>其实就是对象的引用（别名）。可以理解为：旧瓶装旧酒。</p><p><strong>浅拷贝</strong><br>拷贝父对象，不会拷贝对象的内部的子对象。可以理解为：新瓶装旧酒。</p><p><strong>深拷贝</strong><br>完全拷贝了父对象及其子对象。可以理解为：新瓶装新酒。</p><p>对于非容器类型（如数字、字符串、和其他’原子’类型的对象）没有拷贝这一说法</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>浅拷贝和深拷贝的不同仅仅是对组合对象来说的，所谓的组合对象就是包含了其它对象的对象，如列表、类实例等等。而对于数字、字符串以及其它“原子”类型，没有拷贝一说，产生的都是原对象的引用。</p><pre class=" language-sh"><code class="language-sh">"obj is copy.copy(obj)"，"obj is copy.deepcopy(obj)"</code></pre><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之05 遍历目录并筛选指定文件</title>
      <link href="/2019/04/28/interviewquestion-005-bian-li-mu-lu-bing-shai-xuan-zhi-ding-wen-jian/"/>
      <url>/2019/04/28/interviewquestion-005-bian-li-mu-lu-bing-shai-xuan-zhi-ding-wen-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之05-设计实现遍历目录及子目录，并抓取-txt文件？"><a href="#Python面试题系列之05-设计实现遍历目录及子目录，并抓取-txt文件？" class="headerlink" title="Python面试题系列之05: 设计实现遍历目录及子目录，并抓取.txt文件？"></a>Python面试题系列之05: 设计实现遍历目录及子目录，并抓取.txt文件？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>设计实现遍历目录及子目录，并抓取.txt文件？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>这道题并不难，这里我们用三种思路来实现这个小需求。依次会用到<code>os</code>模块、<code>glob</code>模块、<code>pathlib</code>模块。</p><h3 id="方法一：利用os模块"><a href="#方法一：利用os模块" class="headerlink" title="方法一：利用os模块"></a>方法一：利用os模块</h3><p>python的<code>os</code>库有很多和文件，路径，执行系统命令相关的功能。比如我们可以使用<code>os.listdir()</code>方法来列出目录下的所有文件和目录放入一个列表进行返回，但是<code>listdir()</code>函数不可对目录的子目录进行扫描。  </p><p>很多时候我们需要将某个文件夹下的所有文件都要找出来，那么此时我们就需要<code>os.walk()</code>。它通过在目录树中向下或向上游走，输出目录的文件名。</p><p><code>os.walk()</code>方法的语法格式如下：</p><pre class=" language-python"><code class="language-python">os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>top<span class="token punctuation">[</span><span class="token punctuation">,</span> topdown<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">[</span><span class="token punctuation">,</span> onerror<span class="token operator">=</span>None<span class="token punctuation">[</span><span class="token punctuation">,</span> followlinks<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><ul><li>top – 是你所要遍历的目录的地址</li><li>topdown –可选，为 True，则优先遍历 top 目录，否则优先遍历 top 的子目录。</li><li>onerror – 可选，需要一个 callable 对象，当 walk 需要异常时，会调用。</li><li>followlinks – 可选，若为 True，则会遍历目录下的快捷方式。</li></ul><p>该函数没有返回值，会使用yield关键字抛出一个存放当前该层目录(dirpath, dirnames, filenames)的三元组，最终将所有目录层的的结果变为一个生成器。</p><ul><li>dirpath是一个<code>string</code>，代表目录的路径；</li><li>dirnames是一个<code>list</code>，包含了dirpath下所有子目录的名字；</li><li>filenames是一个<code>list</code>，包含了非目录文件的名字。这些名字不包含路径信息，如果需要得到全路径，需要使用 os.path.join(dirpath, filename)；</li></ul><p>了解了<code>os.walk</code>的语法后，接下来直接上代码，来实现这个需求。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">def</span> <span class="token function">get_files</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> suffix<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> dirpath<span class="token punctuation">,</span>dirnames<span class="token punctuation">,</span>filenames <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> filename <span class="token keyword">in</span> filenames<span class="token punctuation">:</span>            name<span class="token punctuation">,</span> suf <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>            <span class="token keyword">if</span> suf <span class="token operator">==</span> suffix<span class="token punctuation">:</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>dirpath<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>get_files<span class="token punctuation">(</span><span class="token string">"E:\Pythonista"</span><span class="token punctuation">,</span> <span class="token string">'.txt'</span><span class="token punctuation">)</span></code></pre><h3 id="方法二：利用glob模块"><a href="#方法二：利用glob模块" class="headerlink" title="方法二：利用glob模块"></a>方法二：利用glob模块</h3><p><code>glob</code>模块可以使用Unix shell风格的通配符匹配符合特定格式的文件和文件夹，跟windows的文件搜索功能差不多。<code>glob</code>模块并非调用一个子shell实现搜索功能，而是在内部调用了<code>os.listdir()</code>和<code>fnmatch.fnmatch()</code>。</p><p>glob模块支持的通配符如下：</p><ul><li><code>*</code>            匹配0或多个字符</li><li><code>**</code>            匹配所有文件、目录、子目录和子目录里的文件（Python 3.5版本新增）</li><li><code>?</code>            匹配1个字符，与正则表达式里的?不同</li><li><code>[exp]</code>        匹配指定范围内的字符，如：[1-9]匹配1至9范围内的字符</li><li><code>[!exp]</code>        匹配不在指定范围内的字符</li></ul><p>接下来就利用<code>glob</code>模块来实现这个需求，以下是具体代码：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> glob <span class="token keyword">import</span> iglob<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> suffix<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> iglob<span class="token punctuation">(</span>f<span class="token string">"{filepath}/**/*{suffix}"</span><span class="token punctuation">,</span> recursive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    suffix <span class="token operator">=</span> <span class="token string">".txt"</span>    func<span class="token punctuation">(</span><span class="token string">"E:\Pythonista"</span><span class="token punctuation">,</span> suffix<span class="token punctuation">)</span></code></pre><p>自从<code>Python 3.5</code>版本新增了<code>**</code>通配符，<code>glob</code>模块变得更加易用，真是太赞了😉</p><h3 id="方法三：利用pathlib模块"><a href="#方法三：利用pathlib模块" class="headerlink" title="方法三：利用pathlib模块"></a>方法三：利用pathlib模块</h3><p><code>pathlib</code>模块是<code>Python 3.4</code>版本中新增的模块，<code>pathlib</code>绝不仅仅是替换了<code>os.path</code>那么简单，它可以说是路径处理的瑞士军刀。它完全采用面向对象的编程方式，尤其是在处理配置路径方面简直太方便了。</p><p>闲话少说，我们直接用<code>Path().rglob</code>来递归遍历指定的文件。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Pathsrc <span class="token operator">=</span> <span class="token string">"E:\Pythonista"</span><span class="token keyword">for</span> item <span class="token keyword">in</span> Path<span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span>rglob<span class="token punctuation">(</span><span class="token string">'*.txt'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span></code></pre><p>简单几行代码，轻松搞定😎</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>无论用<code>os</code>模块、还是<code>glob</code>模块、或是<code>pathlib</code>模块均可实现这一需求，详细代码见上文内容。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>上述三种方法都能实现这一需求，但哪种方法更加简便已不言而喻。所以还是希望大家能多了解一些<code>Python</code>新版本的特性，紧跟技术前沿😁😁😁</p><p>可通过如下这个链接来了解<code>Python 3</code>中每个版本加入的新特性。</p><p><a href="https://docs.python.org/3.x/whatsnew/3.x.html" target="_blank" rel="noopener">https://docs.python.org/3.x/whatsnew/3.x.html</a></p><p>注：需要把x替换成实际版本号即可。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之04 迭代器、生成器</title>
      <link href="/2019/04/25/interviewquestion-004-die-dai-qi-sheng-cheng-qi/"/>
      <url>/2019/04/25/interviewquestion-004-die-dai-qi-sheng-cheng-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之04-什么是迭代器、生成器？"><a href="#Python面试题系列之04-什么是迭代器、生成器？" class="headerlink" title="Python面试题系列之04: 什么是迭代器、生成器？"></a>Python面试题系列之04: 什么是迭代器、生成器？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>什么是迭代器、生成器？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><h3 id="1-迭代器"><a href="#1-迭代器" class="headerlink" title="1 迭代器"></a>1 迭代器</h3><p>假如我们自己写了一个数据类型，希望这个数据类型里的东西也可以使用for循环被一个一个地取出来，那我们就必须满足for的要求。这个要求就叫做“<strong>协议</strong>”。</p><p>可以被迭代要满足的要求就叫做<strong>可迭代协议</strong>。可迭代协议的定义非常简单，就是内部实现了iter方法。</p><h4 id="1-1-什么是可迭代对象（Iterable）"><a href="#1-1-什么是可迭代对象（Iterable）" class="headerlink" title="1.1 什么是可迭代对象（Iterable）"></a>1.1 什么是可迭代对象（Iterable）</h4><p>如果这个对象中有<code>__iter__()</code>方法，这个对象就是<strong>可迭代对象</strong>。简单来说就是可以使用<code>for...in...</code>语句进行循环的对象。我们可以使用<code>isinstance()</code>方法进行判断。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> Iterable<span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span><span class="token string">'Pythonista'</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> isinstance<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token boolean">False</span></code></pre><h4 id="1-2-什么是迭代器（Iterator）"><a href="#1-2-什么是迭代器（Iterator）" class="headerlink" title="1.2 什么是迭代器（Iterator）"></a>1.2 什么是迭代器（Iterator）</h4><p><strong>迭代器协议</strong>是指：对象必须提供一个<code>next</code>方法，执行该方法要么返回迭代中的下一项，要么就引起一个<code>StopIteration</code>异常，以终止迭代。</p><p><strong>迭代器</strong>只不过是一个实现迭代器协议的容器对象，它基于两个方法：</p><ul><li><code>next()</code>方法，返回容器的下一个项目</li><li><code>iter()</code>方法，返回迭代器本身</li></ul><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> temp <span class="token operator">=</span> iter<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'人人都是'</span><span class="token punctuation">,</span> <span class="token string">'Pythonista'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list_iterator'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>next<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>人人都是<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>next<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>Pythonista<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>next<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span> StopIteration</code></pre><h4 id="1-3-迭代器的优势及使用场景"><a href="#1-3-迭代器的优势及使用场景" class="headerlink" title="1.3 迭代器的优势及使用场景"></a>1.3 迭代器的优势及使用场景</h4><p>在构建迭代器时，不是将所有的元素一次性的加载，而是等调用<code>next</code>方法时返回元素，所以不需要考虑内存的问题。</p><p>所以迭代器常用于如下场景中：</p><ul><li>数列的数据规模巨大</li><li>数列有规律，但是不能使用列表推导式描述。</li></ul><h3 id="2-生成器"><a href="#2-生成器" class="headerlink" title="2. 生成器"></a>2. 生成器</h3><h4 id="2-1-什么是生成器（Generator）"><a href="#2-1-什么是生成器（Generator）" class="headerlink" title="2.1 什么是生成器（Generator）"></a>2.1 什么是生成器（Generator）</h4><p><strong>生成器</strong>类似于一种数据类型，这种数据类型自动实现了迭代器协议（其他的数据类型需要调用自己内置的<code>__iter__</code>方法）。生成器在Python中的表现形式分为生成器函数、生成器表达式两种。</p><h4 id="2-1-生成器函数"><a href="#2-1-生成器函数" class="headerlink" title="2.1 生成器函数"></a>2.1 生成器函数</h4><p>生成器函数和常规函数一样，都采用<code>def</code>语句进行定义。但在返回结果时，生成器函数中使用的是<code>yield</code>语句而不是<code>return</code>语句。<code>yield</code>语句一次返回一个结果，在每个结果中间，挂起函数的状态，以便下次重它离开的地方继续执行。</p><p>当需要一个将返回一个序列或在循环中执行的函数时，就可以使用生成器，因为当这些元素被传递到另一个函数中进行后续处理时，一次返回一个元素可以有效的提升整体性能。</p><h4 id="2-2-生成器表达式"><a href="#2-2-生成器表达式" class="headerlink" title="2.2 生成器表达式"></a>2.2 生成器表达式</h4><p>生成式表达式，类似于列表推导。它只是按需返回产生结果的一个对象，而不是构建一个结果列表，即按需取出对象。</p><p>生成式表达式是一种实现生成器的便捷方式，将列表推导式的中括号替换为圆括号。</p><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span>s <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span>g <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span>g<span class="token operator">&lt;</span>generator object <span class="token operator">&lt;</span>genexpr<span class="token operator">></span> at <span class="token number">0x000001B670D4A408</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span>next<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span>next<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token number">1</span></code></pre><p>生成器表达式是一种边循环边计算，使得列表的元素可以在循环过程中一个个的推算出来，不需要创建完整的列表，从而节省了大量的空间。</p><h4 id="2-3-关于生成器的总结"><a href="#2-3-关于生成器的总结" class="headerlink" title="2.3 关于生成器的总结"></a>2.3 关于生成器的总结</h4><ul><li><strong>语法上和函数类似</strong>：生成器函数和常规函数几乎是一样的。它们都是使用<code>def</code>语句进行定义，差别在于生成器使用<code>yield</code>语句返回一个值，而常规函数使用<code>return</code>语句返回一个值。</li><li><strong>自动实现迭代器协议</strong>：由于生成器自动实现了迭代器协议，所以我们可以调用它的<code>next</code>方法，并且在没有值可以返回的时候，生成器自动产生<code>StopIteration</code>异常。</li><li><strong>状态挂起</strong>：生成器使用<code>yield</code>语句返回一个值。<code>yield</code>语句挂起该生成器的状态，保留足够的信息，以便之后从它离开的地方继续执行。</li><li><strong>生成器只能遍历一次，不能重复使用</strong>：在程序中如果已经使用生成器遍历过一次得到结果，那么第二次遍历生成器将得不到任何结果，因为在第一次遍历生成器时，生成器已经遍历到头，它的特性决定它无法遍历第二次。</li></ul><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>迭代器<br>可被<code>next()</code>函数调用并不断返回下一个值的对象就是迭代器。简单来说：凡是可以被for循环访问的都是迭代器，这是因为迭代器里面实现了<code>iter协议</code>和<code>next方法</code>。</p><p>生成器<br>生成器就是特殊的迭代器，它在迭代器的基础上再次进行了封装。<br>因为自动创建了<code>iter()</code>和<code>next()</code>方法，使得生成器显得特别简洁；使用生成器表达式取代列表解析可以同时节省内存，所以生成器也很高效。<br>另外生成器是协程的基础，协程是通过上下文切换进行任务协作的，而生成器挂起状态的特性很好地满足了协程的需求。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>最后再通过这张图来理解生成器(Generator)、迭代器(Iterator)、可迭代对象(Iterable)之间关系。欢迎大家在评论区留言说出自己的理解。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116133349.png" alt=""></p><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之03 进程、线程、协程</title>
      <link href="/2019/04/24/interviewquestion-003-jin-cheng-xian-cheng-xie-cheng/"/>
      <url>/2019/04/24/interviewquestion-003-jin-cheng-xian-cheng-xie-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之03-谈谈你对进程，线程，协程的理解？"><a href="#Python面试题系列之03-谈谈你对进程，线程，协程的理解？" class="headerlink" title="Python面试题系列之03: 谈谈你对进程，线程，协程的理解？"></a>Python面试题系列之03: 谈谈你对进程，线程，协程的理解？</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>谈谈你对<code>进程</code>，<code>线程</code>，<code>协程</code>的理解？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><h3 id="一个小故事"><a href="#一个小故事" class="headerlink" title="一个小故事"></a>一个小故事</h3><p>我们先从一个故事讲起。从前有座山，山上有座庙，庙里……</p><p>有兄弟俩，估且称他们旺财和小强吧，旺财和小强是两个很庞大的程序，每个都是十几万行的代码量级。 他们两个的人生价值就是到CPU上去运行，把运行结果告诉人类。</p><p>CPU是稀缺资源，只有一个，他们俩必须排着队，轮流使用。旺财从头到尾执行结束后，让出CPU， 让小强从头开始去执行。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110705.png" alt=""></p><p>人类把这种处理方式叫做<strong>批处理</strong>。</p><p>长久以来，两人相安无事。 后来CPU的速度越来越快， 远远超过了内存，硬盘的速度。人类想到，这批处理系统的效率有点低啊，你看当小强需要从硬盘上读取数据的时候，CPU也一直在等待，这是多大的浪费啊！这时候完全可以让旺财来运行一下嘛！</p><p>当然得保存好小强的<strong>执行现场</strong>：具体执行到那一行程序指令了，函数调用到什么层次了，每个函数调用都有什么样的参数，CPU寄存器中的值….. 等等一系列东西。</p><p>如果不把小强的执行现场给保存下来，等到小强的数据从银盘读完了，就没法回到中断处来继续执行了。</p><p>这个执行现场再加上小强的代码，就是一个执行中的程序，被称为“<strong>进程</strong>” 。</p><p>旺财和小强在运行的时候，也被改造成了进程。</p><p>人类还规定：进程不能长时间占据CPU， 只能在CPU上执行一小会儿，然后马上切换到别的进程去执行。</p><p>旺财和小强不以为意：不就是执行一会儿，歇一会儿，然后继续执行嘛！</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110713.png" alt=""></p><p>但是他们不知道的是，由于CPU运行速度超快，旺财和小强虽然在不断地切换运行，在人类那缓慢的世界里看来，旺财和小强好像是同时在执行一样。  这就是<strong>并发</strong>。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110722.png" alt=""><br>（在人类看来，小强和旺财似乎是在同时执行）</p><p>多年以后，他们俩才真正地实现了<strong>并行</strong>： 在一个豪华电脑中，每人都被分配了一个CPU ， 真正地同时执行， 这是后话了。</p><p>这时候旺财已经有了界面，还能访问网络，每当它联网的时候（这也是个非常非常耗时的操作），就得把CPU让给小强。</p><p>即使旺财再次被调度执行，由于网络数据还没有返回，他必须等待，什么事情都做不了，在人类看来，界面根本无法操作，旺财不响应了！  气得人类经常把旺财 kill 掉。</p><p>旺财心里苦，他很纳闷小强怎么就没有问题，小强不是要读写硬盘吗？ 那也是很慢的操作啊。</p><p>小强说：“你傻啊，内部只有一个执行的流程，一遇到耗时的操作就得等待，你看看我，内部搞了两个执行流程（<strong>线程</strong>），一个用来读写硬盘（T1)，另外一个处理界面(T2)。我和操作系统商量好了，如果T1在读写硬盘， 就可以调度我的T2来执行，这样界面至少还可以操作。 ”</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110722.png" alt=""></p><p>旺财觉得很有意思，也采用了类似办法。于是，一个进程中至少有一个执行的流程（主线程），也可以开启新的执行流程（线程）。线程变成了最小的调度单位。</p><p>这一天，旺财被一个叫做生产者和消费者的问题折腾地死去活来，两个线程，一个线程向队列中放数据，另外一个从队列中取数据，处理起两个线程的协作就显得很麻烦，不但需要加锁，还得做好线程的通知和等待。</p><p>正在感慨多线程编程之难的时候， 旺财震惊地发现，小强用了一个极为简单的办法把生产者，消费者问题给解决了。代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 生产者</span><span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># 其他代码  </span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                  value <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>生成数据<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        c<span class="token punctuation">.</span>send<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 消费者</span><span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 其他代码      </span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        value <span class="token operator">=</span> <span class="token keyword">yield</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>c <span class="token operator">=</span> consumer<span class="token punctuation">(</span><span class="token punctuation">)</span>producer<span class="token punctuation">(</span>c<span class="token punctuation">)</span></code></pre><p>“这….这怎么执行啊，那个yield是怎么回事？”  旺财表示不解。</p><p>“简单啊，你看那个生产者，是不是向消费者发送了数据？ ” 小强说。</p><p>“对啊，然后呢，生产者发送了数据以后，会马上进行下一轮循环吗？”</p><p>“这就是关键所在了，”小强说，“ 它们是这么执行的：”</p><ol><li>生产者发送数据，暂停运行，不进行下一轮循环</li><li>消费者其实一直在value = yield 那里等待，直到数据到来，现在数据来了，取出处理（value就是生产者发送过来的数据）。</li><li>消费者在循环中再次yield， 暂停执行。</li><li>生产者继续下一轮的循环，生成新的消息，发送给消费者。</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110735.png" alt=""></p><p>旺财觉得很吃惊，小强竟然<strong>可以让一个正在执行的程序暂停</strong>，他不由得问道：“你这个暂停是真的停止了了，还是说只是像Java的yield那样，让出CPU进入了就绪状态？ 等待下次调度运行？”</p><p>“是真的暂停了，程序就停在那里，等待运行控制权从对方那里转移过来。”</p><p>“这不是操作系统干的事情吗？ ” 旺财更加吃惊了。</p><p>“正是这样，” 小强得意地说：“我打算把类似生产者，消费者这样的代码称为‘<strong>协程</strong>’， 这个协程有个重要的特点，就是完全被我所调度和掌控， 不用操作系统介入。”</p><p>“这个协程和线程似乎很像啊。每次协程停止执行的时候，也得保存现场，要不然没法恢复执行。” 旺财说。</p><p>“是啊，只是他们<strong>比线程更加轻量级</strong>，操作系统内核不用参与，相当于用户态线程了，<strong>协程的开销极小</strong>，可以轻松地创建大量的协程来做事情。 对了，也许你注意到了，我这两个协程是’<strong>合作式</strong>‘的，它们两个同一时刻只能有一个在运行。 实际上，我在底层可以用一个线程去执行这两个协程。  ”</p><p>旺财表示同意：“不错，既然两个程序可以’合作’，那就不用加锁了，也不用在代码里写什么wait和notify了，在程序层面，可以用同步的方式实现异步的功能了！ 代码很清晰，我也搞个协程来玩玩吧！”     </p><p>[本故事引自微信公共号 - 码农翻身]</p><p>故事讲完了，接下来看看具体的概念吧！</p><p><strong>进程</strong><br>进程是对资源进行分配和调度的最小单位，是操作系统结构的基础，是线程的容器（就像是一幢房子，一个空壳子，并不能运动）。</p><p>线程的概念主要有两点：</p><p>进程是一个实体，每个进程都有自己的地址空间，一般包括文本区域（text region）、数据区域（data region）和堆栈（stack region）。<br>文本区域存储处理器执行的代码；<br>数据区域存储变量和进程在执行期间所使用的动态分配的内存；<br>堆栈区域存储在活动过程中所调用的指令和本地变量。<br>进程是一个“执行中的程序”。程序是一个没有生命的实体，只有在操作系统调用时，他才会成为一个活动的实体：进程。</p><p><strong>线程</strong><br>线程被称为轻量级进程，是操作系统能够运算调度的最小单位，线程被包含在进程中，是进程中实际处理单位。</p><p>一个标准的线程由<code>线程ID</code>、<code>当前指令指针(PC）</code>、<code>寄存器集</code>合和<code>堆栈</code>组成。另外，<font color="red">线程是进程中的一个实体，是被系统独立调度和分派的基本单位，线程自己不拥有系统资源，只拥有一点儿在运行中必不可少的资源，但它可与同属一个 进程的其它线程共享进程所拥有的全部资源。</font></p><p>一个线程可以创建和撤消另一个线程，同一进程中的多个线程之间可以并发执行。由于线程之间的相互制约，致使线程在运行中呈现出间断性。</p><p>线程也有就绪、阻塞和运行三种基本状态。</p><p>就绪状态是指线程具备运行的所有条件，逻辑上可以运行，在等待处理机；<br>运行状态是指线程占有处理机正在运行；<br>阻塞状态是指线程在等待一个事件（如某个信号量），逻辑上不可执行。<br>每一个程序都至少有一个线程，若程序只有一个线程，那就是程序本身。</p><p>进程与线程的区别<br>进程是资源分配的最小单位，线程是系统调度（程序执行）的最小单位。<br>进程有自己独占的地址空间，每启动一个进程，系统就需要为它分配地址空间；<br> 而一个进程下所有线程共享该进程的所有资源，使用相同的地址空间，因此CPU在线程之间切换远远比在进城之间切换花费小，而且创建一个线程的开销也远远比开辟一个进程小得多。<br>线程之间通信更加方便，同一进程下所有线程共享全局变量、静态变量等数据。而进程之间通信需要借助第三方。<br>线程只能归属于一个进程并且它只能访问该进程所拥有的资源。当操作系统创建一个进程后，该进程会自动申请一个名为主线程或首要线程的线程。<br>处理IO密集型任务或函数用线程；处理计算密集型任务或函数用进程。</p><p><strong>协程</strong><br>协程又叫微线程，一个程序可以包含多个协程，就好比一个进程包含多个线程。协程的调度完全由用户控制。</p><p>协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。</p><p><font color="red">协程和线程的阻塞是有本质区别的。协程的暂停完全由程序控制，线程的阻塞状态是由操作系统内核来进行切换。</font>因此，协程的开销远远小于线程的开销。</p><p>线程和协程的区别<br>一个线程可以多个协程，一个进程也可以单独拥有多个协程，这样python中则能使用多核CPU。<br>线程进程都是同步机制，而协程则是异步。<br>协程能保留上一次调用时的状态，每次过程重入时，就相当于进入上一次调用的状态。 </p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><code>进程</code>：<br>一个运行的程序（代码）就是一个进程，没有运行的代码叫程序，进程是系统资源分配的最小单位，进程拥有自己独立的内存空间，所以进程间数据不共享，开销大。</p><p><code>线程</code>：<br>调度执行的最小单位，也叫执行路径，不能独立存在，依赖进程存在。一个进程至少有一个线程，叫主线程，而多个线程共享内存(数据共享，共享全局变量)，从而极大地提高了程序的运行效率。</p><p><code>协程</code>：<br>是一种用户态的轻量级线程，协程的调度完全由用户控制。协程拥有自己的寄存器上下文和栈。 协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>好了，故事讲完了、概念介绍了、三者的区别也给大家列举了。想必大家对进程、线程、协程已经有了很深的印象，最后再通过这张图回顾下，欢迎大家在评论区留言说出自己的对进程、线程、协程的理解。<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116110744.png" alt=""></p><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之02 Python 2 与 Python 3 的区别</title>
      <link href="/2019/04/23/interviewquestion-002-python2-yu-python3-de-qu-bie/"/>
      <url>/2019/04/23/interviewquestion-002-python2-yu-python3-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之02-Python-2-与-Python-3-的区别"><a href="#Python面试题系列之02-Python-2-与-Python-3-的区别" class="headerlink" title="Python面试题系列之02: Python 2 与 Python 3 的区别"></a>Python面试题系列之02: Python 2 与 Python 3 的区别</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>请简述下<code>Python 2</code>与<code>Python 3</code>的区别？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>这里主要从<strong>基本语法</strong>角度来谈谈<code>Python 2</code>与<code>Python 3</code>的差异：</p><h3 id="1-核心差异"><a href="#1-核心差异" class="headerlink" title="1 核心差异"></a>1 核心差异</h3><h4 id="1-1-Python-3-对-Unicode-字符的原生支持"><a href="#1-1-Python-3-对-Unicode-字符的原生支持" class="headerlink" title="1.1 Python 3 对 Unicode 字符的原生支持"></a>1.1 Python 3 对 Unicode 字符的原生支持</h4><p><code>Python 2</code>中使用<code>ASCII</code>码作为默认编码方式导致<code>string</code>有两种类型<code>str</code>和<code>unicode</code>，<code>Python 3</code>只支持<code>unicode</code>的<code>string</code>。</p><p>Python 2 和 Python 3 字节和字符对应关系为：</p><table><thead><tr><th align="left">Python 2</th><th align="left">Python 3</th><th align="left">表现</th><th align="left">转换</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">str</td><td align="left">bytes</td><td align="left">字节</td><td align="left">encode</td><td align="left">存储</td></tr><tr><td align="left">unicode</td><td align="left">str</td><td align="left">字符</td><td align="left">decode</td><td align="left">显示</td></tr></tbody></table><h4 id="1-2-Python-3-采用绝对路径方式进行-import"><a href="#1-2-Python-3-采用绝对路径方式进行-import" class="headerlink" title="1.2 Python 3 采用绝对路径方式进行 import"></a>1.2 Python 3 采用绝对路径方式进行 import</h4><p>在<code>Python 2</code>中相对路径的<code>import</code>会导致标准库导入变得困难（设想一下，同一目录下有<code>file.py</code>，如何同时导入这个文件和标准库<code>file</code>）。<br>在<code>Python 3</code>中这一点将被修改，如果还需要导入同一目录的文件必须使用绝对路径，否则只能使用相关导入的方式来进行导入。</p><h4 id="1-3-新式类与老式类"><a href="#1-3-新式类与老式类" class="headerlink" title="1.3 新式类与老式类"></a>1.3 新式类与老式类</h4><p><code>Python 2</code>中存在老式类和新式类的区别，<code>Python 3</code>则统一采用新式类。</p><p>在<code>Python 2</code>中新式类声明要求继承<code>object</code>，必须用新式类应用多重继承。在<code>Python 3</code>中已经把旧类型去掉了，也就是说已经隐式继承了<code>object</code>。</p><h4 id="1-4-Python-3-使用更加严格的缩进"><a href="#1-4-Python-3-使用更加严格的缩进" class="headerlink" title="1.4 Python 3 使用更加严格的缩进"></a>1.4 Python 3 使用更加严格的缩进</h4><p>关于代码缩进，<code>PEP-8</code>中建议使用空格：</p><blockquote><p>Spaces are the preferred indentation method. </p></blockquote><p><code>Python 2</code>的缩进机制中，1个<code>tab</code>和4个<code>space</code>是等价的，所以在缩进中可以同时允许<code>tab</code>和<code>space</code>在代码中共存。</p><p><code>Python 3</code>中使用了更加严格的缩进，不允许<code>tab</code>和<code>space</code>共存，否则会导致报错：</p><pre class=" language-python"><code class="language-python">TabError<span class="token punctuation">:</span>inconsistent use of tabs <span class="token operator">and</span> spaces <span class="token keyword">in</span> indentation<span class="token punctuation">.</span></code></pre><p>在缩进时混用<code>tab</code>和<code>space</code>会导致部分<code>IDE</code>使用存在问题，如<code>Vim</code>编辑器。不过像<code>PyCharm</code>、<code>VS Code</code>这些编辑器可以自动转换<code>tab</code>为<code>space</code>，参考如下配置。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116094444.png" alt=""></p><h3 id="2-废弃的特性"><a href="#2-废弃的特性" class="headerlink" title="2 废弃的特性"></a>2 废弃的特性</h3><h4 id="2-1-print-语句被-Python-3-废弃"><a href="#2-1-print-语句被-Python-3-废弃" class="headerlink" title="2.1 print 语句被 Python 3 废弃"></a>2.1 print 语句被 Python 3 废弃</h4><p>print语句被 Python 3 废弃，统一使用<code>print</code>函数</p><h4 id="2-2-exec-语句被-Python-3-废弃"><a href="#2-2-exec-语句被-Python-3-废弃" class="headerlink" title="2.2 exec 语句被 Python 3 废弃"></a>2.2 exec 语句被 Python 3 废弃</h4><p>exec语句被 Python 3 废弃，统一使用<code>exec</code>函数</p><h4 id="2-3-execfile-语句被-Python-3-废弃"><a href="#2-3-execfile-语句被-Python-3-废弃" class="headerlink" title="2.3 execfile 语句被 Python 3 废弃"></a>2.3 execfile 语句被 Python 3 废弃</h4><p>execfile 语句被 Python 3 废弃，推荐使用<code>exec(open("./filename").read())</code></p><h4 id="2-4-不相等操作符”-lt-gt-”被-Python-3-废弃"><a href="#2-4-不相等操作符”-lt-gt-”被-Python-3-废弃" class="headerlink" title="2.4 不相等操作符”<>”被 Python 3 废弃"></a>2.4 不相等操作符”&lt;&gt;”被 Python 3 废弃</h4><p>不相等操作符”&lt;&gt;”被 Python 3 废弃，统一使用<code>!=</code></p><h4 id="2-5-long-整数类型被-Python-3-废弃"><a href="#2-5-long-整数类型被-Python-3-废弃" class="headerlink" title="2.5 long 整数类型被 Python 3 废弃"></a>2.5 long 整数类型被 Python 3 废弃</h4><p>long 整数类型被 Python 3 废弃，统一使用<code>int</code></p><h4 id="2-6-xrange-函数被-Python-3-废弃"><a href="#2-6-xrange-函数被-Python-3-废弃" class="headerlink" title="2.6 xrange 函数被 Python 3 废弃"></a>2.6 xrange 函数被 Python 3 废弃</h4><p>xrange 函数被 Python 3 废弃，统一使用<code>range</code></p><p>Python 2 中<code>range</code>的返回值是<code>list</code>，这意味着内存将会分布相应的长度的空间给<code>list</code>。<br>Python 3 中返回的是一个对象，并没有将数据完全实例化，所以内存中只有一个对象的空间。<code>Python 3</code>中<code>range</code>的这种机制，极大程度上提升了大数据集下的生成效率。</p><p>在<code>Python 3</code>中 要想使用<code>range()</code>获得一个<code>list</code>，必须显式调用： </p><pre class=" language-python"><code class="language-python">list<span class="token punctuation">(</span>range<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span> </code></pre><h4 id="2-7-在Python-3-中与dictionary关联的方法已不再返回-list-对象"><a href="#2-7-在Python-3-中与dictionary关联的方法已不再返回-list-对象" class="headerlink" title="2.7 在Python 3 中与dictionary关联的方法已不再返回 list 对象"></a>2.7 在Python 3 中与dictionary关联的方法已不再返回 list 对象</h4><p>在Python 3 中与dictionary关联的方法已不再返回 list 对象，涉及的方法有<code>keys()</code>、<code>values()</code>、<code>items()</code>、<code>zip()</code>、<code>map()</code>、<code>filter()</code>，它们是可以通过<code>list</code>强行转换。</p><pre class=" language-python"><code class="language-python">mydict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span>mydict<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># &lt;built-in method keys of dict object at 0x000000000040B4C8></span>list<span class="token punctuation">(</span>mydict<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ['a', 'c', 'b']</span></code></pre><h4 id="2-8-迭代器-iterator-的-next-函数被-Python-3-废弃"><a href="#2-8-迭代器-iterator-的-next-函数被-Python-3-废弃" class="headerlink" title="2.8 迭代器 iterator 的 next()函数被 Python 3 废弃"></a>2.8 迭代器 iterator 的 next()函数被 Python 3 废弃</h4><p>迭代器 iterator 的 next()函数被 Python 3 废弃，统一使用<code>next(iterator)</code></p><h4 id="2-9-raw-input-函数被-Python-3-废弃"><a href="#2-9-raw-input-函数被-Python-3-废弃" class="headerlink" title="2.9 raw_input 函数被 Python 3 废弃"></a>2.9 raw_input 函数被 Python 3 废弃</h4><p>raw_input 函数被 Python 3 废弃，统一使用<code>input</code>函数</p><h4 id="2-10-cPickle-模块被-Python-3-抛弃"><a href="#2-10-cPickle-模块被-Python-3-抛弃" class="headerlink" title="2.10 cPickle 模块被 Python 3 抛弃"></a>2.10 cPickle 模块被 Python 3 抛弃</h4><p>cPickle 模块被 Python 3 抛弃，统一使用<code>pickle</code>模块</p><h4 id="2-11-字典变量的-has-key-函数被-Python-3-废弃"><a href="#2-11-字典变量的-has-key-函数被-Python-3-废弃" class="headerlink" title="2.11 字典变量的 has_key 函数被 Python 3 废弃"></a>2.11 字典变量的 has_key 函数被 Python 3 废弃</h4><p>字典变量的 has_key 函数被 Python 3 废弃，统一使用<code>in</code>关键词</p><h4 id="2-12-file-函数被-Python-3-废弃"><a href="#2-12-file-函数被-Python-3-废弃" class="headerlink" title="2.12 file 函数被 Python 3 废弃"></a>2.12 file 函数被 Python 3 废弃</h4><p>file 函数被 Python 3 废弃，统一使用<code>open</code>来处理文件，可以通过<code>io.IOBase</code>检查文件类型</p><h4 id="2-13-apply-、execfile-都被去除了被-Python-3-废弃"><a href="#2-13-apply-、execfile-都被去除了被-Python-3-废弃" class="headerlink" title="2.13 apply()、execfile()都被去除了被 Python 3 废弃"></a>2.13 apply()、execfile()都被去除了被 Python 3 废弃</h4><p>apply()、execfile()都被去除了，被 Python 3 废弃</p><h4 id="2-14-异常-StandardError-被-Python-3-废弃"><a href="#2-14-异常-StandardError-被-Python-3-废弃" class="headerlink" title="2.14 异常 StandardError 被 Python 3 废弃"></a>2.14 异常 StandardError 被 Python 3 废弃</h4><p>异常 StandardError 被 Python 3 废弃，统一使用<code>Exception</code></p><h3 id="3-修改的特性"><a href="#3-修改的特性" class="headerlink" title="3 修改的特性"></a>3 修改的特性</h3><h4 id="3-1-浮点数除法操作符“-”和“-”的区别"><a href="#3-1-浮点数除法操作符“-”和“-”的区别" class="headerlink" title="3.1 浮点数除法操作符“/”和“//”的区别"></a>3.1 浮点数除法操作符“/”和“//”的区别</h4><p><code>Python 2</code>中的<code>/</code>：若为两个整形数进行运算，结果为整形；但若两个数中有一个为浮点数，则结果为浮点数；</p><p><code>Python 3</code>中的<code>/</code>：为真除法，运算结果不再根据参加运算的数的类型。</p><p><code>Python 2</code>中的<code>//</code>：返回小于除法运算结果的最大整数；从类型上讲，与<code>/</code>运算符返回类型逻辑一致。</p><p><code>Python 3</code>中的<code>//</code>：和<code>Python 2</code>运算结果一样。</p><p>还是有点绕？那就来看看下面的例子：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Python 2</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token number">3</span> <span class="token operator">//</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">=</span> <span class="token number">1.5</span><span class="token number">3</span> <span class="token operator">//</span> <span class="token number">2.0</span> <span class="token operator">=</span> <span class="token number">1.0</span></code></pre><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Python 3</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1.5</span><span class="token number">3</span> <span class="token operator">//</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">=</span> <span class="token number">1.5</span><span class="token number">3</span> <span class="token operator">//</span> <span class="token number">2.0</span> <span class="token operator">=</span> <span class="token number">1.0</span></code></pre><h4 id="3-2-异常抛出和捕捉机制区别"><a href="#3-2-异常抛出和捕捉机制区别" class="headerlink" title="3.2 异常抛出和捕捉机制区别"></a>3.2 异常抛出和捕捉机制区别</h4><p>在<code>Python 2</code>中的写法</p><pre class=" language-python"><code class="language-python"><span class="token keyword">raise</span> IOError<span class="token punctuation">,</span> <span class="token string">"file error"</span> <span class="token comment" spellcheck="true"># 抛出异常</span><span class="token keyword">except</span> NameError<span class="token punctuation">,</span> err<span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 捕捉异常</span></code></pre><p>在<code>Python 3</code>中的写法</p><pre class=" language-python"><code class="language-python"><span class="token keyword">raise</span> IOError<span class="token punctuation">(</span><span class="token string">"file error"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 抛出异常</span><span class="token keyword">except</span> NameError <span class="token keyword">as</span> err<span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 捕捉异常</span></code></pre><h4 id="3-3-列表表达式对外部同名变量的影响"><a href="#3-3-列表表达式对外部同名变量的影响" class="headerlink" title="3.3 列表表达式对外部同名变量的影响"></a>3.3 列表表达式对外部同名变量的影响</h4><p><code>Python 2</code>，列表表达式会修改外部相同名称变量的值</p><pre class=" language-python"><code class="language-python">i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">print</span> <span class="token string">'comprehension: '</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">print</span> <span class="token string">'after: i ='</span><span class="token punctuation">,</span> i  <span class="token comment" spellcheck="true"># i=4</span></code></pre><p><code>Python 3</code>，列表表达式不会修改外部相同名称变量的值</p><pre class=" language-python"><code class="language-python">i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'comprehension: '</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'after: i ='</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># i=1</span></code></pre><p>注意：在这里若不使用列表表达式，直接使用<code>for</code>逻辑，在<code>Python 3</code>得到的结果与<code>Python 2</code>也是一致的。</p><pre class=" language-python"><code class="language-python">i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'after: i ='</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># i=4</span></code></pre><h4 id="3-4-round-函数返回值区别"><a href="#3-4-round-函数返回值区别" class="headerlink" title="3.4 round 函数返回值区别"></a>3.4 round 函数返回值区别</h4><p><code>Python 2</code>，<code>round</code>函数返回<code>float</code>类型值</p><pre class=" language-python"><code class="language-python">isinstance<span class="token punctuation">(</span>round<span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> int<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Flase</span></code></pre><p><code>Python 3</code>，<code>round</code>函数返回<code>int</code>类型值</p><pre class=" language-python"><code class="language-python">isinstance<span class="token punctuation">(</span>round<span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> float<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Flase</span></code></pre><h4 id="3-5-比较操作符区别"><a href="#3-5-比较操作符区别" class="headerlink" title="3.5 比较操作符区别"></a>3.5 比较操作符区别</h4><p><code>Python 2</code>中任意两个对象都可以比较</p><pre class=" language-python"><code class="language-python"><span class="token number">101</span> <span class="token operator">></span> <span class="token string">'Pythonista'</span> <span class="token comment" spellcheck="true"># False</span></code></pre><p><code>Python 3</code>中只有同一数据类型的对象可以比较</p><pre class=" language-python"><code class="language-python"><span class="token number">101</span> <span class="token operator">></span> <span class="token string">'Pythonista'</span> <span class="token comment" spellcheck="true"># TypeError: '>' not supported between instances of 'int' and 'str'</span></code></pre><h3 id="4-新增的特性"><a href="#4-新增的特性" class="headerlink" title="4 新增的特性"></a>4 新增的特性</h3><p>在<code>Python 3.X</code>中增加的新特性在<code>Python 2</code>中都不支持，这些新特性的说明在官网中有详细的说明：</p><p><strong>3.1</strong> <a href="https://docs.python.org/3.1/whatsnew/3.1.html" target="_blank" rel="noopener">https://docs.python.org/3.1/whatsnew/3.1.html</a><br><strong>3.2</strong> <a href="https://docs.python.org/3.2/whatsnew/3.2.html" target="_blank" rel="noopener">https://docs.python.org/3.2/whatsnew/3.2.html</a><br><strong>3.3</strong> <a href="https://docs.python.org/3.3/whatsnew/3.3.html" target="_blank" rel="noopener">https://docs.python.org/3.3/whatsnew/3.3.html</a><br><strong>3.4</strong> <a href="https://docs.python.org/3.4/whatsnew/3.4.html" target="_blank" rel="noopener">https://docs.python.org/3.4/whatsnew/3.4.html</a><br><strong>3.5</strong> <a href="https://docs.python.org/3.5/whatsnew/3.5.html" target="_blank" rel="noopener">https://docs.python.org/3.5/whatsnew/3.5.html</a><br><strong>3.6</strong> <a href="https://docs.python.org/3.6/whatsnew/3.6.html" target="_blank" rel="noopener">https://docs.python.org/3.6/whatsnew/3.6.html</a><br><strong>3.7</strong> <a href="https://docs.python.org/3.7/whatsnew/3.7.html" target="_blank" rel="noopener">https://docs.python.org/3.7/whatsnew/3.7.html</a><br><strong>3.8</strong> <a href="https://docs.python.org/3.8/whatsnew/3.8.html" target="_blank" rel="noopener">https://docs.python.org/3.8/whatsnew/3.8.html</a><br>在博客园上有一篇对这些新增特性中重要的点进行介绍的文章，可以作为参考：<a href="http://www.cnblogs.com/animalize/p/5633215.html" target="_blank" rel="noopener">http://www.cnblogs.com/animalize/p/5633215.html</a></p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>在面试中可根据实际情况，并结合上述列出的特性差异有选择地进行回答即可。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>本文给大家整理了<code>Python 3</code>与<code>Python 2</code>这么多区别，最后还是希望大家果断放弃<code>Python 2</code>🤣，拥抱<code>Python 3</code>😁，欢迎大家在评论区留言说出自己的看法。此外据说在2023年某个时间段就能看到<code>Python 4</code>😉了。</p><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python面试题系列之01 is 与 == 的区别</title>
      <link href="/2019/04/13/interviewquestion-001-is-yu-de-qu-bie/"/>
      <url>/2019/04/13/interviewquestion-001-is-yu-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="Python面试题系列之01-is-与-的区别"><a href="#Python面试题系列之01-is-与-的区别" class="headerlink" title="Python面试题系列之01: is 与 == 的区别"></a>Python面试题系列之01: is 与 == 的区别</h1><h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><p>请简述下<code>is</code>与<code>==</code>的区别？</p><h2 id="知识点详解"><a href="#知识点详解" class="headerlink" title="知识点详解"></a>知识点详解</h2><p>我们先从下面这三个例子入手</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> <span class="token string">"Pythonista"</span>b <span class="token operator">=</span> <span class="token string">"Pythonista"</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b，a <span class="token operator">==</span> b<span class="token punctuation">)</span></code></pre><p>输出的布尔值依次为<code>True</code>、<code>True</code></p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b，a <span class="token operator">==</span> b<span class="token punctuation">)</span></code></pre><p>输出的布尔值依次为<code>False</code>、<code>True</code></p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>b <span class="token operator">=</span> a<span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b，a <span class="token operator">==</span> b<span class="token punctuation">)</span></code></pre><p>输出的布尔值依次为<code>True</code>、<code>True</code></p><p>上面的输出结果中为什么有的<code>is</code>和<code>==</code>的结果相同，有的不相同呢？</p><p>我们来看下官方文档中对于<code>is</code>和<code>==</code>的解释。</p><blockquote><p>is表达的是对象标识符，object identity，它的作用是用来检查对象的标识符是否一致，也就是比较两个对象在内存中的地址是否一样。<br>== 表达的是相等，equality，则是用来检查两个对象是否相等。</p></blockquote><p>我们在执行<code>a is b</code>的时候，其实相当于检查<code>id(a) == id(b)</code>。</p><p>而执行<code>a == b</code>的时候，实际是调用了对象 <code>a</code> 的<code>__eq()__</code>方法，即<code>a == b</code>相当于 <code>a.__eq__(b)</code>。</p><p>一般情况下，如果<code>a is b</code>返回<code>True</code>的话，即<code>a</code>和<code>b</code>指向同一块内存地址的话，<code>a == b</code>也返回<code>True</code>，即<code>a</code>和<code>b</code>的值也相等。</p><p>了解这些概念后，再来回顾下上面的三组例子：</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> <span class="token string">"Pythonista"</span>b <span class="token operator">=</span> <span class="token string">"Pythonista"</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2788006878712</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2788006878712</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 True </span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 True</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2787978142344</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2787978142408</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 False</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 True </span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>b <span class="token operator">=</span> a<span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2788006947720</span><span class="token keyword">print</span><span class="token punctuation">(</span>id<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 输出 2788006947720</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 True </span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 输出 True</span></code></pre><p>打印出<code>id(a)</code>和<code>id(b)</code>后就很清楚了。只要<code>a</code>和<code>b</code>的值相等，<code>a == b</code>就会返回<code>True</code>，而只有<code>id(a)</code>和<code>id(b)</code>相等时，<code>a is b</code>才返回<code>True</code>。</p><p>总结一下，<code>is</code>是检查两个对象是否指向同一块内存空间，而<code>==</code>是检查他们的值是否相等。可以看出，<code>is</code>是比<code>==</code>更严格的检查，<code>is</code>返回<code>True</code>表明这两个对象指向同一块内存，值也一定相同。</p><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p><code>is</code>是对比地址,而<code>==</code>是对比值</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>搞懂了<code>is</code>与<code>==</code>的区别，那我们来思考一下下面这个问题：<br>Python中与<code>None</code>比较时，为什么是<code>is None</code>而不是<code>== None</code>呢？<br>欢迎大家在评论区留言说出自己的看法。好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python面试题精析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python排错集之WordCloud模块的正确“打开方式”</title>
      <link href="/2019/03/29/pythonerror-for-wordcloud/"/>
      <url>/2019/03/29/pythonerror-for-wordcloud/</url>
      
        <content type="html"><![CDATA[<h1 id="Python排错集之WordCloud模块的正确“打开方式”"><a href="#Python排错集之WordCloud模块的正确“打开方式”" class="headerlink" title="Python排错集之WordCloud模块的正确“打开方式”"></a>Python排错集之WordCloud模块的正确“打开方式”</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>WordCloud模块可以对文章中出现频率较高的“关键词”予以视觉化的展现，在生成的词云图时，过滤掉大量的低频低质的文本信息，使得浏览者只要一眼扫过文本就可领略文章的主旨。</p><p>无图不真相，下图为《数据可视化之用Python制作词云图》文章中的一个效果图，这是通过对19年政府工作报告进行解析并生成的词云图，大家感受下。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194129.jpg" alt=""></p><p>由WordCloud模块生成的词云图，功能强大实用自不必说，但若想正常的用起来，还是需要先解决一些麻烦。本文以Windows系统为例，进行一遍扫雷，帮大家快速用上WordCloud模块。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><h2 id="2-开始排雷"><a href="#2-开始排雷" class="headerlink" title="2 开始排雷"></a>2 开始排雷</h2><h3 id="2-1-模块安装时遇C-Error"><a href="#2-1-模块安装时遇C-Error" class="headerlink" title="2.1 模块安装时遇C++ Error"></a>2.1 模块安装时遇C++ Error</h3><p>WordCloud模块，同其它第三方模块一样，可直接使用pip命令进行安装，但是很快就踩上了第一颗雷。安装过程出现Error被中止，Microsoft Visual C++ 14.0 is required. 如下图：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194125.jpg" alt=""></p><p>这个报错的原因及解决方案，在之前文章中已有详细说明，这里就不再赘述。参见：</p><p>《装Python第三方库遇Error：C++ 14.0 is required. 》</p><h3 id="2-2-使用过程中报OS-Error"><a href="#2-2-使用过程中报OS-Error" class="headerlink" title="2.2 使用过程中报OS Error"></a>2.2 使用过程中报OS Error</h3><p>在模块安装好之后，我们就可以利用WordCloud模块生成自己的词云图了。相关代码写好之后，运行一下试试。呀！一不小心就会踩上第二颗雷。运行时出现了<code>OSError</code>，提示Cannot open resource，如图：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194112.png" alt=""></p><h4 id="2-2-1-问题原因"><a href="#2-2-1-问题原因" class="headerlink" title="2.2.1 问题原因"></a>2.2.1 问题原因</h4><p>出现这个错误的原因是在调用WordCloud模块时设置的字体，系统找不到，所以报出了Cannot open resource. 所以解决办法就有了，正确设置WordCloud模块使用的字体即可。</p><p>那问题来了，WordCloud模块调用的字体，要怎么设置、以及去哪里设置呢？</p><p>先来看看我们代码中设置词云参数的地方：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 设置词云参数</span>w <span class="token operator">=</span> wordcloud<span class="token punctuation">.</span>WordCloud<span class="token punctuation">(</span>    <span class="token comment" spellcheck="true"># 设置字体 </span>    font_path <span class="token operator">=</span> <span class="token string">'SIMYOU.TTF'</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true"># 设置输出的图片宽高像素值</span>    width <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">700</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置输出的图片背景色</span>    background_color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">)</span></code></pre><p>这个<code>SIMYOU.TTF</code>就是字体的名称，它代表了幼圆字体。但是这个名称又是从哪里来的呢？</p><h4 id="2-2-2-追根溯源"><a href="#2-2-2-追根溯源" class="headerlink" title="2.2.2 追根溯源"></a>2.2.2 追根溯源</h4><p>我们先来寻找下Windows系统的字体的位置，找找问题的“源头”。因为字体是系统级的东西，直接在系统盘检索一下，很容易找到答案。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194120.png" alt=""></p><p>打开Fonts文件夹看看，这里存放了windows系统已安装的所有字体，如下图：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194137.png" alt=""></p><p>我们在这个文件夹下仔细找寻一番，不难发现幼圆字体，但是它的名字为什么是SIMYOU.TTF，而不是SIMYOU.TTC呢？这里不再卖关子了，直接放大招。把幼圆Copy出来瞅瞅，你就明白了。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194111.png" alt=""></p><p>好了，我们知道了字体的源头，那就可以解决问题了。</p><h4 id="2-2-3-解决方法一"><a href="#2-2-3-解决方法一" class="headerlink" title="2.2.3 解决方法一"></a>2.2.3 解决方法一</h4><p>从Windows字体目录中直接Copy出来一个字体，把字体名字填在配置词云参数中的<code>font_path</code>即可。</p><pre class=" language-python"><code class="language-python">font_path <span class="token operator">=</span> <span class="token string">'SIMYOU.TTF'</span></code></pre><p>此时再运行代码，就不会出现<code>OSError</code>报错了。</p><h4 id="2-2-4-解决方法二"><a href="#2-2-4-解决方法二" class="headerlink" title="2.2.4 解决方法二"></a>2.2.4 解决方法二</h4><p>其实与方法一是一个思路，只是不同的书写方式，如下：</p><p>即直接在<code>font_path</code>处填上Windows字体的绝对路径。</p><pre class=" language-python"><code class="language-python">font_path <span class="token operator">=</span> <span class="token string">'C:\\Windows\\Fonts\\SIMYOU.TTF'</span><span class="token punctuation">,</span> </code></pre><h3 id="2-3-生成的词云出现乱码"><a href="#2-3-生成的词云出现乱码" class="headerlink" title="2.3 生成的词云出现乱码"></a>2.3 生成的词云出现乱码</h3><p>解决了OS Error问题，并不代表生成的词云就没有问题了。如果你是对中文的材料制作词云，很容易踩上第三颗雷，如下图，是不是很绝望🤣🤣🤣</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194122.png" alt=""></p><h4 id="2-3-1-问题原因"><a href="#2-3-1-问题原因" class="headerlink" title="2.3.1 问题原因"></a>2.3.1 问题原因</h4><p>出现上述方块乱码，不要怀疑是自己代码哪里出现了问题。这个问题原因很简单，只是由于你使用的字体不支持中文导致的。</p><h4 id="2-3-2-从源头说起"><a href="#2-3-2-从源头说起" class="headerlink" title="2.3.2 从源头说起"></a>2.3.2 从源头说起</h4><p>我们还是先看看Windows字体这个文件夹，切换为列表显示方式</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194134.png" alt=""></p><p>看到了没？这些字体都有自己对应的语言，不支持中文的当然不会给你正常显示的。我们直接下拉到列表的底部，我们要用到的字体都在这里。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194135.png" alt=""></p><h4 id="2-3-3-解决方法"><a href="#2-3-3-解决方法" class="headerlink" title="2.3.3 解决方法"></a>2.3.3 解决方法</h4><p>了解问题的根源之后，我们在这里直接挑选支持中文的字体来使用即可。</p><h2 id="3-总结"><a href="#3-总结" class="headerlink" title="3 总结"></a>3 总结</h2><p>好了，WordCloud在使用过程中遇到的雷，到此就排的差不多了，赶快去生成自己漂亮的词云图吧~！若在使用词云过程中还有遇到其它问题，欢迎留言出来！</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
            <tag> Python排错集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之数据可视化之用Python制作词云图</title>
      <link href="/2019/03/27/pythonapps-wordcloud/"/>
      <url>/2019/03/27/pythonapps-wordcloud/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之数据可视化之用Python制作词云图"><a href="#Python小应用系列之数据可视化之用Python制作词云图" class="headerlink" title="Python小应用系列之数据可视化之用Python制作词云图"></a>Python小应用系列之数据可视化之用Python制作词云图</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h2><p>词云图，也称文字云，是对文本中出现频率较高的“关键词”予以视觉化的展现，词云图过滤掉大量的低频低质的文本信息，使得浏览者只要一眼扫过文本就可领略文章的主旨。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><h2 id="2-模块准备"><a href="#2-模块准备" class="headerlink" title="2 模块准备"></a>2 模块准备</h2><p>本文涉及到的Python第三方模块，共计四个：分词模块jieba，文字云模块wordcloud，画图模块matplotlib，用来处理背景图片的模块scipy。这些模块均可通过pip方式进行安装：</p><pre class=" language-python"><code class="language-python">pip install jiebapip install wordcloudpip install matplotlibpip install scipy</code></pre><p>注：在安装wordcloud时，可能会遇到报错，解决方案见：《装Python第三方库遇Error：C++ 14.0 is required.》</p><p>模块的导入：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 分词模块</span><span class="token keyword">import</span> jieba<span class="token comment" spellcheck="true"># 画图模块</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment" spellcheck="true"># 文字云模块</span><span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud<span class="token comment" spellcheck="true"># 这是一个处理图像的函数，用于读取并处理背景图片</span><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>misc <span class="token keyword">import</span> imread</code></pre><h2 id="3-实现思路"><a href="#3-实现思路" class="headerlink" title="3 实现思路"></a>3 实现思路</h2><p>准备好一份自己需要分析的文本材料，这里选用的是19年两会新鲜出炉的政府工作报告。我们首先得通过jieba模块对文本材料进行分词处理，然后对处理后的材料使用wordcloud文字云模块生成相应的词云图片即可。</p><p>当然了你可以选择一个背景图片，并以此为基础生成特定的云图，这时就用到了上面提到的另外两个模块scipy和matplotlib。</p><p>好了，思路有了，那就开始实践吧~</p><h2 id="4-小试牛刀"><a href="#4-小试牛刀" class="headerlink" title="4 小试牛刀"></a>4 小试牛刀</h2><p>小试牛刀章节教你仅用9行代码，来生成一个词云图，先欣赏下最终的效果图。</p><h3 id="4-1-效果图"><a href="#4-1-效果图" class="headerlink" title="4.1 效果图"></a>4.1 效果图</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194141.png" alt=""></p><h3 id="4-2-代码实现"><a href="#4-2-代码实现" class="headerlink" title="4.2 代码实现"></a>4.2 代码实现</h3><p>制作云图的思路，上文已作说明，这些就不再赘述了，直接看代码，代码中已添加详细注释说明。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> jieba<span class="token keyword">import</span> wordcloud<span class="token comment" spellcheck="true"># 读取词源文件</span><span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">"govreport.txt"</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    t <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 进行分词</span>ls <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 把分词用空格连起来</span>txt <span class="token operator">=</span> <span class="token string">' '</span> <span class="token punctuation">.</span>join<span class="token punctuation">(</span>ls<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置词云参数</span>w <span class="token operator">=</span> wordcloud<span class="token punctuation">.</span>WordCloud<span class="token punctuation">(</span>    <span class="token comment" spellcheck="true"># 设置字体 </span>    font_path <span class="token operator">=</span> <span class="token string">'SIMYOU.TTF'</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true"># 设置输出的图片宽高像素值</span>    width <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">700</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置输出的图片背景色</span>    background_color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 生成词云</span>w<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 将图片保存到本地</span>w<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">'2019GovReport.png'</span><span class="token punctuation">)</span></code></pre><p>除去注释、导入模块占用的两行，剩下仅7行的代码，你来说说Python强大不？</p><p>小试牛刀不够牛？上面做出的云图不够完美？那就继续看下去，这里来实现一个定制图案的云图。</p><h2 id="5-中试牛刀"><a href="#5-中试牛刀" class="headerlink" title="5 中试牛刀"></a>5 中试牛刀</h2><p>我们这里有一张祖国地图，是否可以定制生成一个祖国版图样式的词云图呢？</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194142.jpg" alt=""></p><p>答案是肯定的，只因为Python太强大，实现思路直接看代码。</p><h3 id="5-1-代码实现"><a href="#5-1-代码实现" class="headerlink" title="5.1 代码实现"></a>5.1 代码实现</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 分词模块</span><span class="token keyword">import</span> jieba<span class="token comment" spellcheck="true"># 画图模块</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment" spellcheck="true"># 文字云模块</span><span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud<span class="token comment" spellcheck="true"># 这是一个处理图像的函数，读取背景图片</span><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>misc <span class="token keyword">import</span> imread<span class="token comment" spellcheck="true"># 词源的文本文件</span>wf <span class="token operator">=</span> <span class="token string">'govreport.txt'</span><span class="token comment" spellcheck="true"># 读取文件内容</span>word_content <span class="token operator">=</span> open<span class="token punctuation">(</span>wf<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置背景图片</span>img_file <span class="token operator">=</span> <span class="token string">'China.jpg'</span><span class="token comment" spellcheck="true"># 解析背景图片</span>mask_img <span class="token operator">=</span> imread<span class="token punctuation">(</span>img_file<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 进行分词</span>word_cut <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>word_content<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 把分词用空格连起来</span>word_cut_join <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>word_cut<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置词云参数</span>wc <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>    <span class="token comment" spellcheck="true"># 设置字体  </span>    font_path<span class="token operator">=</span><span class="token string">'SIMYOU.TTF'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 允许最大词汇量</span>    max_words <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置最大号字体大小</span>    max_font_size <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置使用的背景图片，这个参数不为空时，width和height会被忽略</span>    mask <span class="token operator">=</span> mask_img<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># 设置输出的图片背景色</span>    background_color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 生成词云</span>wc<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>word_cut_join<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 用于显示图片，需配合plt.show()一起使用</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wc<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 去掉坐标轴</span>plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 将图片保存到本地</span>plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'2019GovReport.jpg'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="5-2-效果图"><a href="#5-2-效果图" class="headerlink" title="5.2 效果图"></a>5.2 效果图</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194129.jpg" alt=""></p><h2 id="6-总结"><a href="#6-总结" class="headerlink" title="6 总结"></a>6 总结</h2><p>是不是又被强大的Python给震撼了？如引言所述，通过生成词云图，对文章中出现频率较高的“关键词”予以视觉化的展现，帮助读者快速领略文章的主旨，既方便又高效！</p><p>不过呢，不要高兴地太早，这里给大家暗暗地埋了几颗雷，词云图功能强大实用自不必说，但是若想正常的用起来，除了上面提到的在安装wordcloud模块时会遇到麻烦之外，还有更多的麻烦在等着大家。请关注后续Python排错集的系列文章。</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/tree/master/WordCloud" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之装第三方库遇Error：C++ 14.0 is required.</title>
      <link href="/2019/03/19/pythonerror-c-14.0-is-required/"/>
      <url>/2019/03/19/pythonerror-c-14.0-is-required/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之装第三方库遇Error：C-14-0-is-required"><a href="#Python小应用系列之装第三方库遇Error：C-14-0-is-required" class="headerlink" title="Python小应用系列之装第三方库遇Error：C++ 14.0 is required."></a>Python小应用系列之装第三方库遇Error：C++ 14.0 is required.</h1><h2 id="0-问题引入"><a href="#0-问题引入" class="headerlink" title="0 问题引入"></a>0 问题引入</h2><p>最近在使用pip 安装WordCloud模块时，遇到了如下错误。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194125.png" alt=""></p><p>网上查询了下这个Error，并不是个例，很多模块在安装时都可能会遇到这个错误。所以很有必要写篇文章排个雷。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194139.png" alt=""></p><h2 id="1-问题原因"><a href="#1-问题原因" class="headerlink" title="1 问题原因"></a>1 问题原因</h2><p>从执行的报错中，我们提取出关键信息如下：</p><pre><code>error: Microsoft Visual C++ 14.0 is required. Get it with "Microsoft Visual C++ Build Tools": https://visualstudio.microsoft.com/downloads/</code></pre><p>通过提示，我们可以得知是由于c++依赖库不存在，所以在对包进行编译的时候出错，我们需要安装一个C++14.0的库。</p><h2 id="2-解决方案"><a href="#2-解决方案" class="headerlink" title="2 解决方案"></a>2 解决方案</h2><h3 id="2-1-方案一"><a href="#2-1-方案一" class="headerlink" title="2.1 方案一"></a>2.1 方案一</h3><p>直接使用提示中的链接，点进去去下载C++14.0的库<br>解压安装<br>安装完毕再次执行pip install xx<br>但是这个库差不多有4G大小，下载并解压安装？不现实，尤其是时间上划不来。那么就有了第二种解决方案，也是推荐使用的。</p><h3 id="2-2-方案二"><a href="#2-2-方案二" class="headerlink" title="2.2 方案二"></a>2.2 方案二</h3><p>根据提示我们知道c++依赖库不存在，所以在对包进行编译的时候出错。那我们可以去直接下载该模块对应的二进制安装包进行安装。</p><p>首先打开如下这个链接：</p><pre><code>https://www.lfd.uci.edu/~gohlke/pythonlibs/</code></pre><p>这个网站给我们提供了大量的Python第三方库的二进制安装包。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194136.png" alt=""></p><p>全英文，看不懂怎么办？那就强行Google翻译下。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194138.png" alt=""></p><p>通过翻译软件的帮助，我们已经了解了这个网站是做什么的了，现在就开始干正事。</p><h4 id="2-2-1-检索模块名称"><a href="#2-2-1-检索模块名称" class="headerlink" title="2.2.1 检索模块名称"></a>2.2.1 检索模块名称</h4><p>直接在网页中<code>Ctrl + F</code>搜索我们要安装的模块的名字，比如我这里的WordCloud模块。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194117.png" alt=""></p><h4 id="2-2-2-选择版本并下载"><a href="#2-2-2-选择版本并下载" class="headerlink" title="2.2.2 选择版本并下载"></a>2.2.2 选择版本并下载</h4><p>该网站中列出的模块的命名规则如下，这里要选择你自身系统对应的版本进行下载。</p><ul><li>cp后接python版本， 请与你的python版本对应</li><li>win32，标识32位架构，适用于32位系统</li><li>win_amd64，指64位架构，适用于64位系统<br>如果你电脑上安装有VS Code，你可以打开，直接通过左下角的信息，来获取你安装的Python版本信息，如下图：</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194110.png" alt=""></p><p>我所使用的环境是Python3.6.3、32位的版本，所以直接下载wordcloud-1.5.0-cp36-cp36m-win32.whl</p><h4 id="2-2-3-安装whl文件"><a href="#2-2-3-安装whl文件" class="headerlink" title="2.2.3 安装whl文件"></a>2.2.3 安装whl文件</h4><p>下载好之后，直接执行pip install xxxx进行安装即可。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194115.png" alt=""></p><p>安装好之后，你可以进行一下验证，查看导入模块是否正常。</p><h2 id="3-总结"><a href="#3-总结" class="headerlink" title="3 总结"></a>3 总结</h2><p>一个问题通常有多种解决方法，并不是官方推荐的方法就一定适合，要根据实际使用场景来选择使用。比如本文中我们仅是为了使用WordCloud库，而去安装C++ 14.0这么大的库，很显然不值得，要灵活选择解决方案来达到最大效益。</p><p>好了，以上就是本篇全部内容。</p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
            <tag> Python排错集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之定时发送天气信息给微信好友</title>
      <link href="/2019/03/17/pythonapps-wechatrobot-sendweatherinfo/"/>
      <url>/2019/03/17/pythonapps-wechatrobot-sendweatherinfo/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之定时发送天气信息给微信好友"><a href="#Python小应用系列之定时发送天气信息给微信好友" class="headerlink" title="Python小应用系列之定时发送天气信息给微信好友"></a>Python小应用系列之定时发送天气信息给微信好友</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0.引言"></a>0.引言</h2><p>前段时间找到了一个免费的天气预报API，费了好段时间把这个API解析并组装成自己想用的格式了，就想着如何实现每天发送天气信息给自己。最近无意中发现了wxpy库，用它来做再合适不过了。以下是wxpy库的简介：</p><p>wxpy基于itchat，使用了 Web 微信的通讯协议，通过大量接口优化提升了模块的易用性，并进行丰富的功能扩展。实现了微信登录、收发消息、搜索好友、数据统计、微信公众号、微信好友、微信群基本信息获取等功能。<br>废话不多说，代码写起来。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1.环境"></a>1.环境</h2><p>操作系统：Windows /  Linux</p><p>Python版本：3.7.2</p><h2 id="2-代码实现"><a href="#2-代码实现" class="headerlink" title="2.代码实现"></a>2.代码实现</h2><p>我们要实现用Python来发微信，发送的内容是每天最新的天气信息。很明显我们需要完成两部分的准备，先来看看获取天气信息这部分内容。</p><h3 id="2-0-准备工作"><a href="#2-0-准备工作" class="headerlink" title="2.0 准备工作"></a>2.0 准备工作</h3><p>本文我们用到的第三方库有requests、wxpyy，若环境还没有，按如下方式进行安装即可。</p><pre class=" language-python"><code class="language-python">pip install wxpypip install requests</code></pre><h3 id="2-1-获取天气信息"><a href="#2-1-获取天气信息" class="headerlink" title="2.1 获取天气信息"></a>2.1 获取天气信息</h3><p>这里我使用的API的请求链接如下：</p><p><a href="http://t.weather.sojson.com/api/weather/city/city_code" target="_blank" rel="noopener">http://t.weather.sojson.com/api/weather/city/city_code</a><br>请求方式是GET方法，使用时注意更换为自己城市对应的city_code，除此之外不用带任何参数。请求是restfull风格，city_code为9位数字，如下示例：</p><pre class=" language-json"><code class="language-json">    <span class="token punctuation">{</span>      <span class="token property">"_id"</span><span class="token operator">:</span> <span class="token number">58</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>      <span class="token property">"pid"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"city_code"</span><span class="token operator">:</span> <span class="token string">"101230201"</span><span class="token punctuation">,</span>      <span class="token property">"city_name"</span><span class="token operator">:</span> <span class="token string">"厦门"</span>    <span class="token punctuation">}</span></code></pre><p>大家可以从_city.json文件中获取各个城市对应的编号。该文件我已经放在Github本文章对应的目录下了，大家可自行查询使用。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># weather API的URL，此处的城市编号，参看_city.json</span>url <span class="token operator">=</span> <span class="token string">'http://t.weather.sojson.com/api/weather/city/101010200'</span>header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36'</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true"># 请求Weather API并拿到服务器返回的数据</span>rep <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers <span class="token operator">=</span> header<span class="token punctuation">)</span>rep<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"utf-8"</span>result <span class="token operator">=</span> <span class="token string">''</span>weather <span class="token operator">=</span> rep<span class="token punctuation">.</span>text</code></pre><p>这个API接口的返回值内容很多，以下仅展示返回的部分信息。实际使用中仅用到三块内容，首先是城市信息。</p><pre class=" language-json"><code class="language-json"><span class="token property">"cityInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"city"</span><span class="token operator">:</span> <span class="token string">"海淀区"</span><span class="token punctuation">,</span>  //请求城市    <span class="token property">"cityId"</span><span class="token operator">:</span> <span class="token string">"101010200"</span><span class="token punctuation">,</span>  //城市ID    <span class="token property">"parent"</span><span class="token operator">:</span> <span class="token string">"北京市"</span><span class="token punctuation">,</span>  //上级，一般是省份    <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"09:02"</span>  //天气更新时间<span class="token punctuation">}</span></code></pre><p>其次是，该城市当前天气的空气相关指数。</p><pre class=" language-json"><code class="language-json"><span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"shidu"</span><span class="token operator">:</span> <span class="token string">"32%"</span><span class="token punctuation">,</span>  //湿度    <span class="token property">"pm25"</span><span class="token operator">:</span> <span class="token number">35.0</span><span class="token punctuation">,</span>  //pm2<span class="token number">.5</span>    <span class="token property">"pm10"</span><span class="token operator">:</span> <span class="token number">97.0</span><span class="token punctuation">,</span>  //pm10    <span class="token property">"quality"</span><span class="token operator">:</span> <span class="token string">"良"</span><span class="token punctuation">,</span>  //空气质量    <span class="token property">"wendu"</span><span class="token operator">:</span> <span class="token string">"7"</span><span class="token punctuation">,</span>  //温度    <span class="token property">"ganmao"</span><span class="token operator">:</span> <span class="token string">"极少数敏感人群应减少户外活动"</span><span class="token punctuation">,</span>  //感冒提醒（指数）</code></pre><p>第三部分，该城市当前天气的温度风力等另外一些指数。</p><pre class=" language-json"><code class="language-json"><span class="token property">"forecast"</span><span class="token operator">:</span> <span class="token punctuation">[</span>  //今天+未来<span class="token number">14</span>天    <span class="token punctuation">{</span>        <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"16"</span><span class="token punctuation">,</span>  //日期        <span class="token property">"sunrise"</span><span class="token operator">:</span> <span class="token string">"06: 28"</span><span class="token punctuation">,</span>        <span class="token property">"high"</span><span class="token operator">:</span> <span class="token string">"高温 20.0℃"</span><span class="token punctuation">,</span>        <span class="token property">"low"</span><span class="token operator">:</span> <span class="token string">"低温 2.0℃"</span><span class="token punctuation">,</span>        <span class="token property">"sunset"</span><span class="token operator">:</span> <span class="token string">"18: 21"</span><span class="token punctuation">,</span>        <span class="token property">"aqi"</span><span class="token operator">:</span> <span class="token number">48.0</span><span class="token punctuation">,</span>         <span class="token property">"ymd"</span><span class="token operator">:</span> <span class="token string">"2019-03-16"</span><span class="token punctuation">,</span>  //年月日        <span class="token property">"week"</span><span class="token operator">:</span> <span class="token string">"星期六"</span><span class="token punctuation">,</span>        <span class="token property">"fx"</span><span class="token operator">:</span> <span class="token string">"西北风"</span><span class="token punctuation">,</span>  //风向        <span class="token property">"fl"</span><span class="token operator">:</span> <span class="token string">"3-4级"</span><span class="token punctuation">,</span>  //风力        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"晴"</span><span class="token punctuation">,</span>        <span class="token property">"notice"</span><span class="token operator">:</span> <span class="token string">"愿你拥有比阳光明媚的心情"</span>    <span class="token punctuation">}</span></code></pre><p>注：这个API接口返回值完整的示例，请见Github中本文章目录下的weather.json文件。</p><p>拿到返回值之后，需要解析，并转换组装成我们想要的格式。 </p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 解析服务器返回的数据，具体可参考weather.json文件</span>index_cityInfo <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"cityInfo"</span><span class="token punctuation">)</span>index_cityId <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"cityId"</span><span class="token punctuation">)</span>index_shidu <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"shidu"</span><span class="token punctuation">)</span>index_pm25 <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"pm25"</span><span class="token punctuation">)</span>index_pm10 <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"pm10"</span><span class="token punctuation">)</span>index_quality <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"quality"</span><span class="token punctuation">)</span>index_wendu <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"wendu"</span><span class="token punctuation">)</span>index_ganmao <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"ganmao"</span><span class="token punctuation">)</span>index_forecast <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"forecast"</span><span class="token punctuation">)</span>index_ymd <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"ymd"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_week <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"week"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_sunset <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"sunset"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_high <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"high"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_low <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"low"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_fx <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"fx"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_fl <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"fl"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_aqi <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"aqi"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_type <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span>index_notice <span class="token operator">=</span> weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"notice"</span><span class="token punctuation">,</span> index_forecast<span class="token punctuation">)</span></code></pre><p>这是我最终想达到的效果如下：</p><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">'''# 今日天气预报# 年月日 + 星期 + 所在地城市# 天气类型 + 风向 + 风力# 温度范围（最低温度~最高温度）# 污染指数：PM2.5/PM10/AQI# 空气质量# 当前温度 + 空气湿度# Notice信息'''</span></code></pre><p>转换化具体代码就是这样子的：</p><pre class=" language-python"><code class="language-python">result <span class="token operator">=</span> <span class="token string">'今日天气预报'</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_ymd <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">:</span>index_week <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_week <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">:</span>index_fx <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_cityInfo <span class="token operator">+</span> <span class="token number">19</span><span class="token punctuation">:</span>index_cityId <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> <span class="token string">"天气: "</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_type <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">:</span>index_notice <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"  "</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_fx <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">:</span>index_fl <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_fl <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">:</span>index_type <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> <span class="token string">"温度范围:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_low <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">:</span>index_sunset <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" ~"</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_high <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">:</span>index_low <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> <span class="token string">"污染指数: PM2.5:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_pm25 <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">:</span>index_pm10 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span> \    <span class="token operator">+</span> <span class="token string">"PM10:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_pm10 <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">:</span>index_quality <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span> \    <span class="token operator">+</span> <span class="token string">"AQI:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_aqi <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">:</span>index_ymd <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> <span class="token string">"空气质量:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_quality <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">:</span>index_wendu <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> <span class="token string">"当前温度:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_wendu <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">:</span>index_ganmao <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"  "</span> \    <span class="token operator">+</span> <span class="token string">"空气湿度:"</span> <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_shidu <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">:</span>index_pm25 <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> \    <span class="token operator">+</span> weather<span class="token punctuation">[</span>index_notice <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">:</span>weather<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'}'</span><span class="token punctuation">,</span> index_notice<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></code></pre><p>这样我们的第一步，获取天气信息就完成了。接下来就是登录微信定时发送消息了。</p><h3 id="2-2-登录微信定时发送消息"><a href="#2-2-登录微信定时发送消息" class="headerlink" title="2.2 登录微信定时发送消息"></a>2.2 登录微信定时发送消息</h3><p>首先要登录微信，一行代码就搞定了。这里实际上是扫二维码登录了一个Web版的微信。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 初始化机器人，扫码登陆微信，适用于Windows系统</span>bot <span class="token operator">=</span> Bot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># # Linux系统，执行登陆请调用下面的这句</span><span class="token comment" spellcheck="true"># bot = Bot(console_qr=2, cache_path="botoo.pkl")</span></code></pre><p>然后我们需要定义一个发送消息的函数，将获取并解析好的天气信息发送给指定微信好友。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用get_weather函数</span>GW <span class="token operator">=</span> get_weather<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 填入你朋友的微信昵称，注意这里不是备注，也不是微信帐号</span>my_friend <span class="token operator">=</span> bot<span class="token punctuation">.</span>friends<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>search<span class="token punctuation">(</span>u<span class="token string">'一个昵称'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 发送微信消息</span>my_friend<span class="token punctuation">.</span>send<span class="token punctuation">(</span>u<span class="token string">"早上好Y(^o^)Y，这里是今日份的天气信息请查收!"</span><span class="token punctuation">)</span>my_friend<span class="token punctuation">.</span>send<span class="token punctuation">(</span>GW<span class="token punctuation">)</span>        my_friend<span class="token punctuation">.</span>send<span class="token punctuation">(</span>u<span class="token string">"Have a Nice Day!"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 每隔86400秒（1天），发送1次</span>t <span class="token operator">=</span> Timer<span class="token punctuation">(</span><span class="token number">86400</span><span class="token punctuation">,</span> auto_send<span class="token punctuation">)</span>t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>接下来，你可以使用try…except…语句来实现在消息失败时发出告警：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''此处为发送消息的代码，即上一段内容'''</span><span class="token keyword">except</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 你的微信昵称，注意这里不是备注，也不是微信帐号</span>    my_friend <span class="token operator">=</span> bot<span class="token punctuation">.</span>friends<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'&amp;娴敲棋子&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    my_friend<span class="token punctuation">.</span>send<span class="token punctuation">(</span>u<span class="token string">"报告老板，今日份的信息发送失败了！"</span><span class="token punctuation">)</span></code></pre><p>最后运行主函数，调用发送消息的函数即可。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 调用函数进行消息发送</span>auto_send<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h1 id="3-效果展示"><a href="#3-效果展示" class="headerlink" title="3.效果展示"></a>3.效果展示</h1><p>这是我清晨收到的微信消息截图，看上去还不错。没白忙活😉</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118194143.jpg" alt=""></p><h1 id="4-后记"><a href="#4-后记" class="headerlink" title="4.后记"></a>4.后记</h1><p>我把这个脚本丢在了我的树莓上，挂在后台一直运行，简直完美😁。这里仅是实现一个最简单的定时发送，后续考虑如何实现多个时间点的定时发送，还准备加上早间新闻资讯以及火车放票信息等内容。</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/WechatRobot_SendWeatherInfo/WechatRobot_AutoSend_Weather_Info.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之用Python爬取&quot;农药&quot;英雄皮肤</title>
      <link href="/2019/03/12/pythonapps-crawl-kingofglory/"/>
      <url>/2019/03/12/pythonapps-crawl-kingofglory/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之用Python爬取”农药”英雄皮肤"><a href="#Python小应用系列之用Python爬取”农药”英雄皮肤" class="headerlink" title="Python小应用系列之用Python爬取”农药”英雄皮肤"></a>Python小应用系列之用Python爬取”农药”英雄皮肤</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0.引言"></a>0.引言</h2><p>作为一款现象级游戏，王者荣耀，想必大家都玩过或听过，游戏里中各式各样的英雄，每款皮肤都非常精美，用做电脑壁纸再合适不过了。本篇就来教大家如何使用Python来爬取这些精美的英雄皮肤。</p><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1.环境"></a>1.环境</h2><p>操作系统：Windows /  Linux</p><p>Python版本：3.7.2</p><h2 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2.需求分析"></a>2.需求分析</h2><p>我们打开《王者荣耀》官网，找定位到英雄列表的页面（可直接点此链接：<a href="https://pvp.qq.com/web201605/herolist.shtml" target="_blank" rel="noopener">https://pvp.qq.com/web201605/herolist.shtml</a> ）。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191656.png" alt=""></p><p>在这个网页中包含了所有的英雄，头像及英雄名称。点击其中一个英雄的头像，如“嫦娥”，进去后如下图：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191722.png" alt=""></p><p>我们记下此时的网址。</p><p><a href="https://pvp.qq.com/web201605/herodetail/515.shtml" target="_blank" rel="noopener">https://pvp.qq.com/web201605/herodetail/515.shtml</a><br>再后退到英雄列表页面，点“甄姬”进去查看：</p><p><a href="https://pvp.qq.com/web201605/herodetail/127.shtml" target="_blank" rel="noopener">https://pvp.qq.com/web201605/herodetail/127.shtml</a><br>可以看到这些网址几乎是固定不变的，变化的只是515、127这些数字，这些其实就是代表的英雄数字编号。那么第一个关键点就来了，怎么找出各个英雄所对应的数字编号呢？</p><p>我们回到最初的英雄列表页面，打开浏览器的开发者工具<code>F12</code>，刷新页面、仔细观察，你会找到一个herolist.json的文件，如图所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191737.png" alt=""></p><p>这里记录了各个英雄的信息，其中就包含了每个英雄对应的数字编号了，请忽略这里截图中的乱码显示。我们切到herolist.json中的Headers，就可以拿到该请求的URL地址，进而就可以把英雄及其对应的数字，编号都提取出来了。</p><p>有了英雄编号的对应关系，再找寻下英雄皮肤的链接规律。</p><p>现在重新进入一个英雄的网址，打开浏览器的开发者工具，刷新页面，在Network下刷新并找到英雄的皮肤图片，如图所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191811.png" alt=""></p><p>在Headers中查看该图片的网址，查看即Request URL处的链接：</p><p><a href="https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/515/515-bigskin-1.jpg" target="_blank" rel="noopener">https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/515/515-bigskin-1.jpg</a><br>找寻一个看看</p><p><a href="https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/529/529-bigskin-1.jpg" target="_blank" rel="noopener">https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/529/529-bigskin-1.jpg</a><br>继续寻一个看看</p><p><a href="https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/127/127-bigskin-4.jpg" target="_blank" rel="noopener">https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/127/127-bigskin-4.jpg</a><br>仔细分析如上三个链接，我们可以把英雄皮肤的URL拆分开来看。它是由一个固定前缀（我们可以记为base_url），再加上英雄数字编号、”bigskin”、皮肤编号、”.jpg”组合而成，如下：</p><pre><code>base_url / hero_num / hero_num - bigskin - heroskin_num .jpg </code></pre><p>拿到了各个英雄皮肤的URL地址后，我们就可以进行图片的下载并保存在本地了。</p><h2 id="3-代码演示"><a href="#3-代码演示" class="headerlink" title="3.代码演示"></a>3.代码演示</h2><p>首先导入我们所用到的模块</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">import</span> os</code></pre><p>注：requests是非内置模块，若环境中没有，需自行安装：</p><pre class=" language-python"><code class="language-python">pip install requests</code></pre><h3 id="3-1-提取英雄名字及数字"><a href="#3-1-提取英雄名字及数字" class="headerlink" title="3.1 提取英雄名字及数字"></a>3.1 提取英雄名字及数字</h3><p>使用herolist.json拿到herolist，并提取出我们关心的内容</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 英雄的名字json</span>url <span class="token operator">=</span> <span class="token string">'http://pvp.qq.com/web201605/js/herolist.json'</span>head <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span><span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36'</span><span class="token punctuation">}</span>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>head<span class="token punctuation">)</span>hero_list <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 提取英雄名字和数字</span>hero_name<span class="token operator">=</span>list<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token string">'cname'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hero_list<span class="token punctuation">)</span><span class="token punctuation">)</span> hero_number<span class="token operator">=</span>list<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token string">'ename'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hero_list<span class="token punctuation">)</span><span class="token punctuation">)</span> </code></pre><h3 id="3-2-构造英雄皮肤的URL"><a href="#3-2-构造英雄皮肤的URL" class="headerlink" title="3.2 构造英雄皮肤的URL"></a>3.2 构造英雄皮肤的URL</h3><p>首先准备好我们的BASE_URL，即英雄皮肤的固定前缀。</p><pre><code>h_l = 'http://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/'</code></pre><p>接下来构造好英雄皮肤的URL，同时我们需要对每一个英雄的所有皮肤进行遍历，如下：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 逐一遍历英雄</span><span class="token keyword">for</span> i <span class="token keyword">in</span> hero_number<span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 逐一遍历皮肤，此处假定一个英雄最多有15个皮肤</span>    <span class="token keyword">for</span> sk_num <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        hsl <span class="token operator">=</span> h_l <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'/'</span><span class="token operator">+</span>str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'-bigskin-'</span><span class="token operator">+</span>str<span class="token punctuation">(</span>sk_num<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'.jpg'</span>        hl <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>hsl<span class="token punctuation">)</span></code></pre><h3 id="3-3-存储图片"><a href="#3-3-存储图片" class="headerlink" title="3.3 存储图片"></a>3.3 存储图片</h3><p>最后我们就只需将获取到的图片保存在本地即可。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 将图片保存下来，并以"英雄名称_皮肤序号"方式命名</span><span class="token keyword">with</span> open<span class="token punctuation">(</span>hero_name<span class="token punctuation">[</span>num<span class="token punctuation">]</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>sk_num<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>hl<span class="token punctuation">.</span>content<span class="token punctuation">)</span></code></pre><h2 id="4-效果展示"><a href="#4-效果展示" class="headerlink" title="4.效果展示"></a>4.效果展示</h2><p>最终的爬取效果如下图所示。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191858.png" alt=""></p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5.总结"></a>5.总结</h2><p>短短几十行代码就可以把心爱英雄的精美皮肤保存下来，赶快实操起来吧！本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Crawl_KingofGlory/Crawl_KingofGlory_HeroSkin.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之迷你爬虫之15行代码搞定热门歌单</title>
      <link href="/2019/02/15/pythonapps-crawl-163playlist/"/>
      <url>/2019/02/15/pythonapps-crawl-163playlist/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之迷你爬虫之15行代码搞定热门歌单"><a href="#Python小应用系列之迷你爬虫之15行代码搞定热门歌单" class="headerlink" title="Python小应用系列之迷你爬虫之15行代码搞定热门歌单"></a>Python小应用系列之迷你爬虫之15行代码搞定热门歌单</h1><h2 id="1-引言"><a href="#1-引言" class="headerlink" title="1 引言"></a>1 引言</h2><p>今天是国际著名的214情人节，你过的是情人节还是正月初十呢？是否需要一首歌来抚慰你，受伤或躁动的心灵。来吧，今天教你用15行代码搞定热门歌单。学起来并听起来吧。</p><p>本文使用的是Selenium模块，它是一个自动化测试工具，利用它我们可以驱动浏览器执行特定的动作，如点击、下拉等等操作，对于一些 JavaScript 渲染的页面来说，此种抓取方式非常有效。另外采用了Chrome浏览器配合Selenium工作。</p><h2 id="2-环境"><a href="#2-环境" class="headerlink" title="2 环境"></a>2 环境</h2><p>操作系统：Windows</p><p>Python版本：3.7.2</p><h2 id="3-准备工作"><a href="#3-准备工作" class="headerlink" title="3 准备工作"></a>3 准备工作</h2><h3 id="3-1、若你的环境中没有selenium模块，直接使用pip安装即可。"><a href="#3-1、若你的环境中没有selenium模块，直接使用pip安装即可。" class="headerlink" title="3.1、若你的环境中没有selenium模块，直接使用pip安装即可。"></a>3.1、若你的环境中没有selenium模块，直接使用pip安装即可。</h3><pre class=" language-python"><code class="language-python">pip install selenium</code></pre><h3 id="3-2、打开谷歌浏览器，检查Chrome的版本："><a href="#3-2、打开谷歌浏览器，检查Chrome的版本：" class="headerlink" title="3.2、打开谷歌浏览器，检查Chrome的版本："></a>3.2、打开谷歌浏览器，检查Chrome的版本：</h3><p>在浏览器地址中输入 chrome://settings/help 回车即可看到。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191326.png" alt=""></p><h3 id="3-3、准备ChromeDriver"><a href="#3-3、准备ChromeDriver" class="headerlink" title="3.3、准备ChromeDriver"></a>3.3、准备ChromeDriver</h3><p>打开ChromeDriver 的官方网站：<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> ，寻找与你当前浏览器版本相对应的ChromeDriver下载。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191341.png" alt=""></p><h3 id="3-4、选择你自己的操作系统类型进行下载即可。"><a href="#3-4、选择你自己的操作系统类型进行下载即可。" class="headerlink" title="3.4、选择你自己的操作系统类型进行下载即可。"></a>3.4、选择你自己的操作系统类型进行下载即可。</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191356.png" alt=""></p><h3 id="3-5、以Windows为例，下载结束后，将ChromeDriver-放置在python安装目录下的Scripts文件夹即可。"><a href="#3-5、以Windows为例，下载结束后，将ChromeDriver-放置在python安装目录下的Scripts文件夹即可。" class="headerlink" title="3.5、以Windows为例，下载结束后，将ChromeDriver 放置在python安装目录下的Scripts文件夹即可。"></a>3.5、以Windows为例，下载结束后，将ChromeDriver 放置在python安装目录下的Scripts文件夹即可。</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191413.png" alt=""></p><p>准备工作完成，代码写起来吧~</p><h2 id="4-迷你爬虫的实现"><a href="#4-迷你爬虫的实现" class="headerlink" title="4 迷你爬虫的实现"></a>4 迷你爬虫的实现</h2><p>我们这次的目标是爬取热门歌单，比如网易云音乐中播放量大于1000万的歌单信息（歌单名称、链接）。</p><h5 id="4-1、我们先来打开网易云的歌单第一页："><a href="#4-1、我们先来打开网易云的歌单第一页：" class="headerlink" title="4.1、我们先来打开网易云的歌单第一页："></a>4.1、我们先来打开网易云的歌单第一页：</h5><p><a href="https://music.163.com/#/discover/playlist/?order=hot&amp;cat=%E5%85%A8%E9%83%A8&amp;limit=35&amp;offset=0" target="_blank" rel="noopener">https://music.163.com/#/discover/playlist/?order=hot&amp;cat=%E5%85%A8%E9%83%A8&amp;limit=35&amp;offset=0</a></p><h5 id="4-2、使用Chrome的开发者工具F12进行分析。"><a href="#4-2、使用Chrome的开发者工具F12进行分析。" class="headerlink" title="4.2、使用Chrome的开发者工具F12进行分析。"></a>4.2、使用Chrome的开发者工具<code>F12</code>进行分析。</h5><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191430.png" alt=""></p><p>我们想要拿的信息全在这里：</p><p>msk,封面[mask]：有歌单的名称及链接</p><p>nb,播放数[number broadcast]：135万</p><h5 id="4-3、我们还需要遍历所有的页，使用工具继续分析，找到“下一页”的URL。"><a href="#4-3、我们还需要遍历所有的页，使用工具继续分析，找到“下一页”的URL。" class="headerlink" title="4.3、我们还需要遍历所有的页，使用工具继续分析，找到“下一页”的URL。"></a>4.3、我们还需要遍历所有的页，使用工具继续分析，找到“下一页”的URL。</h5><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191451.png" alt=""></p><h5 id="4-4、切换至最后一页，拿到最后一页的URL。"><a href="#4-4、切换至最后一页，拿到最后一页的URL。" class="headerlink" title="4.4、切换至最后一页，拿到最后一页的URL。"></a>4.4、切换至最后一页，拿到最后一页的URL。</h5><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191515.png" alt=""></p><h5 id="4-5、等我们爬取完所有符合的歌单信息后，将其保存在本地。"><a href="#4-5、等我们爬取完所有符合的歌单信息后，将其保存在本地。" class="headerlink" title="4.5、等我们爬取完所有符合的歌单信息后，将其保存在本地。"></a>4.5、等我们爬取完所有符合的歌单信息后，将其保存在本地。</h5><h5 id="4-6、全部工作结束，最后再通过下面的伪代码回顾下整体思路。"><a href="#4-6、全部工作结束，最后再通过下面的伪代码回顾下整体思路。" class="headerlink" title="4.6、全部工作结束，最后再通过下面的伪代码回顾下整体思路。"></a>4.6、全部工作结束，最后再通过下面的伪代码回顾下整体思路。</h5><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token comment" spellcheck="true"># 网易云音乐歌单列表第一页地址</span>url <span class="token operator">=</span> <span class="token string">'163muisc'</span><span class="token comment" spellcheck="true"># 用Chrome接口创建一个Selenium的WebDriver</span>browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 逐页解析，直至歌单列表的最后一页</span><span class="token keyword">while</span> url <span class="token operator">!=</span> <span class="token string">'javacript:void(0)'</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 用WebDriver加载页面</span>    browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 切换至内容的iframe</span>    browser<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 定位歌单标签</span>    data <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_elements_by_tag_name<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 解析当前页中所有的歌单详情</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 获取歌单的播放量</span>        num <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">"nb"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text        <span class="token keyword">if</span> <span class="token string">'万'</span> <span class="token keyword">in</span> num <span class="token operator">and</span> int<span class="token punctuation">(</span>num<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'万'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1000</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 获取播放量大于1000万的歌单封面</span>            msk <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 把歌单封面中的标题、链接以及播放量，存储在TXT文件中</span>            <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">"163playlist.txt"</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'msk.title'</span><span class="token punctuation">,</span> <span class="token string">'msk.num'</span><span class="token punctuation">,</span> <span class="token string">'msk.href'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 定位'下一页'的URL</span>    url <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 结束调用</span>browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h5 id="4-7、爬取的效果如下："><a href="#4-7、爬取的效果如下：" class="headerlink" title="4.7、爬取的效果如下："></a>4.7、爬取的效果如下：</h5><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118191530.png" alt=""></p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h2><p>本文旨在安抚你因情人节受伤的小心灵，同时带你入个爬虫的门，感受下python的强大。本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/Mini_Crawl/crawl_163playlist.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之用Python写个邮件提醒</title>
      <link href="/2019/02/12/pythonapps-sendemail/"/>
      <url>/2019/02/12/pythonapps-sendemail/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之用Python写个邮件提醒"><a href="#Python小应用系列之用Python写个邮件提醒" class="headerlink" title="Python小应用系列之用Python写个邮件提醒"></a>Python小应用系列之用Python写个邮件提醒</h1><h2 id="1-引言"><a href="#1-引言" class="headerlink" title="1 引言"></a>1 引言</h2><p>春节假期已结束，患上了节后综合征？不想工作偷个懒，又不想错过重要事情被老板逮个正着，这时邮件提醒就派上用场了。本文教你如何使用Python来发邮件。</p><h2 id="2-环境"><a href="#2-环境" class="headerlink" title="2 环境"></a>2 环境</h2><p>操作系统：Windows /  Linux</p><p>Python版本：3.7.2</p><h2 id="3-邮件收发流程"><a href="#3-邮件收发流程" class="headerlink" title="3 邮件收发流程"></a>3 邮件收发流程</h2><p>邮件收发，很自然地涉及两个阶段：邮件发送过程、邮件接收过程。发邮件用的是SMTP(Simple Mail Transfer Protocol)即简单邮件传输协议，它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件中转方式。SMTP协议只能用来发送邮件，不能用来接收邮件，而大多数的邮件发送服务器都是使用SMTP协议，SMTP协议的默认TCP端口号是25。收邮件最常用的两种协议是POP3协议(TCP 110)和IMAP(TCP 143)。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193648.png" alt=""></p><p>在python中我们利用Python中smtplib模块和email模块来进行邮件的发送。smtplib模块提供了一种很方便的途径发送电子邮件，它对smtp协议进行了简单的封装。而email模块，则是用来处理邮件消息的。</p><h2 id="4-代码实现"><a href="#4-代码实现" class="headerlink" title="4 代码实现"></a>4 代码实现</h2><p>首先导入用到的模块</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> smtplib<span class="token keyword">from</span> email<span class="token punctuation">.</span>mime<span class="token punctuation">.</span>text <span class="token keyword">import</span> MIMEText<span class="token keyword">from</span> email<span class="token punctuation">.</span>utils <span class="token keyword">import</span> formataddr<span class="token keyword">from</span> email<span class="token punctuation">.</span>header <span class="token keyword">import</span> Header</code></pre><p>接下来，先看看一封邮件中涉及哪些内容。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193650.png" alt=""></p><p>邮件由<code>邮件头</code>、<code>邮件体</code>两部分组成。发件人(from)、收件人(to)、邮件主题(subject)、MIME版本、邮件内容类型等属于邮件头；邮件体则指的是邮件的正文，有text/plain(纯文本)和text/html(超文本)之分，由邮件头中的“connect type”域指出。</p><p>转成代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 邮件主题/标题</span>mail_title <span class="token operator">=</span> <span class="token string">'Email Reminder'</span><span class="token comment" spellcheck="true"># 邮件正文</span>mail_content <span class="token operator">=</span> <span class="token string">'This is an email reminder from Python.'</span><span class="token comment" spellcheck="true"># 发件人邮箱账号</span>Sender <span class="token operator">=</span> <span class="token string">'*********@qq.com'</span><span class="token comment" spellcheck="true"># 收件人邮箱账号</span>Receiver <span class="token operator">=</span> <span class="token string">'***********@126.com'</span><span class="token comment" spellcheck="true"># 发送邮件正文内容</span>msg <span class="token operator">=</span> MIMEText<span class="token punctuation">(</span>mail_content<span class="token punctuation">,</span> <span class="token string">"plain"</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 发送邮件主题/标题</span>msg<span class="token punctuation">[</span><span class="token string">"Subject"</span><span class="token punctuation">]</span> <span class="token operator">=</span> Header<span class="token punctuation">(</span>mail_title<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 发件人姓名  </span>msg<span class="token punctuation">[</span><span class="token string">"From"</span><span class="token punctuation">]</span> <span class="token operator">=</span> formataddr<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'＆娴敲棋子＆'</span><span class="token punctuation">,</span> Sender<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 收件人姓名  </span>msg<span class="token punctuation">[</span><span class="token string">"To"</span><span class="token punctuation">]</span> <span class="token operator">=</span> formataddr<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'＆娴敲棋子＆'</span><span class="token punctuation">,</span> Receiver<span class="token punctuation">]</span><span class="token punctuation">)</span> 实际上邮件正文的文本格式有三种，如下图，上述代码中<span class="token string">"plain"</span>对应的就是纯文本格式。</code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191119075451.png" alt=""></p><p><strong>HTML</strong>，这是Outlook中的默认邮件格式。HTML 也是要使用要为其创建邮件看起来像传统的文档，使用各种字体、 颜色以及项目符号和编号列表，以及您希望显示在您的消息内的图片时的最佳格式。</p><p><strong>纯文本</strong>，此格式适用于所有电子邮件程序，但它不支持粗体或斜体文本、 彩色的字体或其他文本格式。纯文本格式也不支持在邮件中，显示图片，虽然您可以包括附件的形式的图片。</p><p><strong>RTF格式</strong>，丰富文本格式 (RTF) 是一种只能由这些电子邮件应用程序支持的 Microsoft 格式：Microsoft Exchange Client 版本 4.0 和 5.0、所有版本的Outlook。</p><p>邮件准备好了，接下来就是登录、发送邮件、登出，如下：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 邮箱的传输协议，端口默认25</span>e <span class="token operator">=</span> smtplib<span class="token punctuation">.</span>SMTP<span class="token punctuation">(</span><span class="token string">"smtp.qq.com"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># 登录邮箱，第二个参数为发件人的邮箱授权码</span>e<span class="token punctuation">.</span>login<span class="token punctuation">(</span>Sender<span class="token punctuation">,</span> <span class="token string">'xxxxxxxxx'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 发送邮件，参数依次：发件人、收件人、发送消息</span>e<span class="token punctuation">.</span>sendmail<span class="token punctuation">(</span>Sender<span class="token punctuation">,</span> <span class="token punctuation">[</span>Receiver<span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">.</span>as_string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 退出邮箱</span>e<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>注意：登录邮箱时填写不是邮箱的密码，而是授权码。</p><p>授权码是用于登录第三方邮件客户端的专用密码。适用于登录以下服务: POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务。</p><p>网易邮箱的设置入口：设置-客户端授权码</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193652.png" alt=""></p><p>QQ邮箱的设置入口：邮箱设置-账户-生成授权码</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193651.png" alt=""></p><p>最后可以添加try…except…语句，捕获异常并打印邮件发送状态。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''此处放置登录邮箱、发送邮件、登出邮箱的代码'''</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Email Send Successful!'</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Email Send Failed!'</span><span class="token punctuation">)</span></code></pre><p>执行一下，看看邮件是否发送成功了？</p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h2><p>在实际使用时，可将上述发送邮件的代码，用函数封装起来，封装在各种场景中，如：服务器出现异常时的提醒、自动化执行结束后，火车票抢票成功后等等。</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/send_Email/send_mail.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之拿Python给自己做个UI界面</title>
      <link href="/2019/02/03/pythonapps-make-a-simple-gui/"/>
      <url>/2019/02/03/pythonapps-make-a-simple-gui/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之拿Python给自己做个UI界面"><a href="#Python小应用系列之拿Python给自己做个UI界面" class="headerlink" title="Python小应用系列之拿Python给自己做个UI界面"></a>Python小应用系列之拿Python给自己做个UI界面</h1><h2 id="1-引言"><a href="#1-引言" class="headerlink" title="1 引言"></a>1 引言</h2><p>学Python这么久了，一直想做个界面出来，最近发现Python有个内置库tkinter，利用它可以很轻松做出一些简易的UI界面，首先来看Python官方对Tkinter的说明：</p><blockquote><p>The tkinter package (“Tk interface”) is the standard Python interface to the Tk GUI toolkit. Both Tk and tkinter are available on most Unix platforms, as well as on Windows systems. </p></blockquote><p>从上面描述中我们不难看出，不管你是 Mac OS 系统，还是 Windows 系统，它都可以生成相对应的操作界面，这就是所谓的跨平台。</p><h2 id="2-调用关系说明"><a href="#2-调用关系说明" class="headerlink" title="2 调用关系说明"></a>2 调用关系说明</h2><p>其原理就是我们使用 Python代码去调用 Tkinter， Tkinter 已经封装了访问TK的接口，这个接口是一个图形库，支持多跨平台操作系统，进而通过它，我们就可以调用我们系统本身的GUI接口了。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193253.png" alt=""></p><h2 id="3-环境"><a href="#3-环境" class="headerlink" title="3 环境"></a>3 环境</h2><p>操作系统：Windows /  Linux /  Mac OS</p><p>Python版本：3.6.6</p><h2 id="4-小试牛刀"><a href="#4-小试牛刀" class="headerlink" title="4 小试牛刀"></a>4 小试牛刀</h2><p>有了概念并了解原理之后，接下来就小试牛刀一下~</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> tkinter<span class="token comment" spellcheck="true"># 定义一个窗体</span>top <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 将其加入主循环</span>top<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193259.png" alt=""></p><p>运行一下，biu~，三行代码就把一个窗口弹出来了，有没有很神奇😉</p><h2 id="5-中试牛刀"><a href="#5-中试牛刀" class="headerlink" title="5 中试牛刀"></a>5 中试牛刀</h2><p>接下来我们要来点复杂的：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk<span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token keyword">as</span> mbox<span class="token comment" spellcheck="true"># 定义MainUI类表示应用/窗口，继承Frame类</span><span class="token keyword">class</span> <span class="token class-name">MainUI</span><span class="token punctuation">(</span>tk<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Application构造函数，master为窗口的父控件</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> master <span class="token operator">=</span> None<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 初始化Application的Frame部分 </span>        tk<span class="token punctuation">.</span>Frame<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> master<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 显示窗口，并使用grid布局</span>        self<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 创建控件</span>        self<span class="token punctuation">.</span>createWidgets<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 创建控件</span>    <span class="token keyword">def</span> <span class="token function">createWidgets</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 创建一个标签，输出要显示的内容</span>        self<span class="token punctuation">.</span>firstLabel <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>self<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"「人人都是Pythonista」专注Python领域，做最专业的Python星球。"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 设定使用grid布局</span>        self<span class="token punctuation">.</span>firstLabel<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 创建一个按钮，用来触发answer方法</span>        self<span class="token punctuation">.</span>clickButton <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"点一下瞧瞧？"</span><span class="token punctuation">,</span>command<span class="token operator">=</span>self<span class="token punctuation">.</span>answer<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 设定使用grid布局</span>        self<span class="token punctuation">.</span>clickButton<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">answer</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 我们通过 messagebox 来显示一个提示框</span>        mbox<span class="token punctuation">.</span>showinfo<span class="token punctuation">(</span><span class="token string">"「人人都是Pythonista」"</span><span class="token punctuation">,</span><span class="token triple-quoted-string string">'''        这是一个专注Python的星球，我们提供「从零单排」、「实战项目」、「大航海」、「技术沙龙」、「技术分享」、「大厂内推」等系列供你选择及学习，当然也会有周边技术沿伸。        本星球会不定期开展各类实战项目，阶段性组织线上技术沙龙、分享等；对于职业发展路线不明确的，我们会邀请到一些大厂hr及高级开发、经理等给大家解惑。        加入我们，和千人一起玩Python，To be a Pythonista！        '''</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 创建一个MainUI对象</span>app <span class="token operator">=</span> MainUI<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置窗口标题</span>app<span class="token punctuation">.</span>master<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'「人人都是Pythonista」'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 设置窗体大小</span>app<span class="token punctuation">.</span>master<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'400x100'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 主循环开始</span>app<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>在这里：</p><p>我们导入了<code>tkinter</code>的相关模块<br>定义了初始化函数，通过<code>grid()</code>方法将我们的组件传给父容器<br>自定义一个创建组件的方法，我们创建了一个标签和一个按钮，这个按钮被点击后就会触发<code>answer</code>这个方法<br>我们通过<code>messagebox</code>来显示一个提示框<br>实例化我们的 APP，然后通过主线程来监听我们的界面操作<br>运行后如下：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191118193314.png" alt=""></p><h2 id="6-总结"><a href="#6-总结" class="headerlink" title="6 总结"></a>6 总结</h2><p>想要做出漂亮的UI界面，还是需要深入地学习下Tkinter这个模块。上文中的我们只用到了框架、按钮、标签、文本这四种控件，而在Tkinter中给我们提供了15种控件供大家使用。此外Tkinter控件布局有三种方式：包装pack()、网格grid()、位置place()，本文中选用了grid，大家也可以逐一尝试下有什么区别，期待大家的大试牛刀~</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/make_a_simple_GUI/make_a_simple_GUI.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python小应用系列之用拍摄时间重命名你的照片</title>
      <link href="/2019/01/30/pythonapps-rename-img-use-exif/"/>
      <url>/2019/01/30/pythonapps-rename-img-use-exif/</url>
      
        <content type="html"><![CDATA[<h1 id="Python小应用系列之用拍摄时间重命名你的照片"><a href="#Python小应用系列之用拍摄时间重命名你的照片" class="headerlink" title="Python小应用系列之用拍摄时间重命名你的照片"></a>Python小应用系列之用拍摄时间重命名你的照片</h1><h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1 环境"></a>1 环境</h2><p>操作系统：Windows</p><p>Python版本：3.6.6</p><h2 id="2-背景"><a href="#2-背景" class="headerlink" title="2 背景"></a>2 背景</h2><p>使用单反或是用iphone手机拍摄后的照片名字都是以“IMG_数字.jpg”的命名，当有在大量照片时，查找某一时间段拍摄的照片就很不方便，并且在归档管理上很容易出现重名的问题。若是采用“拍摄年月日_时分秒.jpg”的方式来命名，那么就能避免上述问题的出现，毕竟1秒钟拍多张照片的场景不会很多。那么问题来了，如何得到照片的拍摄等信息呢？</p><h2 id="3-引入"><a href="#3-引入" class="headerlink" title="3 引入"></a>3 引入</h2><p>首先随便打开一张照片来一探究竟，现在的图片处理工具都会提供<em>图片信息</em>之类的功能菜单来查看详情。如下图：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116150015.png" alt=""></p><p>可以看到一张图片中竟记录了这么多信息，如：曝光度，光圈，焦距，快门，机身等，同时也发现了我们关心的字段，照片的拍摄时间。这些信息是什么？又是记录在哪里的呢？</p><h3 id="3-1-Exif信息"><a href="#3-1-Exif信息" class="headerlink" title="3.1 Exif信息"></a>3.1 Exif信息</h3><p>如上图所示的数码照片中的信息诸如拍摄时的光圈、快门、白平衡、ISO、焦距、日期时间等各种和拍摄条件以及相机品牌、型号、色彩编码、拍摄时录制的声音以及全球定位系统(GPS)、缩略图等统称之为<code>EXIF</code>信息。</p><blockquote><p>所有的JPEG文件以字符串“0xFFD8”开头，并以字符串“0xFFD9”结束。文件头中有一系列“0xFF??”格式的字符串，称为“标识”，用来标记JPEG文件的信息段。“0xFFD8”表示图像信息开始，“0xFFD9”表示图像信息结束，这两个标识后面没有信息，而其它标识紧跟一些信息字符。0xFFE0 — 0xFFEF之间的标识符称为“应用标记”，没有被常规JPEG文件利用，Exif正是利用这些信息串记录拍摄信息的。</p></blockquote><p>了解完上述信息后，接下来就看看在Python中是如何读取Exif信息的？</p><h3 id="3-2-exifread模块"><a href="#3-2-exifread模块" class="headerlink" title="3.2 exifread模块"></a>3.2 exifread模块</h3><p>这里就要用到exifread模块，直接使用pip就可以安装：</p><pre class=" language-python"><code class="language-python">pip install exifread</code></pre><p>我们可以使用这个模块去读取图片中的信息，由于我们只关心照片的拍摄时间，它对应Exif信息中的标签名称如下：<code>EXIF DateTimeOriginal</code></p><p>我们只需要拿到这个字段对应的值之后，就得到了照片的拍摄时间。接下来便可以用拍摄时间对照片进行重命名的操作了。</p><p>好了，整体的思路有了，现在下面就是具体的代码实现。</p><h2 id="4-代码实现"><a href="#4-代码实现" class="headerlink" title="4 代码实现"></a>4 代码实现</h2><p>首先指定好路径，并拿到要处理的文件：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 修改要处理的目录</span>IMGPath <span class="token operator">=</span> <span class="token string">"P:\\Personal\\Python\\"</span><span class="token keyword">for</span> IMGName <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>IMGPath<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># 拼接出原文件路径</span>    full_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>IMGPath<span class="token punctuation">,</span> IMGName<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 判断是否为文件</span>    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>full_name<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 调用opExif函数对文件进行处理操作</span>        opExif<span class="token punctuation">(</span>IMGPath<span class="token punctuation">,</span> IMGName<span class="token punctuation">)</span></code></pre><p>使用二进制方式打开文件，读取文件头部的EXIF信息：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">with</span> open<span class="token punctuation">(</span>old_full_name<span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    tags <span class="token operator">=</span> exifread<span class="token punctuation">.</span>process_file<span class="token punctuation">(</span>f<span class="token punctuation">)</span></code></pre><p>若读取的文件头部信息匹配了EXIF信息中拍摄时间的标签，则进行处理并组成新的名字：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 先拿到原文件的后缀</span>file_suffix <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># EXIF信息中拍摄时间的标签</span>Tag <span class="token operator">=</span> <span class="token string">"EXIF DateTimeOriginal"</span><span class="token keyword">if</span> Tag <span class="token keyword">in</span> tags<span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 调整原始的时间格式为"年月日_时分秒"</span>    file_stem <span class="token operator">=</span> str<span class="token punctuation">(</span>tags<span class="token punctuation">[</span>Tag<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span>     <span class="token comment" spellcheck="true"># 新文件名：年月日_时分秒.原后缀名   </span>    new_name <span class="token operator">=</span> file_stem <span class="token operator">+</span> file_suffix</code></pre><p>当然了，你还可以加个序号以防重名：</p><pre class=" language-python"><code class="language-python">num <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">while</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>new_name<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># 年月日_时分秒_序号.原后缀名</span>     new_name <span class="token operator">=</span> file_stem <span class="token operator">+</span> <span class="token string">'_'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">+</span> file_suffix      num <span class="token operator">+=</span> <span class="token number">1</span></code></pre><p>接下来就是重命名的操作：</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 拼接出新文件路径</span>new_full_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> new_name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"{old_full_name} >>> {new_full_name}"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 执行重命名操作</span>os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>old_full_name<span class="token punctuation">,</span> new_full_name<span class="token punctuation">)</span></code></pre><p>实际执行的效果如下：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20191116150146.png" alt=""></p><p>不足30行代码就搞定它了，是不是很开心？赶快操作起来吧~</p><p>本文所涉及的完整代码详见<a href="https://github.com/HGzhao/PythonApps/blob/master/rename_IMG_use_Exif/rename_IMG_use_Exif.py" target="_blank" rel="noopener">HGzhao/PythonApps</a></p><p>备注：本篇首发于知识星球「人人都是Pythonista」。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python小应用系列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Python小应用系列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows Git初始化配置</title>
      <link href="/2018/08/05/windows-git-chu-shi-hua-pei-zhi/"/>
      <url>/2018/08/05/windows-git-chu-shi-hua-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-Git初始化配置"><a href="#Windows-Git初始化配置" class="headerlink" title="Windows Git初始化配置"></a>Windows Git初始化配置</h1><p>1、Git安装完毕后，从开始菜单中找到Git Bash，双击进入Git Shell界面</p><p>2、配置Name和Email</p><p>命令格式参考：<br><code>git config --global user.name "your name"</code><br><code>git config --global user.email "your email address"</code></p><p>3、生成Public/Private RSA Key</p><p>命令格式参考：<br><code>ssh-keygen -C "your email address" -t rsa</code><br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190828192708.png" alt=""></p><p>这里有一些注意事项：</p><ul><li>设置Public RSA Key的保存位置，直接回车采用默认地址；</li><li>设置一个密码，并再次输入确认(<font color="#dd00dd"><strong>这里不建议设置，方便本地使用</strong></font>)</li><li>Public RSA Key的保存路径：c:\users\username.ssh\id_rsa.pub<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190828192736.png" alt=""></li></ul><p>4、将Public Key告知Github</p><ul><li>Home Page：<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a> 。</li><li>进入Account Settings页面，打开SSH Keys，点击“Add SSH Key”。</li><li>在本地打开c:\users\username.ssh\id_rsa.pub，把里面的内容全部Copy到Key对应的输入框内，点击“Add Key”。</li></ul><p>5、添加SSH信任<a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>站点<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190828192744.png" alt=""></p><p>6、Clone Repositories<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://raw.githubusercontent.com/HGzhao/CloudIMG/master/2019IMG/20190828192750.png" alt=""></p><p>需要注意的是：</p><ul><li>版本库地址格式：<code>git@github.com:your_resp_address</code>；</li><li>保存目录的最后一级不能Exist； </li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Uncategorized </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
